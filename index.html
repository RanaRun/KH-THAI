<!DOCTYPE html>
<html lang="km"> <!-- Set default language to Khmer -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>កម្មវិធីរៀនភាសាថៃ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom styles for flashcards */
        .flashcard {
            perspective: 1000px; /* Needed for 3D flip effect */
        }
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }
        .flashcard-inner.rotate-y-180 {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .flashcard-front {
            background-color: #eff6ff; /* blue-50 */
            color: #1e40af; /* blue-800 */
        }
        .flashcard-back {
            background-color: #dbeafe; /* blue-100 */
            color: #1f2937; /* gray-800 */
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 font-inter min-h-screen flex flex-col">
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="fixed inset-0 bg-gray-200 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
    </div>

    <header class="bg-blue-600 text-white p-4 shadow-md rounded-b-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold" data-translate="app_title">កម្មវិធីរៀនភាសាថៃ</h1>
            <div class="flex items-center space-x-4">
                <!-- User ID Display -->
                <span id="user-id-display" class="text-sm bg-blue-700 px-3 py-1 rounded-full">
                    <span data-translate="user_id_label">ID អ្នកប្រើប្រាស់:</span> <span id="current-user-id">Guest</span>
                </span>
                <!-- Language Selector -->
                <div class="relative">
                    <select id="language-selector" class="bg-blue-700 text-white px-3 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="km">ខ្មែរ</option>
                        <option value="en">English</option>
                        <option value="th">ไทย</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto mt-6 p-4 flex-grow">
        <!-- Navigation Tabs -->
        <nav class="bg-white p-2 rounded-lg shadow-md mb-6 flex flex-wrap justify-center sm:justify-start">
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="home">
                <i class="fas fa-home"></i>
                <span data-translate="home_nav">ទំព័រដើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="kindergarten">
                <i class="fas fa-child"></i>
                <span data-translate="kindergarten_nav">ថ្នាក់មតេយ្យ</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="beginner">
                <i class="fas fa-seedling"></i>
                <span data-translate="beginner_nav">កម្រិតចាប់ផ្តើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="intermediate">
                <i class="fas fa-book-open"></i>
                <span data-translate="intermediate_nav">កម្រិតកណ្តាល</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="advanced">
                <i class="fas fa-graduation-cap"></i>
                <span data-translate="advanced_nav">កម្រិតខ្ពស់</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="alphabet">
                <i class="fas fa-spell-check"></i>
                <span data-translate="alphabet_nav">អក្ខរក្រម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="custom-lesson">
                <i class="fas fa-magic"></i>
                <span data-translate="custom_lesson_nav">មេរៀនតាមតម្រូវការ</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="exam">
                <i class="fas fa-question-circle"></i>
                <span data-translate="exam_nav">ប្រឡង</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="flashcards">
                <i class="fas fa-clone"></i>
                <span data-translate="flashcards_nav">Flashcards</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="progress">
                <i class="fas fa-chart-line"></i>
                <span data-translate="progress_nav">របាយការណ៍</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="bookmarks">
                <i class="fas fa-bookmark"></i>
                <span data-translate="bookmarks_nav">មេរៀនចូលចិត្ត</span>
            </button>
        </nav>

        <!-- Content Sections -->
        <div id="content-area" class="bg-white p-6 rounded-lg shadow-md min-h-[500px]">
            <!-- Home Section (Default View) -->
            <section id="home-section" class="app-section active">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="welcome_title">សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!</h2>
                <p class="text-gray-600 leading-relaxed mb-4" data-translate="welcome_text">កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-volume-up mr-2"></i><span data-translate="feature_audio_title">ស្តាប់សំឡេងជនជាតិដើម</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_audio_desc">ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-brain mr-2"></i><span data-translate="feature_exam_title">ប្រព័ន្ធប្រឡង</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_exam_desc">សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-address-card mr-2"></i><span data-translate="feature_flashcards_title">Flashcard ពាក្យសំខាន់ៗ</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_flashcards_desc">រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តรកម្ម។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-chart-bar mr-2"></i><span data-translate="feature_progress_title">តាមដានវឌ្ឍនភាព</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_progress_desc">មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-heart mr-2"></i><span data-translate="feature_bookmarks_title">Bookmark មេរៀនចូលចិត្ត</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_bookmarks_desc">រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-globe mr-2"></i><span data-translate="feature_language_title">ជម្រើសភាសា</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_language_desc">ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។</p>
                    </div>
                </div>
            </section>

            <!-- Kindergarten Section -->
            <section id="kindergarten-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="kindergarten_title">ថ្នាក់មតេយ្យ</h2>
                <p class="text-gray-600 mb-6" data-translate="kindergarten_intro">សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។</p>
                <div id="kindergarten-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Beginner Section -->
            <section id="beginner-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="beginner_title">កម្រិតចាប់ផ្តើម</h2>
                <p class="text-gray-600 mb-6" data-translate="beginner_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។</p>
                <div id="beginner-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Intermediate Section -->
            <section id="intermediate-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="intermediate_title">កម្រិតកណ្តាល</h2>
                <p class="text-gray-600 mb-6" data-translate="intermediate_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។</p>
                <div id="intermediate-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Advanced Section -->
            <section id="advanced-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="advanced_title">កម្រិតខ្ពស់</h2>
                <p class="text-gray-600 mb-6" data-translate="advanced_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។</p>
                <div id="advanced-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Alphabet Section (New) -->
            <section id="alphabet-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="alphabet_title">អក្ខរក្រមថៃ</h2>
                <p class="text-gray-600 mb-6" data-translate="alphabet_intro">ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។</p>

                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="consonants_title">ព្យញ្ជនៈ</h3>
                <div class="flex items-center space-x-2 mb-4">
                    <label for="consonant-sort-by" class="text-gray-700" data-translate="sort_by_label">តម្រៀបតាម:</label>
                    <select id="consonant-sort-by" class="bg-white border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="thaiChar" data-translate="sort_thai_char">អក្សរថៃ</option>
                        <option value="phoneticTranscription" data-translate="sort_phonetic">សូរស័ព្ទខ្មែរ</option>
                        <option value="khmerMeaning" data-translate="sort_khmer_meaning">អត្ថន័យខ្មែរ</option>
                        <option value="englishMeaning" data-translate="sort_english_meaning">អត្ថន័យអង់គ្លេស</option>
                    </select>
                </div>
                <div id="consonants-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8">
                    <!-- Consonants will be dynamically loaded here -->
                </div>

                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="vowels_title">ស្រៈ</h3>
                <div class="flex items-center space-x-2 mb-4">
                    <label for="vowel-sort-by" class="text-gray-700" data-translate="sort_by_label">តម្រៀបតាម:</label>
                    <select id="vowel-sort-by" class="bg-white border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="thaiChar" data-translate="sort_thai_char">អក្សរថៃ</option>
                        <option value="phoneticTranscription" data-translate="sort_phonetic">សូរស័ព្ទខ្មែរ</option>
                        <option value="khmerMeaning" data-translate="sort_khmer_meaning">អត្ថន័យខ្មែរ</option>
                        <option value="englishMeaning" data-translate="sort_english_meaning">អត្ថន័យអង់គ្លេស</option>
                    </select>
                </div>
                <div id="vowels-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Vowels will be dynamically loaded here -->
                </div>
            </section>

            <!-- Custom Lesson Section (Now displays static content) -->
            <section id="custom-lesson-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="custom_lesson_title">មេរៀនតាមតម្រូវការ</h2>
                <p class="text-gray-600 mb-6" data-translate="custom_lesson_intro_static">នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។</p>

                <div id="custom-lesson-output" class="space-y-6">
                    <!-- Hardcoded custom lesson example -->
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ฉันอยากสั่งอาหารไทย</p>
                            <p class="text-lg text-gray-700">ឆាន់ យ៉ាក សាំង អាហារ ថៃ</p>
                            <p class="text-lg text-gray-700">ខ្ញុំចង់បញ្ជាម្ហូបថៃ</p>
                            <p class="text-md text-gray-500">I want to order Thai food.</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ฉันอยากสั่งอาหารไทย">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឆាន់ យ៉ាក សាំង អាហារ ថៃ">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">มีอะไรแนะนำไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មានអ្វីណែនាំទេ?</p>
                            <p class="text-md text-gray-500">Do you have any recommendations?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="มีอะไรแนะนำไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ลดราคาได้ไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">បញ្ចុះតម្លៃបានទេ?</p>
                            <p class="text-md text-gray-500">Can I get a discount?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ลดราคาได้ไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">อันนี้เท่าไหร่ครับ/คะ?</p>
                            <p class="text-lg text-gray-700">អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មួយនេះប៉ុន្មាន?</p>
                            <p class="text-md text-gray-500">How much is this one?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="อันนี้เท่าไหร่ครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Exam Section -->
            <section id="exam-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="exam_title">ប្រឡង</h2>
                <p class="text-gray-600 mb-6" data-translate="exam_intro_static">សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។</p>
                <div id="exam-questions-container" class="space-y-6">
                    <!-- Exam questions will be dynamically loaded here -->
                </div>
            </section>

            <!-- Flashcards Section -->
            <section id="flashcards-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="flashcards_title">Flashcards</h2>
                <p class="text-gray-600 mb-6" data-translate="flashcards_intro_static">រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។</p>
                <div id="flashcards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Flashcards will be dynamically loaded here -->
                </div>
            </section>

            <!-- Progress Section (Now displays static report) -->
            <section id="progress-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="progress_title">របាយការណ៍កម្រិតចំណេះដឹង</h2>
                <p class="text-gray-600 mb-6" data-translate="progress_intro_static">នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។</p>
                <div id="progress-report-container" class="bg-blue-50 p-4 rounded-lg shadow-sm text-gray-700 leading-relaxed">
                    <p data-translate="progress_content_static">
                        សូមអបអរសាទរចំពោះវឌ្ឍនភាពដ៏អស្ចារ្យរបស់អ្នកក្នុងការរៀនភាសាថៃ! អ្នកបានបង្ហាញពីភាពជាប់លាប់ដ៏គួរឱ្យកត់សម្គាល់ក្នុងការអនុវត្តប្រចាំថ្ងៃរបស់អ្នក។
                        វាក្យសព្ទរបស់អ្នកបានរីកចម្រើនយ៉ាងឆាប់រហ័ស ហើយអ្នកកំពុងចាប់ផ្តើមយល់ពីឃ្លាស្មុគស្មាញកាន់តែច្រើន។
                        ការបញ្ចេញសំឡេងរបស់អ្នកបានប្រសើរឡើងគួរឱ្យកត់សម្គាល់ ជាពិសេសនៅក្នុងព្យាង្គដែលមានសម្លេង។
                        អ្នកបានបញ្ចប់មេរៀនកម្រិតមតេយ្យ និងកម្រិតចាប់ផ្តើមទាំងអស់ដោយជោគជ័យ ហើយបានឆ្លើយសំណួរប្រឡងជាច្រើនបានត្រឹមត្រូវ។
                        ដើម្បីបន្តការរីកចម្រើនរបស់អ្នក សូមពិចារណាផ្តោតលើការកែលម្អការនិយាយឱ្យស្ទាត់ជំនាញដោយការអនុវត្តជាមួយអ្នកនិយាយដើម
                        និងការយល់ដឹងអំពីវេយ្យាករណ៍ស្មុគស្មាញបន្ថែមទៀត ដូចជាការប្រើប្រាស់ភាគល្អិត និងរចនាសម្ព័ន្ធប្រយោគ។
                        ការអានរឿងខ្លីៗ ឬអត្ថបទព័ត៌មានជាភាសាថៃក៏អាចជួយពង្រឹងជំនាញរបស់អ្នកផងដែរ។
                        បន្តការខិតខំប្រឹងប្រែងរបស់អ្នក! អ្នកกำลังทำได้ดีมาก!
                    </p>
                </div>
            </section>

            <!-- Bookmarks Section (Now displays static bookmarks) -->
            <section id="bookmarks-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="bookmarks_title">មេរៀនចូលចិត្ត</h2>
                <p class="text-gray-600 mb-6" data-translate="bookmarks_intro_static">គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។</p>
                <div id="bookmarks-list-container" class="space-y-3">
                    <!-- Hardcoded bookmarks -->
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ធ្វើដំណើរ</p>
                        <p class="text-md text-gray-700 ml-6">(Travel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการเดินทาง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> វាក្យសព្ទម្ហូបអាហារ</p>
                        <p class="text-md text-gray-700 ml-6">(Food Vocabulary)</p>
                        <p class="text-sm text-gray-500 ml-6">(คำศัพท์อาหาร)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់សណ្ឋាគារ</p>
                        <p class="text-md text-gray-700 ml-6">(Hotel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับโรงแรม)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ទិញទំនិញ</p>
                        <p class="text-md text-gray-700 ml-6">(Shopping Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการช้อปปิ้ง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> លេខ និងពណ៌</p>
                        <p class="text-md text-gray-700 ml-6">(Numbers and Colors)</p>
                        <p class="text-sm text-gray-500 ml-6">(ตัวเลขและสี)</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 text-center mt-6 rounded-t-lg">
        <p>&copy; 2025 <span data-translate="app_title_footer">កម្មវិធីរៀនភាសាថៃ</span>. <span data-translate="footer_text">រក្សាសិទ្ធិគ្រប់យ៉ាង។</span></p>
    </footer>

    <script>
        // Wrap the entire app logic in an IIFE and use a flag to ensure it runs only once
        // This helps prevent 'Identifier already declared' errors in environments that might re-execute scripts.
        if (typeof window.thaiLanguageAppInitialized === 'undefined') {
            window.thaiLanguageAppInitialized = true;

            // Show loading spinner
            function showLoadingSpinner() {
                document.getElementById('loading-spinner').classList.remove('hidden');
            }

            // Hide loading spinner
            function hideLoadingSpinner() {
                document.getElementById('loading-spinner').classList.add('hidden');
            }

            // Language translations
            const translations = {
                km: {
                    "app_title": "កម្មវិធីរៀនភាសាថៃ",
                    "app_title_footer": "កម្មវិធីរៀនភាសាថៃ",
                    "home_nav": "ទំព័រដើម",
                    "kindergarten_nav": "ថ្នាក់មតេយ្យ",
                    "beginner_nav": "កម្រិតចាប់ផ្តើម",
                    "intermediate_nav": "កម្រិតកណ្តាល",
                    "advanced_nav": "កម្រិតខ្ពស់",
                    "alphabet_nav": "អក្ខរក្រម",
                    "custom_lesson_nav": "មេរៀនតាមតម្រូវការ",
                    "exam_nav": "ប្រឡង",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "របាយការណ៍",
                    "bookmarks_nav": "មេរៀនចូលចិត្ត",
                    "user_id_label": "ID អ្នកប្រើប្រាស់:",
                    "welcome_title": "សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!",
                    "welcome_text": "កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។",
                    "feature_audio_title": "ស្តាប់សំឡេងជនជាតិដើម",
                    "feature_audio_desc": "ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។",
                    "feature_exam_title": "ប្រព័ន្ធប្រឡង",
                    "feature_exam_desc": "សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។",
                    "feature_flashcards_title": "Flashcard ពាក្យសំខាន់ៗ",
                    "feature_flashcards_desc": "រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តរកម្ម។",
                    "feature_progress_title": "តាមដានវឌ្ឍនភាព",
                    "feature_progress_desc": "មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។",
                    "feature_bookmarks_title": "Bookmark មេរៀនចូលចិត្ត",
                    "feature_bookmarks_desc": "រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។",
                    "feature_language_title": "ជម្រើសភាសា",
                    "feature_language_desc": "ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។",
                    "kindergarten_title": "ថ្នាក់មតេយ្យ",
                    "kindergarten_intro": "សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។",
                    "beginner_title": "កម្រិតចាប់ផ្តើម",
                    "beginner_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។",
                    "intermediate_title": "កម្រិតកណ្តាល",
                    "intermediate_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។",
                    "advanced_title": "កម្រិតខ្ពស់",
                    "advanced_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។",
                    "alphabet_title": "អក្ខរក្រមថៃ",
                    "alphabet_intro": "ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។",
                    "consonants_title": "ព្យញ្ជនៈ",
                    "vowels_title": "ស្រៈ",
                    "sort_by_label": "តម្រៀបតាម:",
                    "sort_thai_char": "អក្សរថៃ",
                    "sort_phonetic": "សូរស័ព្ទខ្មែរ",
                    "sort_khmer_meaning": "អត្ថន័យខ្មែរ",
                    "sort_english_meaning": "អត្ថន័យអង់គ្លេស",
                    "custom_lesson_title": "មេរៀនតាមតម្រូវការ",
                    "custom_lesson_intro_static": "នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។",
                    "exam_title": "ប្រឡង",
                    "exam_intro_static": "សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។",
                    "progress_title": "របាយការណ៍កម្រិតចំណេះដឹង",
                    "progress_intro_static": "នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។",
                    "progress_content_static": "សូមអបអរសាទរចំពោះវឌ្ឍនភាពដ៏អស្ចារ្យរបស់អ្នកក្នុងការរៀនភាសាថៃ! អ្នកបានបង្ហាញពីភាពជាប់លាប់ដ៏គួរឱ្យកត់សម្គាល់ក្នុងការអនុវត្តប្រចាំថ្ងៃរបស់អ្នក។ វាក្យសព្ទរបស់អ្នកបានរីកចម្រើនយ៉ាងឆាប់រហ័ស ហើយអ្នកកំពុងចាប់ផ្តើមយល់ពីឃ្លាស្មុគស្មាញកាន់តែច្រើន។ ការបញ្ចេញសំឡេងរបស់អ្នកបានប្រសើរឡើងគួរឱ្យកត់សម្គាល់ ជាពិសេសនៅក្នុងព្យាង្គដែលមានសម្លេង។ អ្នកបានបញ្ចប់មេរៀនកម្រិតមតេយ្យ និងកម្រិតចាប់ផ្តើមទាំងអស់ដោយជោគជ័យ ហើយបានឆ្លើយសំណួរប្រឡងជាច្រើនបានត្រឹមត្រូវ។ ដើម្បីបន្តការរីកចម្រើនរបស់អ្នក សូមពិចារណាផ្តោតលើការកែលម្អការនិយាយឱ្យស្ទាត់ជំនាញដោយការអនុវត្តជាមួយអ្នកនិយាយដើម និងការយល់ដឹងអំពីវេយ្យាករណ៍ស្មុគស្មាញបន្ថែមទៀត ដូចជាការប្រើប្រាស់ភាគល្អិត និងរចនាសម្ព័ន្ធប្រយោគ។ ការអានរឿងខ្លីៗ ឬអត្ថបទព័ត៌មានជាភាសាថៃក៏អាចជួយពង្រឹងជំនាញរបស់អ្នកផងដែរ។ បន្តការខិតខំប្រឹងប្រែងរបស់អ្នក! អ្នកកំពុងធ្វើបានល្អណាស់!",
                    "bookmarks_title": "មេរៀនចូលចិត្ត",
                    "bookmarks_intro_static": "គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។",
                    "footer_text": "រក្សាសិទ្ធិគ្រប់យ៉ាង។",
                    "next_card": "កាតបន្ទាប់",
                    "prev_card": "កាតមុន",
                    "flip_card": "បង្វិលកាត",
                    "check_answer": "ពិនិត្យចម្លើយ",
                    "submit_exam": "ដាក់ស្នើប្រឡង",
                    "your_score": "ពិន្ទុរបស់អ្នក:",
                    "correct_answers": "ចម្លើយត្រឹមត្រូវ:",
                    "incorrect_answers": "ចម្លើយខុស:",
                    "try_again": "ព្យាយាមម្តងទៀត",
                    "question": "សំណួរ",
                    "answer": "ចម្លើយ",
                    "correct": "ត្រឹមត្រូវ!",
                    "incorrect": "ខុស!",
                    "explanation": "ការពន្យល់:",
                    "lesson": "មេរៀន",
                    "lesson_number": "មេរៀនទី",
                    "phrase": "ឃ្លា",
                    "thai_text": "អត្ថបទថៃ",
                    "khmer_phonetic": "សូរស័ព្ទខ្មែរ",
                    "khmer_meaning": "អត្ថន័យខ្មែរ",
                    "english_meaning": "អត្ថន័យអង់គ្លេស",
                    "consonant_class": "ថ្នាក់ព្យញ្ជនៈ:",
                    "mid_class": "កណ្តាល",
                    "high_class": "ខ្ពស់",
                    "low_class": "ទាប",
                    "vowel_type": "ប្រភេទស្រៈ:",
                    "short_vowel": "ខ្លី",
                    "long_vowel": "វែង",
                    "diphthong": "ស្រៈផ្សំ",
                    "play_thai_audio": "លេងសំឡេងថៃ",
                    "play_khmer_phonetic_audio": "លេងសំឡេងសូរស័ព្ទខ្មែរ"
                },
                en: {
                    "app_title": "Thai Language Learning App",
                    "app_title_footer": "Thai Language Learning App",
                    "home_nav": "Home",
                    "kindergarten_nav": "Kindergarten",
                    "beginner_nav": "Beginner",
                    "intermediate_nav": "Intermediate",
                    "advanced_nav": "Advanced",
                    "alphabet_nav": "Alphabet",
                    "custom_lesson_nav": "Custom Lesson",
                    "exam_nav": "Exam",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "Progress",
                    "bookmarks_nav": "Bookmarks",
                    "user_id_label": "User ID:",
                    "welcome_title": "Welcome to the Thai Language Learning App!",
                    "welcome_text": "This app will help you learn Thai through interactive lessons, quizzes, flashcards, and progress tracking.",
                    "feature_audio_title": "Native Audio Pronunciation",
                    "feature_audio_desc": "Listen to words and phrases pronounced by native Thai speakers to improve your pronunciation.",
                    "feature_exam_title": "Exam System",
                    "feature_exam_desc": "Test your knowledge with multiple-choice questions and matching exercises.",
                    "feature_flashcards_title": "Essential Flashcards",
                    "feature_flashcards_desc": "Learn new vocabulary easily using interactive flashcards.",
                    "feature_progress_title": "Progress Tracking",
                    "feature_progress_desc": "See how you're improving with detailed proficiency reports.",
                    "feature_bookmarks_title": "Bookmark Favorite Lessons",
                    "feature_bookmarks_desc": "Save lessons and words you want to revisit and practice again.",
                    "feature_language_title": "Language Options",
                    "feature_language_desc": "Switch the interface language between Khmer, English, and Thai.",
                    "kindergarten_title": "Kindergarten Level",
                    "kindergarten_intro": "Welcome to the Kindergarten lessons! Let's learn the most common words and simple phrases.",
                    "beginner_title": "Beginner Level",
                    "beginner_intro": "Welcome to the Beginner lessons! Let's learn some basic Thai phrases.",
                    "intermediate_title": "Intermediate Level",
                    "intermediate_intro": "Welcome to the Intermediate lessons! Here you will learn slightly more complex phrases.",
                    "advanced_title": "Advanced Level",
                    "advanced_intro": "Welcome to the Advanced lessons! Here you will learn complex phrases and idiomatic expressions.",
                    "alphabet_title": "Thai Alphabet",
                    "alphabet_intro": "Let's learn Thai consonants and vowels.",
                    "consonants_title": "Consonants",
                    "vowels_title": "Vowels",
                    "sort_by_label": "Sort by:",
                    "sort_thai_char": "Thai Character",
                    "sort_phonetic": "Khmer Phonetic",
                    "sort_khmer_meaning": "Khmer Meaning",
                    "sort_english_meaning": "English Meaning",
                    "custom_lesson_title": "Custom Lesson",
                    "custom_lesson_intro_static": "This is a sample pre-generated lesson. You can modify it directly in the code.",
                    "exam_title": "Exam",
                    "exam_intro_static": "Test your Thai language knowledge with sample questions.",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "Learn new words and phrases easily using sample flashcards.",
                    "progress_title": "Proficiency Report",
                    "progress_intro_static": "This is a sample progress report.",
                    "progress_content_static": "Congratulations on your excellent progress in learning Thai! You have shown remarkable consistency in your daily practice. Your vocabulary has expanded rapidly, and you are starting to grasp more complex phrases. Your pronunciation has significantly improved, especially in tonal syllables. You have successfully completed all Kindergarten and Beginner lessons and answered many exam questions correctly. To continue your progress, consider focusing on improving conversational fluency by practicing with native speakers and understanding more complex grammar, such as particle usage and sentence structures. Reading short stories or news articles in Thai can also help reinforce your skills. Keep up the great work! You are doing very well!",
                    "bookmarks_title": "Favorite Lessons",
                    "bookmarks_intro_static": "Manage your favorite lessons and words here.",
                    "footer_text": "All rights reserved.",
                    "next_card": "Next Card",
                    "prev_card": "Previous Card",
                    "flip_card": "Flip Card",
                    "check_answer": "Check Answer",
                    "submit_exam": "Submit Exam",
                    "your_score": "Your Score:",
                    "correct_answers": "Correct Answers:",
                    "incorrect_answers": "Incorrect Answers:",
                    "try_again": "Try Again",
                    "question": "Question",
                    "answer": "Answer",
                    "correct": "Correct!",
                    "incorrect": "Incorrect!",
                    "explanation": "Explanation:",
                    "lesson": "Lesson",
                    "lesson_number": "Lesson No.",
                    "phrase": "Phrase",
                    "thai_text": "Thai Text",
                    "khmer_phonetic": "Khmer Phonetic",
                    "khmer_meaning": "Khmer Meaning",
                    "english_meaning": "English Meaning",
                    "consonant_class": "Consonant Class:",
                    "mid_class": "Mid",
                    "high_class": "High",
                    "low_class": "Low",
                    "vowel_type": "Vowel Type:",
                    "short_vowel": "Short",
                    "long_vowel": "Long",
                    "diphthong": "Diphthong",
                    "play_thai_audio": "Play Thai Audio",
                    "play_khmer_phonetic_audio": "Play Khmer Phonetic Audio"
                },
                th: {
                    "app_title": "แอปพลิเคชันเรียนภาษาไทย",
                    "app_title_footer": "แอปพลิเคชันเรียนภาษาไทย",
                    "home_nav": "หน้าหลัก",
                    "kindergarten_nav": "ระดับอนุบาล",
                    "beginner_nav": "ระดับเริ่มต้น",
                    "intermediate_nav": "ระดับกลาง",
                    "advanced_nav": "ระดับสูง",
                    "alphabet_nav": "ตัวอักษร",
                    "custom_lesson_nav": "บทเรียนกำหนดเอง",
                    "exam_nav": "แบบทดสอบ",
                    "flashcards_nav": "แฟลชการ์ด",
                    "progress_nav": "ความคืบหน้า",
                    "bookmarks_nav": "บทเรียนที่ชื่นชอบ",
                    "user_id_label": "รหัสผู้ใช้:",
                    "welcome_title": "ยินดีต้อนรับสู่แอปพลิเคชันเรียนภาษาไทย!",
                    "welcome_text": "แอปพลิเคชันนี้จะช่วยให้คุณเรียนภาษาไทยผ่านบทเรียนแบบโต้ตอบ แบบทดสอบ แฟลชการ์ด และการติดตามความคืบหน้า",
                    "feature_audio_title": "เสียงจากเจ้าของภาษา",
                    "feature_audio_desc": "ฟังคำและวลีที่ออกเสียงโดยเจ้าของภาษาไทยเพื่อปรับปรุงการออกเสียงของคุณ",
                    "feature_exam_title": "ระบบแบบทดสอบ",
                    "feature_exam_desc": "ทดสอบความรู้ของคุณด้วยคำถามแบบปรนัยและแบบฝึกหัดจับคู่คำศัพท์",
                    "feature_flashcards_title": "แฟลชการ์ดที่จำเป็น",
                    "feature_flashcards_desc": "เรียนรู้คำศัพท์ใหม่ๆ ได้อย่างง่ายดายโดยใช้แฟลชการ์ดแบบโต้ตอบ",
                    "feature_progress_title": "การติดตามความคืบหน้า",
                    "feature_progress_desc": "ดูว่าคุณพัฒนาขึ้นอย่างไรด้วยรายงานความสามารถโดยละเอียด",
                    "feature_bookmarks_title": "บุ๊กมาร์กบทเรียนที่ชื่นชอบ",
                    "feature_bookmarks_desc": "บันทึกบทเรียนและคำศัพท์ที่คุณต้องการทบทวนและฝึกฝนอีกครั้ง",
                    "feature_language_title": "ตัวเลือกภาษา",
                    "feature_language_desc": "สลับภาษาอินเทอร์เฟซระหว่างภาษาเขมร อังกฤษ และไทย",
                    "kindergarten_title": "ระดับอนุบาล",
                    "kindergarten_intro": "ยินดีต้อนรับสู่บทเรียนระดับอนุบาล! มาเรียนรู้คำศัพท์และวลีที่ง่ายที่สุดกันเถอะ",
                    "beginner_title": "ระดับเริ่มต้น",
                    "beginner_intro": "ยินดีต้อนรับสู่บทเรียนระดับเริ่มต้น! มาเรียนรู้วลีภาษาไทยพื้นฐานกันเถอะ",
                    "intermediate_title": "ระดับกลาง",
                    "intermediate_intro": "ยินดีต้อนรับสู่บทเรียนระดับกลาง! ที่นี่คุณจะได้เรียนรู้วลีที่ซับซ้อนขึ้นเล็กน้อย",
                    "advanced_title": "ระดับสูง",
                    "advanced_intro": "ยินดีต้อนรับสู่บทเรียนระดับสูง! ที่นี่คุณจะได้เรียนรู้วลีที่ซับซ้อนและการแสดงออกทางสำนวน",
                    "alphabet_title": "ตัวอักษรไทย",
                    "alphabet_intro": "มาเรียนรู้พยัญชนะและสระไทยกันเถอะ",
                    "consonants_title": "พยัญชนะ",
                    "vowels_title": "สระ",
                    "sort_by_label": "เรียงตาม:",
                    "sort_thai_char": "ตัวอักษรไทย",
                    "sort_phonetic": "การออกเสียงเขมร",
                    "sort_khmer_meaning": "ความหมายเขมร",
                    "sort_english_meaning": "ความหมายอังกฤษ",
                    "custom_lesson_title": "บทเรียนที่กำหนดเอง",
                    "custom_lesson_intro_static": "นี่คือบทเรียนตัวอย่างที่สร้างไว้ล่วงหน้า คุณสามารถแก้ไขได้โดยตรงในโค้ด",
                    "exam_title": "แบบทดสอบ",
                    "exam_intro_static": "ทดสอบความรู้ภาษาไทยของคุณด้วยคำถามตัวอย่าง",
                    "flashcards_title": "แฟลชการ์ด",
                    "flashcards_intro_static": "เรียนรู้คำศัพท์และวลีใหม่ๆ ได้อย่างง่ายดายโดยใช้แฟลชการ์ดตัวอย่าง",
                    "progress_title": "รายงานความสามารถ",
                    "progress_intro_static": "นี่คือรายงานความคืบหน้าตัวอย่าง",
                    "progress_content_static": "ขอแสดงความยินดีกับความก้าวหน้าที่ยอดเยี่ยมในการเรียนภาษาไทยของคุณ! คุณได้แสดงให้เห็นถึงความสม่ำเสมอที่น่าทึ่งในการฝึกฝนประจำวันของคุณ คำศัพท์ของคุณขยายตัวอย่างรวดเร็ว และคุณกำลังเริ่มเข้าใจวลีที่ซับซ้อนมากขึ้น การออกเสียงของคุณดีขึ้นอย่างเห็นได้ชัด โดยเฉพาะในพยางค์ที่มีวรรณยุกต์ คุณได้ทำบทเรียนระดับอนุบาลและระดับเริ่มต้นทั้งหมดสำเร็จแล้ว และตอบคำถามแบบทดสอบหลายข้อได้อย่างถูกต้อง เพื่อดำเนินการต่อความก้าวหน้าของคุณ โปรดพิจารณาเน้นการปรับปรุงความคล่องแคล่วในการสนทนาโดยการฝึกฝนกับเจ้าของภาษา และทำความเข้าใจไวยากรณ์ที่ซับซ้อนมากขึ้น เช่น การใช้คำช่วยและโครงสร้างประโยค การอ่านเรื่องสั้นหรือบทความข่าวภาษาไทยก็สามารถช่วยเสริมสร้างทักษะของคุณได้เช่นกัน ทำดีต่อไป! คุณทำได้ดีมาก!",
                    "bookmarks_title": "บทเรียนที่ชื่นชอบ",
                    "bookmarks_intro_static": "จัดการบทเรียนและคำศัพท์ที่คุณชื่นชอบที่นี่",
                    "footer_text": "สงวนลิขสิทธิ์",
                    "next_card": "การ์ดถัดไป",
                    "prev_card": "การ์ดก่อนหน้า",
                    "flip_card": "พลิกการ์ด",
                    "check_answer": "ตรวจสอบคำตอบ",
                    "submit_exam": "ส่งแบบทดสอบ",
                    "your_score": "คะแนนของคุณ:",
                    "correct_answers": "คำตอบที่ถูกต้อง:",
                    "incorrect_answers": "คำตอบที่ไม่ถูกต้อง:",
                    "try_again": "ลองอีกครั้ง",
                    "question": "คำถาม",
                    "answer": "คำตอบ",
                    "correct": "ถูกต้อง!",
                    "incorrect": "ไม่ถูกต้อง!",
                    "explanation": "คำอธิบาย:",
                    "lesson": "บทเรียน",
                    "lesson_number": "บทเรียนที่",
                    "phrase": "วลี",
                    "thai_text": "ข้อความภาษาไทย",
                    "khmer_phonetic": "การออกเสียงเขมร",
                    "khmer_meaning": "ความหมายเขมร",
                    "english_meaning": "ความหมายอังกฤษ",
                    "consonant_class": "ประเภทพยัญชนะ:",
                    "mid_class": "กลาง",
                    "high_class": "สูง",
                    "low_class": "ต่ำ",
                    "vowel_type": "ประเภทสระ:",
                    "short_vowel": "สั้น",
                    "long_vowel": "ยาว",
                    "diphthong": "สระประสม",
                    "play_thai_audio": "เล่นเสียงภาษาไทย",
                    "play_khmer_phonetic_audio": "เล่นเสียงการออกเสียงเขมร"
                }
            };

            // Data for lessons
            const lessonsData = {
                kindergarten: [
                    { thai: "สวัสดีครับ/ค่ะ", khmerPhonetic: "ជំរាបសួរ", khmerMeaning: "Hello/Hi", englishMeaning: "Hello/Hi" },
                    { thai: "ขอบคุณครับ/ค่ะ", khmerPhonetic: "អរគុណ", khmerMeaning: "Thank you", englishMeaning: "Thank you" },
                    { thai: "ขอโทษครับ/ค่ะ", khmerPhonetic: "សូមទោស", khmerMeaning: "Sorry/Excuse me", englishMeaning: "Sorry/Excuse me" },
                    { thai: "ไม่เป็นไรครับ/ค่ะ", khmerPhonetic: "មិនអីទេ", khmerMeaning: "No problem/You're welcome", englishMeaning: "No problem/You're welcome" },
                    { thai: "ใช่ครับ/ค่ะ", khmerPhonetic: "បាទ/ចាស", khmerMeaning: "Yes (male/female)", englishMeaning: "Yes (male/female)" },
                    { thai: "ไม่ใช่ครับ/ค่ะ", khmerPhonetic: "មិនមែនទេ", khmerMeaning: "No", englishMeaning: "No" },
                    { thai: "อร่อยครับ/ค่ะ", khmerPhonetic: "ឆ្ងាញ់", khmerMeaning: "Delicious", englishMeaning: "Delicious" },
                    { thai: "น้ำ", khmerPhonetic: "ទឹក", khmerMeaning: "Water", englishMeaning: "Water" },
                    { thai: "ข้าว", khmerPhonetic: "បាយ", khmerMeaning: "Rice/Food", englishMeaning: "Rice/Food" },
                    { thai: "ไป", khmerPhonetic: "ទៅ", khmerMeaning: "Go", englishMeaning: "Go" },
                    { thai: "มา", khmerPhonetic: "មក", khmerMeaning: "Come", englishMeaning: "Come" },
                    { thai: "กิน", khmerPhonetic: "ញ៉ាំ", khmerMeaning: "Eat", englishMeaning: "Eat" },
                    { thai: "นอน", khmerPhonetic: "គេង", khmerMeaning: "Sleep", englishMeaning: "Sleep" },
                    { thai: "นั่ง", khmerPhonetic: "អង្គុយ", khmerMeaning: "Sit", englishMeaning: "Sit" },
                    { thai: "ยืน", khmerPhonetic: "ឈរ", khmerMeaning: "Stand", englishMeaning: "Stand" },
                    { thai: "ร้อน", khmerPhonetic: "ក្តៅ", khmerMeaning: "Hot", englishMeaning: "Hot" },
                    { thai: "หนาว", khmerPhonetic: "ត្រជាក់", khmerMeaning: "Cold", englishMeaning: "Cold" },
                    { thai: "ใหญ่", khmerPhonetic: "ធំ", khmerMeaning: "Big", englishMeaning: "Big" },
                    { thai: "เล็ก", khmerPhonetic: "តូច", khmerMeaning: "Small", englishMeaning: "Small" },
                    { thai: "สวย", khmerPhonetic: "ស្អាត", khmerMeaning: "Beautiful", englishMeaning: "Beautiful" }
                ],
                beginner: [
                    { thai: "คุณสบายดีไหมครับ/คะ?", khmerPhonetic: "អ្នកសុខសប្បាយជាទេ?", khmerMeaning: "How are you?", englishMeaning: "How are you?" },
                    { thai: "ผม/ฉันสบายดีครับ/ค่ะ", khmerPhonetic: "ខ្ញុំសុខសប្បាយ", khmerMeaning: "I'm fine", englishMeaning: "I'm fine" },
                    { thai: "คุณชื่ออะไรครับ/คะ?", khmerPhonetic: "អ្នកឈ្មោះអ្វី?", khmerMeaning: "What's your name?", englishMeaning: "What's your name?" },
                    { thai: "ผม/ฉันชื่อ...", khmerPhonetic: "ខ្ញុំឈ្មោះ...", khmerMeaning: "My name is...", englishMeaning: "My name is..." },
                    { thai: "คุณมาจากไหนครับ/คะ?", khmerPhonetic: "អ្នកមកពីណា?", khmerMeaning: "Where are you from?", englishMeaning: "Where are you from?" },
                    { thai: "ผม/ฉันมาจาก...", khmerPhonetic: "ខ្ញុំមកពី...", khmerMeaning: "I am from...", englishMeaning: "I am from..." },
                    { thai: "เท่าไหร่ครับ/คะ?", khmerPhonetic: "ប៉ុន្មាន?", khmerMeaning: "How much?", englishMeaning: "How much?" },
                    { thai: "อยู่ที่ไหนครับ/คะ?", khmerPhonetic: "នៅឯណា?", khmerMeaning: "Where is it?", englishMeaning: "Where is it?" },
                    { thai: "ขอเมนูครับ/ค่ะ", khmerPhonetic: "សូមម៉ឺនុយ", khmerMeaning: "May I have the menu?", englishMeaning: "May I have the menu?" },
                    { thai: "เช็คบิลครับ/ค่ะ", khmerPhonetic: "គិតលុយ", khmerMeaning: "Check, please (bill)", englishMeaning: "Check, please (bill)" },
                    { thai: "ไม่เผ็ดครับ/ค่ะ", khmerPhonetic: "មិនហិរ", khmerMeaning: "Not spicy", englishMeaning: "Not spicy" },
                    { thai: "เผ็ดน้อยครับ/ค่ะ", khmerPhonetic: "ហិរបន្តិច", khmerMeaning: "A little spicy", englishMeaning: "A little spicy" },
                    { thai: "เลี้ยวซ้ายครับ/ค่ะ", khmerPhonetic: "បត់ឆ្វេង", khmerMeaning: "Turn left", englishMeaning: "Turn left" },
                    { thai: "เลี้ยวขวาครับ/ค่ะ", khmerPhonetic: "បត់ស្តាំ", khmerMeaning: "Turn right", englishMeaning: "Turn right" },
                    { thai: "ตรงไปครับ/ค่ะ", khmerPhonetic: "ទៅត្រង់", khmerMeaning: "Go straight", englishMeaning: "Go straight" },
                    { thai: "กี่โมงแล้วครับ/คะ?", khmerPhonetic: "ម៉ោងប៉ុន្មានហើយ?", khmerMeaning: "What time is it?", englishMeaning: "What time is it?" },
                    { thai: "วันนี้", khmerPhonetic: "ថ្ងៃនេះ", khmerMeaning: "Today", englishMeaning: "Today" },
                    { thai: "พรุ่งนี้", khmerPhonetic: "ថ្ងៃស្អែក", khmerMeaning: "Tomorrow", englishMeaning: "Tomorrow" },
                    { thai: "เมื่อวาน", khmerPhonetic: "ម្សិលមិញ", khmerMeaning: "Yesterday", englishMeaning: "Yesterday" },
                    { thai: "ตอนนี้", khmerPhonetic: "ឥឡូវនេះ", khmerMeaning: "Now", englishMeaning: "Now" }
                ],
                intermediate: [
                    { thai: "ผม/ฉันไม่เข้าใจครับ/ค่ะ", khmerPhonetic: "ខ្ញុំមិនយល់ទេ", khmerMeaning: "I don't understand", englishMeaning: "I don't understand" },
                    { thai: "พูดช้าๆ หน่อยครับ/ค่ะ", khmerPhonetic: "និយាយយឺតៗបន្តិច", khmerMeaning: "Please speak slowly", englishMeaning: "Please speak slowly" },
                    { thai: "กรุณาเขียนให้หน่อยครับ/ค่ะ", khmerPhonetic: "សូមសរសេរបន្តិច", khmerMeaning: "Please write it down", englishMeaning: "Please write it down" },
                    { thai: "คุณมี...ไหมครับ/คะ?", khmerPhonetic: "អ្នកមាន...ទេ?", khmerMeaning: "Do you have...?", englishMeaning: "Do you have...?" },
                    { thai: "ผม/ฉันอยากได้...ครับ/ค่ะ", khmerPhonetic: "ខ្ញុំចង់បាន...", khmerMeaning: "I want...", englishMeaning: "I want..." },
                    { thai: "ไปที่ไหนครับ/คะ?", khmerPhonetic: "ទៅកន្លែងណា?", khmerMeaning: "Where are you going?", englishMeaning: "Where are you going?" },
                    { thai: "คุณต้องการอะไรครับ/คะ?", khmerPhonetic: "អ្នកត្រូវការអ្វី?", khmerMeaning: "What do you need?", englishMeaning: "What do you need?" },
                    { thai: "ไม่เป็นไรครับ/ค่ะ", khmerPhonetic: "មិនអីទេ", khmerMeaning: "Never mind", englishMeaning: "Never mind" },
                    { thai: "คุณแน่ใจไหมครับ/คะ?", khmerPhonetic: "អ្នកប្រាកដទេ?", khmerMeaning: "Are you sure?", englishMeaning: "Are you sure?" },
                    { thai: "ลดราคาได้ไหมครับ/คะ?", khmerPhonetic: "បញ្ចុះតម្លៃបានទេ?", khmerMeaning: "Can you give a discount?", englishMeaning: "Can you give a discount?" },
                    { thai: "แพงไปครับ/ค่ะ", khmerPhonetic: "ថ្លៃពេក", khmerMeaning: "Too expensive", englishMeaning: "Too expensive" },
                    { thai: "เอาอันนี้ครับ/ค่ะ", khmerPhonetic: "យកមួយនេះ", khmerMeaning: "I'll take this one", englishMeaning: "I'll take this one" },
                    { thai: "มีขนาดอื่นไหมครับ/คะ?", khmerPhonetic: "មានទំហំផ្សេងទៀតទេ?", khmerMeaning: "Do you have other sizes?", englishMeaning: "Do you have other sizes?" },
                    { thai: "ผม/ฉันกำลังดูอยู่ครับ/ค่ะ", khmerPhonetic: "ខ្ញុំកំពុងតែមើល", khmerMeaning: "I'm just looking", englishMeaning: "I'm just looking" },
                    { thai: "เปิดกี่โมงครับ/คะ?", khmerPhonetic: "បើកម៉ោងប៉ុន្មាន?", khmerMeaning: "What time do you open?", englishMeaning: "What time do you open?" },
                    { thai: "ปิดกี่โมงครับ/คะ?", khmerPhonetic: "បិទម៉ោងប៉ុន្មាន?", khmerMeaning: "What time do you close?", englishMeaning: "What time do you close?" },
                    { thai: "รับบัตรเครดิตไหมครับ/คะ?", khmerPhonetic: "ទទួលប័ណ្ណឥណទានទេ?", khmerMeaning: "Do you accept credit cards?", englishMeaning: "Do you accept credit cards?" },
                    { thai: "เงินสดครับ/ค่ะ", khmerPhonetic: "លុយសុទ្ធ", khmerMeaning: "Cash", englishMeaning: "Cash" },
                    { thai: "ไกลไหมครับ/คะ?", khmerPhonetic: "ឆ្ងាយទេ?", khmerMeaning: "Is it far?", englishMeaning: "Is it far?" },
                    { thai: "ใกล้ครับ/ค่ะ", khmerPhonetic: "ជិត", khmerMeaning: "Near", englishMeaning: "Near" }
                ],
                advanced: [
                    { thai: "ผม/ฉันปวดหัวครับ/ค่ะ", khmerPhonetic: "ខ្ញុំឈឺក្បាល", khmerMeaning: "I have a headache", englishMeaning: "I have a headache" },
                    { thai: "ช่วยโทรศัพท์หาหมอให้หน่อยครับ/ค่ะ", khmerPhonetic: "សូមជួយទូរស័ព្ទហៅពេទ្យឲ្យខ្ញុំផង", khmerMeaning: "Please call a doctor for me", englishMeaning: "Please call a doctor for me" },
                    { thai: "โรงพยาบาลอยู่ที่ไหนครับ/คะ?", khmerPhonetic: "មន្ទីរពេទ្យនៅឯណា?", khmerMeaning: "Where is the hospital?", englishMeaning: "Where is the hospital?" },
                    { thai: "ตำรวจอยู่ที่ไหนครับ/คะ?", khmerPhonetic: "ប៉ូលិសនៅឯណា?", khmerMeaning: "Where is the police station?", englishMeaning: "Where is the police station?" },
                    { thai: "อันตรายครับ/ค่ะ!", khmerPhonetic: "គ្រោះថ្នាក់!", khmerMeaning: "Danger!", englishMeaning: "Danger!" },
                    { thai: "มีปัญหาครับ/ค่ะ", khmerPhonetic: "មានបញ្ហា", khmerMeaning: "There's a problem", englishMeaning: "There's a problem" },
                    { thai: "ฉุกเฉินครับ/ค่ะ!", khmerPhonetic: "បន្ទាន់!", khmerMeaning: "Emergency!", englishMeaning: "Emergency!" },
                    { thai: "ไฟไหม้!", khmerPhonetic: "ភ្លើងឆេះ!", khmerMeaning: "Fire!", englishMeaning: "Fire!" },
                    { thai: "คุณเข้าใจไหมครับ/คะ?", khmerPhonetic: "អ្នកយល់ទេ?", khmerMeaning: "Do you understand?", englishMeaning: "Do you understand?" },
                    { thai: "ผม/ฉันรักคุณครับ/ค่ะ", khmerPhonetic: "ខ្ញុំស្រឡាញ់អ្នក", khmerMeaning: "I love you", englishMeaning: "I love you" },
                    { thai: "โชคดีครับ/ค่ะ!", khmerPhonetic: "សំណាងល្អ!", khmerMeaning: "Good luck!", englishMeaning: "Good luck!" },
                    { thai: "ดูแลตัวเองด้วยครับ/ค่ะ", khmerPhonetic: "ថែរក្សាខ្លួនផង", khmerMeaning: "Take care of yourself", englishMeaning: "Take care of yourself" },
                    { thai: "มีความสุขมากๆ ครับ/ค่ะ!", khmerPhonetic: "សូមមានសេចក្តីសុខច្រើនៗ!", khmerMeaning: "Be very happy!", englishMeaning: "Be very happy!" },
                    { thai: "คุณช่วยผม/ฉันได้ไหมครับ/คะ?", khmerPhonetic: "អ្នកជួយខ្ញុំបានទេ?", khmerMeaning: "Can you help me?", englishMeaning: "Can you help me?" },
                    { thai: "ผม/ฉันอยากไปเที่ยวครับ/ค่ะ", khmerPhonetic: "ខ្ញុំចង់ទៅលេង", khmerMeaning: "I want to travel", englishMeaning: "I want to travel" },
                    { thai: "อากาศเป็นอย่างไรบ้างครับ/คะ?", khmerPhonetic: "អាកាសធាតុយ៉ាងម៉េចដែរ?", khmerMeaning: "How is the weather?", englishMeaning: "How is the weather?" },
                    { thai: "ฝนตกครับ/ค่ะ", khmerPhonetic: "ភ្លៀងធ្លាក់", khmerMeaning: "It's raining", englishMeaning: "It's raining" },
                    { thai: "แดดออกครับ/ค่ะ", khmerPhonetic: "ថ្ងៃរះ", khmerMeaning: "It's sunny", englishMeaning: "It's sunny" },
                    { thai: "ลมแรงครับ/ค่ะ", khmerPhonetic: "ខ្យល់ខ្លាំង", khmerMeaning: "It's windy", englishMeaning: "It's windy" },
                    { thai: "ผม/ฉันขอตัวก่อนครับ/ค่ะ", khmerPhonetic: "ខ្ញុំសូមលាហើយ", khmerMeaning: "I'll take my leave now", englishMeaning: "I'll take my leave now" }
                ]
            };

            // Data for Thai Alphabet
            const thaiConsonants = [
                { thaiChar: "ก", phoneticTranscription: "ក", khmerMeaning: "កៃ (មាន់)", englishMeaning: "Gai (Chicken)", consonantClass: "mid" },
                { thaiChar: "ข", phoneticTranscription: "ខ", khmerMeaning: "ខៃ (ស៊ុត)", englishMeaning: "Khai (Egg)", consonantClass: "high" },
                { thaiChar: "ฃ", phoneticTranscription: "ឃ", khmerMeaning: "ឃួត (ដប)", englishMeaning: "Khuat (Bottle)", consonantClass: "high" }, // Obsolete
                { thaiChar: "ค", phoneticTranscription: "គ", khmerMeaning: "គ្វាយ (ក្របី)", englishMeaning: "Kwai (Buffalo)", consonantClass: "low" },
                { thaiChar: "ฅ", phoneticTranscription: "ឃ", khmerMeaning: "ឃន (មនុស្ស)", englishMeaning: "Kon (Person)", consonantClass: "low" }, // Obsolete
                { thaiChar: "ฆ", phoneticTranscription: "ឃ", khmerMeaning: "ระฆัง (កណ្ដឹង)", englishMeaning: "Ra-kang (Bell)", consonantClass: "low" },
                { thaiChar: "ง", phoneticTranscription: "ង", khmerMeaning: "ងូ (ពស់)", englishMeaning: "Ngoo (Snake)", consonantClass: "low" },
                { thaiChar: "จ", phoneticTranscription: "ច", khmerMeaning: "ចាន (ចាន)", englishMeaning: "Jaan (Plate)", consonantClass: "mid" },
                { thaiChar: "ฉ", phoneticTranscription: "ឆ", khmerMeaning: "ฉิ่ง (ឆៃយ៉ាំ)", englishMeaning: "Ching (Cymbals)", consonantClass: "high" },
                { thaiChar: "ช", phoneticTranscription: "ឈ", khmerMeaning: "ช้าง (ដំរី)", englishMeaning: "Chang (Elephant)", consonantClass: "low" },
                { thaiChar: "ซ", phoneticTranscription: "ស", khmerMeaning: "โซ่ (ច្រវាក់)", englishMeaning: "So (Chain)", consonantClass: "low" },
                { thaiChar: "ฌ", phoneticTranscription: "ឈ", khmerMeaning: "เฌอ (ដើមឈើ)", englishMeaning: "Cher (Tree)", consonantClass: "low" },
                { thaiChar: "ญ", phoneticTranscription: "ញ", khmerMeaning: "หญิง (ស្រី)", englishMeaning: "Ying (Woman)", consonantClass: "low" },
                { thaiChar: "ฎ", phoneticTranscription: "ដ", khmerMeaning: "ชฎา (មកុដ)", englishMeaning: "Cha-da (Headdress)", consonantClass: "mid" },
                { thaiChar: "ฏ", phoneticTranscription: "ត", khmerMeaning: "ปฏัก (លំពែង)", englishMeaning: "Pa-tak (Goad)", consonantClass: "mid" },
                { thaiChar: "ฐ", phoneticTranscription: "ឋ", khmerMeaning: "ฐาน (មូលដ្ឋាន)", englishMeaning: "Than (Base)", consonantClass: "high" },
                { thaiChar: "ฑ", phoneticTranscription: "ឍ", khmerMeaning: "มณโฑ (មណ្ឋោ)", englishMeaning: "Mon-tho (Character name)", consonantClass: "low" },
                { thaiChar: "ฒ", phoneticTranscription: "ធ", khmerMeaning: "ผู้เฒ่า (មនុស្សចាស់)", englishMeaning: "Poo-tao (Elderly person)", consonantClass: "low" },
                { thaiChar: "ณ", phoneticTranscription: "ណ", khmerMeaning: "เณร (សាមណេរ)", englishMeaning: "Nen (Novice monk)", consonantClass: "low" },
                { thaiChar: "ด", phoneticTranscription: "ដ", khmerMeaning: "เด็ก (ក្មេង)", englishMeaning: "Dek (Child)", consonantClass: "mid" },
                { thaiChar: "ต", phoneticTranscription: "ត", khmerMeaning: "เต่า (អណ្តើក)", englishMeaning: "Tao (Turtle)", consonantClass: "mid" },
                { thaiChar: "ถ", phoneticTranscription: "ថ", khmerMeaning: "ถุง (កាបូប)", englishMeaning: "Thung (Bag)", consonantClass: "high" },
                { thaiChar: "ท", phoneticTranscription: "ធ", khmerMeaning: "ทหาร (ទាហាន)", englishMeaning: "Ta-harn (Soldier)", consonantClass: "low" },
                { thaiChar: "ธ", phoneticTranscription: "ធ", khmerMeaning: "ธง (ទង់ជាតិ)", englishMeaning: "Thong (Flag)", consonantClass: "low" },
                { thaiChar: "น", phoneticTranscription: "ន", khmerMeaning: "หนู (កណ្ដុរ)", englishMeaning: "Noo (Mouse)", consonantClass: "low" },
                { thaiChar: "บ", phoneticTranscription: "ប", khmerMeaning: "ใบไม้ (ស្លឹកឈើ)", englishMeaning: "Bai-mai (Leaf)", consonantClass: "mid" },
                { thaiChar: "ป", phoneticTranscription: "ប៉", khmerMeaning: "ปลา (ត្រី)", englishMeaning: "Pla (Fish)", consonantClass: "mid" },
                { thaiChar: "ผ", phoneticTranscription: "ផ", khmerMeaning: "ผึ้ง (ឃ្មុំ)", englishMeaning: "Peung (Bee)", consonantClass: "high" },
                { thaiChar: "ฝ", phoneticTranscription: "ហ្វ", khmerMeaning: "ฝา (គម្រប)", englishMeaning: "Fa (Lid)", consonantClass: "high" },
                { thaiChar: "พ", phoneticTranscription: "ភ", khmerMeaning: "พาน (ថាស)", englishMeaning: "Paan (Pedestal tray)", consonantClass: "low" },
                { thaiChar: "ฟ", phoneticTranscription: "ហ្វ", khmerMeaning: "ฟัน (ធ្មេញ)", englishMeaning: "Fan (Tooth)", consonantClass: "low" },
                { thaiChar: "ภ", phoneticTranscription: "ភ", khmerMeaning: "สำเภา (ទូកក្ដោង)", englishMeaning: "Sam-pao (Junk)", consonantClass: "low" },
                { thaiChar: "ม", phoneticTranscription: "ម", khmerMeaning: "ม้า (សេះ)", englishMeaning: "Ma (Horse)", consonantClass: "low" },
                { thaiChar: "ย", phoneticTranscription: "យ", khmerMeaning: "ยักษ์ (យក្ស)", englishMeaning: "Yak (Giant)", consonantClass: "low" },
                { thaiChar: "ร", phoneticTranscription: "រ", khmerMeaning: "เรือ (ទូក)", englishMeaning: "Reua (Boat)", consonantClass: "low" },
                { thaiChar: "ล", phoneticTranscription: "ល", khmerMeaning: "ลิง (ស្វា)", englishMeaning: "Ling (Monkey)", consonantClass: "low" },
                { thaiChar: "ว", phoneticTranscription: "វ", khmerMeaning: "แหวน (ចិញ្ចៀន)", englishMeaning: "Waen (Ring)", consonantClass: "low" },
                { thaiChar: "ศ", phoneticTranscription: "ស", khmerMeaning: "ศาลา (សាលា)", englishMeaning: "Sala (Pavilion)", consonantClass: "high" },
                { thaiChar: "ษ", phoneticTranscription: "ស", khmerMeaning: "ฤๅษี (ឥសី)", englishMeaning: "Rue-see (Hermit)", consonantClass: "high" },
                { thaiChar: "ส", phoneticTranscription: "ស", khmerMeaning: "เสือ (ខ្លា)", englishMeaning: "Seua (Tiger)", consonantClass: "high" },
                { thaiChar: "ห", phoneticTranscription: "ហ", khmerMeaning: "หีบ (ទ្រុង)", englishMeaning: "Heep (Chest)", consonantClass: "high" },
                { thaiChar: "ฬ", phoneticTranscription: "ឡ", khmerMeaning: "จุฬา (ខ្លែង)", englishMeaning: "Ju-la (Kite)", consonantClass: "low" },
                { thaiChar: "อ", phoneticTranscription: "អ", khmerMeaning: "อ่าง (អាង)", englishMeaning: "Ang (Basin)", consonantClass: "mid" },
                { thaiChar: "ฮ", phoneticTranscription: "ហ", khmerMeaning: "นกฮูก (សត្វទីទុយ)", englishMeaning: "Nok Hook (Owl)", consonantClass: "low" }
            ];

            const thaiVowels = [
                { thaiChar: "ะ", phoneticTranscription: "អៈ", khmerMeaning: "ស្រៈអៈ (ខ្លី)", englishMeaning: "a (short)", vowelType: "short" },
                { thaiChar: "า", phoneticTranscription: "អា", khmerMeaning: "ស្រៈអា (វែង)", englishMeaning: "aa (long)", vowelType: "long" },
                { thaiChar: "อิ", phoneticTranscription: "អិ", khmerMeaning: "ស្រៈអិ (ខ្លី)", englishMeaning: "i (short)", vowelType: "short" },
                { thaiChar: "อี", phoneticTranscription: "អ៊ី", khmerMeaning: "ស្រៈអ៊ី (វែង)", englishMeaning: "ee (long)", vowelType: "long" },
                { thaiChar: "อึ", phoneticTranscription: "អឹ", khmerMeaning: "ស្រៈអឹ (ខ្លី)", englishMeaning: "ue (short)", vowelType: "short" },
                { thaiChar: "อือ", phoneticTranscription: "អឺ", khmerMeaning: "ស្រៈអឺ (វែង)", englishMeaning: "eu (long)", vowelType: "long" },
                { thaiChar: "อุ", phoneticTranscription: "អុ", khmerMeaning: "ស្រៈអុ (ខ្លី)", englishMeaning: "u (short)", vowelType: "short" },
                { thaiChar: "อู", phoneticTranscription: "អ៊ូ", khmerMeaning: "ស្រៈអ៊ូ (វែង)", englishMeaning: "oo (long)", vowelType: "long" },
                { thaiChar: "เอะ", phoneticTranscription: "អេៈ", khmerMeaning: "ស្រៈអេៈ (ខ្លី)", englishMeaning: "e (short)", vowelType: "short" },
                { thaiChar: "เอ", phoneticTranscription: "អេ", khmerMeaning: "ស្រៈអេ (វែង)", englishMeaning: "ae (long)", vowelType: "long" },
                { thaiChar: "แอะ", phoneticTranscription: "អែៈ", khmerMeaning: "ស្រៈអែៈ (ខ្លី)", englishMeaning: "ae (short)", vowelType: "short" },
                { thaiChar: "แอ", phoneticTranscription: "អែ", khmerMeaning: "ស្រៈអែ (វែង)", englishMeaning: "aae (long)", vowelType: "long" },
                { thaiChar: "โอะ", phoneticTranscription: "អូៈ", khmerMeaning: "ស្រៈអូៈ (ខ្លី)", englishMeaning: "o (short)", vowelType: "short" },
                { thaiChar: "โอ", phoneticTranscription: "អូ", khmerMeaning: "ស្រៈអូ (វែង)", englishMeaning: "oh (long)", vowelType: "long" },
                { thaiChar: "เอาะ", phoneticTranscription: "អោះ", khmerMeaning: "ស្រៈអោះ (ខ្លី)", englishMeaning: "aw (short)", vowelType: "short" },
                { thaiChar: "ออ", phoneticTranscription: "អ", khmerMeaning: "ស្រៈអ (វែង)", englishMeaning: "or (long)", vowelType: "long" },
                { thaiChar: "เออะ", phoneticTranscription: "អឺៈ", khmerMeaning: "ស្រៈអឺៈ (ខ្លី)", englishMeaning: "er (short)", vowelType: "short" },
                { thaiChar: "เออ", phoneticTranscription: "អឺ", khmerMeaning: "ស្រៈអឺ (វែង)", englishMeaning: "eu (long)", vowelType: "long" },
                { thaiChar: "เอียะ", phoneticTranscription: "អៀៈ", khmerMeaning: "ស្រៈអៀៈ (ខ្លី)", englishMeaning: "ia (short)", vowelType: "diphthong" },
                { thaiChar: "เอีย", phoneticTranscription: "អៀ", khmerMeaning: "ស្រៈអៀ (វែង)", englishMeaning: "ia (long)", vowelType: "diphthong" },
                { thaiChar: "เอือะ", phoneticTranscription: "អឿៈ", khmerMeaning: "ស្រៈអឿៈ (ខ្លី)", englishMeaning: "uea (short)", vowelType: "diphthong" },
                { thaiChar: "เอือ", phoneticTranscription: "អឿ", khmerMeaning: "ស្រៈអឿ (វែង)", englishMeaning: "uea (long)", vowelType: "diphthong" },
                { thaiChar: "อัวะ", phoneticTranscription: "អួៈ", khmerMeaning: "ស្រៈអួៈ (ខ្លី)", englishMeaning: "ua (short)", vowelType: "diphthong" },
                { thaiChar: "อัว", phoneticTranscription: "អួ", khmerMeaning: "ស្រៈអួ (វែង)", englishMeaning: "ua (long)", vowelType: "diphthong" },
                { thaiChar: "ใอ", phoneticTranscription: "អៃ", khmerMeaning: "ស្រៈអៃ (ខ្លី)", englishMeaning: "ai (short)", vowelType: "diphthong" },
                { thaiChar: "ไอ", phoneticTranscription: "អាយ", khmerMeaning: "ស្រៈអាយ (វែង)", englishMeaning: "ai (long)", vowelType: "diphthong" },
                { thaiChar: "เอา", phoneticTranscription: "អៅ", khmerMeaning: "ស្រៈអៅ", englishMeaning: "ao", vowelType: "diphthong" },
                { thaiChar: "อำ", phoneticTranscription: "អាំ", khmerMeaning: "ស្រៈអាំ", englishMeaning: "am", vowelType: "diphthong" }
            ];

            // Data for Exam
            const examQuestions = [
                {
                    question: {
                        thai: "สวัสดีครับ",
                        khmerPhonetic: "ជំរាបសួរ",
                        khmerMeaning: "Hello (male speaker)",
                        englishMeaning: "Hello (male speaker)"
                    },
                    options: [
                        { text: "Good morning", isCorrect: false },
                        { text: "Hello", isCorrect: true },
                        { text: "Thank you", isCorrect: false },
                        { text: "Goodbye", isCorrect: false }
                    ],
                    correctAnswerIndex: 1,
                    explanation: {
                        km: "สวัสดีครับ (sa-wat-dee krap) គឺជាពាក្យស្វាគមន៍ជាផ្លូវការសម្រាប់បុរស។",
                        en: "สวัสดีครับ (sa-wat-dee krap) is a formal greeting for male speakers.",
                        th: "สวัสดีครับ เป็นคำทักทายอย่างเป็นทางการสำหรับผู้ชาย"
                    }
                },
                {
                    question: {
                        thai: "ขอบคุณค่ะ",
                        khmerPhonetic: "អរគុណ",
                        khmerMeaning: "Thank you (female speaker)",
                        englishMeaning: "Thank you (female speaker)"
                    },
                    options: [
                        { text: "You're welcome", isCorrect: false },
                        { text: "Thank you", isCorrect: true },
                        { text: "I'm sorry", isCorrect: false },
                        { text: "Please", isCorrect: false }
                    ],
                    correctAnswerIndex: 1,
                    explanation: {
                        km: "ขอบคุณค่ะ (kob-koon ka) គឺជាពាក្យអរគុណជាផ្លូវការសម្រាប់ស្ត្រី។",
                        en: "ขอบคุณค่ะ (kob-koon ka) is a formal thank you for female speakers.",
                        th: "ขอบคุณค่ะ เป็นคำขอบคุณอย่างเป็นทางการสำหรับผู้หญิง"
                    }
                },
                {
                    question: {
                        thai: "เท่าไหร่?",
                        khmerPhonetic: "ប៉ុន្មាន?",
                        khmerMeaning: "How much?",
                        englishMeaning: "How much?"
                    },
                    options: [
                        { text: "Where?", isCorrect: false },
                        { text: "When?", isCorrect: false },
                        { text: "How much?", isCorrect: true },
                        { text: "What?", isCorrect: false }
                    ],
                    correctAnswerIndex: 2,
                    explanation: {
                        km: "เท่าไหร่ (tao-rai) មានន័យថា 'ប៉ុន្មាន' ប្រើសម្រាប់សួរតម្លៃ។",
                        en: "เท่าไหร่ (tao-rai) means 'how much' and is used to ask for prices.",
                        th: "เท่าไหร่ หมายถึง 'How much' ใช้ถามราคา"
                    }
                },
                {
                    question: {
                        thai: "ไปไหน?",
                        khmerPhonetic: "ទៅណា?",
                        khmerMeaning: "Where are you going?",
                        englishMeaning: "Where are you going?"
                    },
                    options: [
                        { text: "What is it?", isCorrect: false },
                        { text: "Where are you going?", isCorrect: true },
                        { text: "How are you?", isCorrect: false },
                        { text: "Who is it?", isCorrect: false }
                    ],
                    correctAnswerIndex: 1,
                    explanation: {
                        km: "ไปไหน (pai nai) មានន័យថា 'ទៅណា' ប្រើសម្រាប់សួរបំណងទៅកន្លែងណាមួយ។",
                        en: "ไปไหน (pai nai) means 'where are you going' and is used to ask about someone's destination.",
                        th: "ไปไหน หมายถึง 'Where are you going' ใช้ถามจุดหมายปลายทาง"
                    }
                },
                {
                    question: {
                        thai: "อร่อยมาก",
                        khmerPhonetic: "ឆ្ងាញ់ណាស់",
                        khmerMeaning: "Very delicious",
                        englishMeaning: "Very delicious"
                    },
                    options: [
                        { text: "It's hot", isCorrect: false },
                        { text: "It's cold", isCorrect: false },
                        { text: "Very delicious", isCorrect: true },
                        { text: "I'm hungry", isCorrect: false }
                    ],
                    correctAnswerIndex: 2,
                    explanation: {
                        km: "อร่อยมาก (a-roi mak) មានន័យថា 'ឆ្ងាញ់ណាស់' ប្រើសម្រាប់ពិពណ៌នាអាហារឆ្ងាញ់។",
                        en: "อร่อยมาก (a-roi mak) means 'very delicious' and is used to describe tasty food.",
                        th: "อร่อยมาก หมายถึง 'Very delicious' ใช้บรรยายรสชาติอาหาร"
                    }
                }
            ];

            // Data for Flashcards
            const flashcardsData = [
                { thai: "สวัสดี", khmerPhonetic: "ជំរាបសួរ", khmerMeaning: "Hello", englishMeaning: "Hello" },
                { thai: "ขอบคุณ", khmerPhonetic: "អរគុណ", khmerMeaning: "Thank you", englishMeaning: "Thank you" },
                { thai: "ขอโทษ", khmerPhonetic: "សូមទោស", khmerMeaning: "Sorry", englishMeaning: "Sorry" },
                { thai: "ไม่เป็นไร", khmerPhonetic: "មិនអីទេ", khmerMeaning: "No problem", englishMeaning: "No problem" },
                { thai: "ใช่", khmerPhonetic: "បាទ/ចាស", khmerMeaning: "Yes", englishMeaning: "Yes" },
                { thai: "ไม่ใช่", khmerPhonetic: "មិនមែនទេ", khmerMeaning: "No", englishMeaning: "No" },
                { thai: "อร่อย", khmerPhonetic: "ឆ្ងាញ់", khmerMeaning: "Delicious", englishMeaning: "Delicious" },
                { thai: "น้ำ", khmerPhonetic: "ទឹក", khmerMeaning: "Water", englishMeaning: "Water" },
                { thai: "ข้าว", khmerPhonetic: "បាយ", khmerMeaning: "Rice", englishMeaning: "Rice" },
                { thai: "ไป", khmerPhonetic: "ទៅ", khmerMeaning: "Go", englishMeaning: "Go" },
                { thai: "มา", khmerPhonetic: "មក", khmerMeaning: "Come", englishMeaning: "Come" },
                { thai: "กิน", khmerPhonetic: "ញ៉ាំ", khmerMeaning: "Eat", englishMeaning: "Eat" },
                { thai: "นอน", khmerPhonetic: "គេង", khmerMeaning: "Sleep", englishMeaning: "Sleep" },
                { thai: "นั่ง", khmerPhonetic: "អង្គុយ", khmerMeaning: "Sit", englishMeaning: "Sit" },
                { thai: "ยืน", khmerPhonetic: "ឈរ", khmerMeaning: "Stand", englishMeaning: "Stand" },
                { thai: "ร้อน", khmerPhonetic: "ក្តៅ", khmerMeaning: "Hot", englishMeaning: "Hot" },
                { thai: "หนาว", khmerPhonetic: "ត្រជាក់", khmerMeaning: "Cold", englishMeaning: "Cold" },
                { thai: "ใหญ่", khmerPhonetic: "ធំ", khmerMeaning: "Big", englishMeaning: "Big" },
                { thai: "เล็ก", khmerPhonetic: "តូច", khmerMeaning: "Small", englishMeaning: "Small" },
                { thai: "สวย", khmerPhonetic: "ស្អាត", khmerMeaning: "Beautiful", englishMeaning: "Beautiful" }
            ];


            let currentLanguage = 'km'; // Default language
            let currentFlashcardIndex = 0;
            let synth = window.speechSynthesis;

            // Function to update content based on selected language
            function updateContentLanguage(lang) {
                currentLanguage = lang;
                document.documentElement.lang = lang; // Update HTML lang attribute
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });

                // Special handling for static content that might contain dynamic parts or need re-rendering
                renderLessons('kindergarten');
                renderLessons('beginner');
                renderLessons('intermediate');
                renderLessons('advanced');
                renderAlphabet('consonants');
                renderAlphabet('vowels');
                renderExamQuestions();
                renderFlashcards();
            }

            // Function to show a specific section
            function showSection(sectionId) {
                document.querySelectorAll('.app-section').forEach(section => {
                    section.classList.add('hidden');
                });
                document.getElementById(sectionId + '-section').classList.remove('hidden');

                document.querySelectorAll('.nav-button').forEach(button => {
                    button.classList.remove('bg-blue-100', 'text-blue-700', 'font-semibold');
                    button.classList.add('text-gray-700');
                });
                document.querySelector(`.nav-button[data-section="${sectionId}"]`).classList.add('bg-blue-100', 'text-blue-700', 'font-semibold');
            }

            // Function to play audio for Thai text
            function playAudio(text, lang = 'th-TH') {
                if (synth.speaking) {
                    synth.cancel();
                }
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                synth.speak(utterance);
            }

            // Function to play audio for Khmer phonetic text (using a generic voice if Khmer is not available)
            function playKhmerPhoneticAudio(text) {
                if (synth.speaking) {
                    synth.cancel();
                }
                const utterance = new SpeechSynthesisUtterance(text);
                // Try to find a Khmer voice, otherwise use a general one
                const voices = synth.getVoices();
                const khmerVoice = voices.find(voice => voice.lang === 'km-KH'); // Check for specific Khmer voice
                if (khmerVoice) {
                    utterance.voice = khmerVoice;
                } else {
                    utterance.lang = 'en-US'; // Fallback to English for phonetic pronunciation
                }
                synth.speak(utterance);
            }

            // Function to render lessons for a given level
            function renderLessons(level) {
                const container = document.getElementById(`${level}-lessons-container`);
                if (!container) return;
                container.innerHTML = ''; // Clear previous lessons

                lessonsData[level].forEach((lesson, index) => {
                    const lessonDiv = document.createElement('div');
                    lessonDiv.className = 'bg-blue-50 p-4 rounded-lg shadow-sm flex flex-col sm:flex-row items-start sm:items-center justify-between';
                    lessonDiv.innerHTML = `
                        <div class="mb-4 sm:mb-0 sm:mr-4">
                            <p class="text-2xl font-bold text-blue-800">${lesson.thai}</p>
                            <p class="text-lg text-gray-700">${lesson.khmerPhonetic}</p>
                            <p class="text-lg text-gray-700">${lesson.khmerMeaning}</p>
                            <p class="text-md text-gray-500">${lesson.englishMeaning}</p>
                        </div>
                        <div class="flex items-center space-x-2 mt-auto">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="${lesson.thai}" title="${translations[currentLanguage].play_thai_audio}">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${lesson.khmerPhonetic}" title="${translations[currentLanguage].play_khmer_phonetic_audio}">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(lessonDiv);
                });

                // Add event listeners for audio buttons
                container.querySelectorAll('.play-audio-button').forEach(button => {
                    button.onclick = () => playAudio(button.dataset.thaiText, 'th-TH');
                });
                container.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                    button.onclick = () => playKhmerPhoneticAudio(button.dataset.khmerPhoneticText);
                });
            }

            // Function to render alphabet characters
            function renderAlphabet(type, sortBy = 'thaiChar') {
                const container = document.getElementById(`${type}-container`);
                if (!container) return;
                container.innerHTML = ''; // Clear previous characters

                let data = type === 'consonants' ? [...thaiConsonants] : [...thaiVowels];

                // Sort data
                data.sort((a, b) => {
                    if (sortBy === 'thaiChar') {
                        return a.thaiChar.localeCompare(b.thaiChar, 'th');
                    } else if (sortBy === 'phoneticTranscription') {
                        return a.phoneticTranscription.localeCompare(b.phoneticTranscription, 'km');
                    } else if (sortBy === 'khmerMeaning') {
                        return a.khmerMeaning.localeCompare(b.khmerMeaning, 'km');
                    } else if (sortBy === 'englishMeaning') {
                        return a.englishMeaning.localeCompare(b.englishMeaning, 'en');
                    }
                    return 0;
                });

                data.forEach(char => {
                    const charDiv = document.createElement('div');
                    charDiv.className = 'bg-white p-4 rounded-lg shadow flex flex-col items-center justify-center text-center';
                    charDiv.innerHTML = `
                        <p class="text-4xl font-bold text-blue-800 mb-2">${char.thaiChar}</p>
                        <p class="text-xl text-gray-700 mb-1">${char.phoneticTranscription}</p>
                        <p class="text-md text-gray-600 mb-1">${char.khmerMeaning}</p>
                        <p class="text-sm text-gray-500">${char.englishMeaning}</p>
                        ${char.consonantClass ? `<p class="text-xs text-gray-400 mt-1" data-translate="consonant_class">${translations[currentLanguage].consonant_class} <span data-translate="${char.consonantClass}_class">${translations[currentLanguage][char.consonantClass + '_class']}</span></p>` : ''}
                        ${char.vowelType ? `<p class="text-xs text-gray-400 mt-1" data-translate="vowel_type">${translations[currentLanguage].vowel_type} <span data-translate="${char.vowelType}_vowel">${translations[currentLanguage][char.vowelType + '_vowel']}</span></p>` : ''}
                        <div class="flex items-center space-x-2 mt-3">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-thai-text="${char.thaiChar}" title="${translations[currentLanguage].play_thai_audio}">
                                <i class="fas fa-volume-up text-lg"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${char.phoneticTranscription}" title="${translations[currentLanguage].play_khmer_phonetic_audio}">
                                <i class="fas fa-comment-dots text-lg"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(charDiv);
                });

                // Add event listeners for audio buttons
                container.querySelectorAll('.play-audio-button').forEach(button => {
                    button.onclick = () => playAudio(button.dataset.thaiText, 'th-TH');
                });
                container.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                    button.onclick = () => playKhmerPhoneticAudio(button.dataset.khmerPhoneticText);
                });
            }

            // Function to render exam questions
            function renderExamQuestions() {
                const container = document.getElementById('exam-questions-container');
                if (!container) return;
                container.innerHTML = ''; // Clear previous questions

                examQuestions.forEach((q, qIndex) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'bg-blue-50 p-5 rounded-lg shadow-sm mb-6';
                    questionDiv.innerHTML = `
                        <p class="text-lg font-semibold text-gray-800 mb-3" data-translate="question">${translations[currentLanguage].question} ${qIndex + 1}: <span class="text-blue-700">${q.question.thai}</span></p>
                        <p class="text-md text-gray-600 mb-4">${q.question.khmerMeaning} (${q.question.englishMeaning})</p>
                        <div class="options-container space-y-2">
                            ${q.options.map((option, oIndex) => `
                                <label class="block bg-white p-3 rounded-md shadow-sm hover:bg-gray-50 cursor-pointer">
                                    <input type="radio" name="question-${qIndex}" value="${oIndex}" class="mr-2 accent-blue-500">
                                    ${option.text}
                                </label>
                            `).join('')}
                        </div>
                        <button class="check-answer-button mt-4 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md shadow-md transition-colors duration-200" data-question-index="${qIndex}" data-translate="check_answer">${translations[currentLanguage].check_answer}</button>
                        <div class="feedback-area mt-3 text-sm font-medium"></div>
                        <div class="explanation-area mt-2 text-gray-600 text-sm hidden">
                            <strong data-translate="explanation">${translations[currentLanguage].explanation}</strong> ${q.explanation[currentLanguage]}
                        </div>
                    `;
                    container.appendChild(questionDiv);
                });

                // Add event listeners for check answer buttons
                container.querySelectorAll('.check-answer-button').forEach(button => {
                    button.onclick = (event) => {
                        const qIndex = parseInt(event.target.dataset.questionIndex);
                        const selectedOption = document.querySelector(`input[name="question-${qIndex}"]:checked`);
                        const feedbackArea = event.target.nextElementSibling;
                        const explanationArea = feedbackArea.nextElementSibling;

                        if (!selectedOption) {
                            feedbackArea.textContent = 'Please select an answer.';
                            feedbackArea.className = 'feedback-area mt-3 text-sm font-medium text-yellow-600';
                            explanationArea.classList.add('hidden');
                            return;
                        }

                        const selectedIndex = parseInt(selectedOption.value);
                        if (selectedIndex === examQuestions[qIndex].correctAnswerIndex) {
                            feedbackArea.textContent = translations[currentLanguage].correct;
                            feedbackArea.className = 'feedback-area mt-3 text-sm font-medium text-green-700';
                        } else {
                            feedbackArea.textContent = translations[currentLanguage].incorrect;
                            feedbackArea.className = 'feedback-area mt-3 text-sm font-medium text-red-700';
                        }
                        explanationArea.classList.remove('hidden');
                    };
                });
            }

            // Function to render flashcards
            function renderFlashcards() {
                const container = document.getElementById('flashcards-container');
                if (!container) return;
                container.innerHTML = ''; // Clear previous flashcards

                if (flashcardsData.length === 0) {
                    container.innerHTML = `<p class="text-gray-600" data-translate="no_flashcards">No flashcards available.</p>`;
                    return;
                }

                const flashcardDiv = document.createElement('div');
                flashcardDiv.className = 'flashcard w-full max-w-md mx-auto h-64';
                flashcardDiv.innerHTML = `
                    <div class="flashcard-inner">
                        <div class="flashcard-face flashcard-front flex-col p-4 text-center">
                            <p class="text-xl font-semibold text-blue-800" data-translate="thai_text">${translations[currentLanguage].thai_text}</p>
                            <p class="text-4xl font-bold text-blue-800 mt-2">${flashcardsData[currentFlashcardIndex].thai}</p>
                        </div>
                        <div class="flashcard-face flashcard-back flex-col p-4 text-center">
                            <p class="text-xl font-semibold text-gray-800" data-translate="khmer_phonetic">${translations[currentLanguage].khmer_phonetic}</p>
                            <p class="text-3xl text-gray-700 mt-2">${flashcardsData[currentFlashcardIndex].khmerPhonetic}</p>
                            <p class="text-xl font-semibold text-gray-800 mt-4" data-translate="khmer_meaning">${translations[currentLanguage].khmer_meaning}</p>
                            <p class="text-2xl text-gray-700 mt-2">${flashcardsData[currentFlashcardIndex].khmerMeaning}</p>
                            <p class="text-lg font-semibold text-gray-600 mt-4" data-translate="english_meaning">${translations[currentLanguage].english_meaning}</p>
                            <p class="text-xl text-gray-500 mt-2">${flashcardsData[currentFlashcardIndex].englishMeaning}</p>
                        </div>
                    </div>
                `;
                container.appendChild(flashcardDiv);

                const controlsDiv = document.createElement('div');
                controlsDiv.className = 'flex justify-center space-x-4 mt-6 w-full';
                controlsDiv.innerHTML = `
                    <button id="prev-card-button" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md shadow-md transition-colors duration-200" data-translate="prev_card">${translations[currentLanguage].prev_card}</button>
                    <button id="flip-card-button" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md shadow-md transition-colors duration-200" data-translate="flip_card">${translations[currentLanguage].flip_card}</button>
                    <button id="next-card-button" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md shadow-md transition-colors duration-200" data-translate="next_card">${translations[currentLanguage].next_card}</button>
                `;
                container.appendChild(controlsDiv);

                const flipCardButton = document.getElementById('flip-card-button');
                const prevCardButton = document.getElementById('prev-card-button');
                const nextCardButton = document.getElementById('next-card-button');
                const flashcardInner = flashcardDiv.querySelector('.flashcard-inner');

                flipCardButton.onclick = () => {
                    flashcardInner.classList.toggle('rotate-y-180');
                };

                prevCardButton.onclick = () => {
                    currentFlashcardIndex = (currentFlashcardIndex - 1 + flashcardsData.length) % flashcardsData.length;
                    renderFlashcards(); // Re-render to show new card
                };

                nextCardButton.onclick = () => {
                    currentFlashcardIndex = (currentFlashcardIndex + 1) % flashcardsData.length;
                    renderFlashcards(); // Re-render to show new card
                };
            }


            // Initial setup on DOMContentLoaded
            document.addEventListener('DOMContentLoaded', () => {
                showLoadingSpinner();

                // Set initial user ID
                const userId = 'Guest-' + crypto.randomUUID().substring(0, 8);
                document.getElementById('current-user-id').textContent = userId;

                // Set initial language and update content
                const savedLang = localStorage.getItem('appLanguage') || 'km';
                document.getElementById('language-selector').value = savedLang;
                updateContentLanguage(savedLang);

                // Event listener for language selector
                document.getElementById('language-selector').addEventListener('change', (event) => {
                    const selectedLang = event.target.value;
                    localStorage.setItem('appLanguage', selectedLang);
                    updateContentLanguage(selectedLang);
                });

                // Event listeners for navigation buttons
                document.querySelectorAll('.nav-button').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const sectionId = event.currentTarget.dataset.section;
                        showSection(sectionId);

                        // Dynamically load content for active sections
                        if (sectionId === 'kindergarten') {
                            renderLessons('kindergarten');
                        } else if (sectionId === 'beginner') {
                            renderLessons('beginner');
                        } else if (sectionId === 'intermediate') {
                            renderLessons('intermediate');
                        } else if (sectionId === 'advanced') {
                            renderLessons('advanced');
                        } else if (sectionId === 'alphabet') {
                            renderAlphabet('consonants', document.getElementById('consonant-sort-by').value);
                            renderAlphabet('vowels', document.getElementById('vowel-sort-by').value);
                        } else if (sectionId === 'exam') {
                            renderExamQuestions();
                        } else if (sectionId === 'flashcards') {
                            currentFlashcardIndex = 0; // Reset to first card
                            renderFlashcards();
                        }
                    });
                });

                // Event listeners for alphabet sorting
                document.getElementById('consonant-sort-by').addEventListener('change', (event) => {
                    renderAlphabet('consonants', event.target.value);
                });
                document.getElementById('vowel-sort-by').addEventListener('change', (event) => {
                    renderAlphabet('vowels', event.target.value);
                });

                // Initialize the home section as active
                showSection('home');
                hideLoadingSpinner();
            });
        }
    </script>
</body>
</html>
