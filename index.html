<!DOCTYPE html>
<html lang="km"> <!-- Set default language to Khmer -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>កម្មវិធីរៀនភាសាថៃ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Custom CSS for basic styling and overrides -->
    <style>
        /* Custom styles for flashcards */
        .flashcard {
            perspective: 1000px; /* Needed for 3D flip effect */
        }
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }
        .flashcard-inner.rotate-y-180 {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .flashcard-front {
            background-color: #eff6ff; /* blue-50 */
            color: #1e40af; /* blue-800 */
        }
        .flashcard-back {
            background-color: #dbeafe; /* blue-100 */
            color: #1f2937; /* gray-800 */
            transform: rotateY(180deg);
        }
        /* General button styling for better aesthetics */
        .nav-button, .play-audio-button, .play-khmer-phonetic-button, .exam-submit-button, .flashcard-nav-button, .ai-generate-button {
            transition: all 0.3s ease-in-out;
            border: none;
            cursor: pointer;
            outline: none;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .nav-button.active {
            background-color: #bfdbfe; /* blue-200 */
            color: #1e40af; /* blue-800 */
            font-weight: 600;
        }
        .play-audio-button:hover, .play-khmer-phonetic-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .exam-submit-button {
            background-color: #22c55e; /* green-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .exam-submit-button:hover {
            background-color: #16a34a; /* green-600 */
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
        .flashcard-nav-button {
            background-color: #6366f1; /* indigo-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .flashcard-nav-button:hover {
            background-color: #4f46e5; /* indigo-600 */
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
        .ai-generate-button {
            background-color: #f97316; /* orange-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .ai-generate-button:hover {
            background-color: #ea580c; /* orange-600 */
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="bg-gray-100 font-inter min-h-screen flex flex-col">
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="fixed inset-0 bg-gray-200 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
    </div>

    <header class="bg-blue-600 text-white p-4 shadow-md rounded-b-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold" data-translate="app_title">កម្មវិធីរៀនភាសាថៃ</h1>
            <div class="flex items-center space-x-4">
                <!-- User ID Display -->
                <span id="user-id-display" class="text-sm bg-blue-700 px-3 py-1 rounded-full">
                    <span data-translate="user_id_label">ID អ្នកប្រើប្រាស់:</span> <span id="current-user-id">Guest</span>
                </span>
                <!-- Language Selector -->
                <div class="relative">
                    <select id="language-selector" class="bg-blue-700 text-white px-3 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="km">ខ្មែរ</option>
                        <option value="en">English</option>
                        <option value="th">ไทย</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto mt-6 p-4 flex-grow">
        <!-- Navigation Tabs -->
        <nav class="bg-white p-2 rounded-lg shadow-md mb-6 flex flex-wrap justify-center sm:justify-start">
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="home">
                <i class="fas fa-home"></i>
                <span data-translate="home_nav">ទំព័រដើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="kindergarten">
                <i class="fas fa-child"></i>
                <span data-translate="kindergarten_nav">ថ្នាក់មតេយ្យ</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="beginner">
                <i class="fas fa-seedling"></i>
                <span data-translate="beginner_nav">កម្រិតចាប់ផ្តើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="intermediate">
                <i class="fas fa-book-open"></i>
                <span data-translate="intermediate_nav">កម្រិតកណ្តាល</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="advanced">
                <i class="fas fa-graduation-cap"></i>
                <span data-translate="advanced_nav">កម្រិតខ្ពស់</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="alphabet">
                <i class="fas fa-spell-check"></i>
                <span data-translate="alphabet_nav">អក្ខរក្រម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="ai-lesson">
                <i class="fas fa-robot"></i>
                <span data-translate="ai_lesson_nav">មេរៀន AI</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="exam">
                <i class="fas fa-question-circle"></i>
                <span data-translate="exam_nav">ប្រឡង</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="flashcards">
                <i class="fas fa-clone"></i>
                <span data-translate="flashcards_nav">Flashcards</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="progress">
                <i class="fas fa-chart-line"></i>
                <span data-translate="progress_nav">របាយការណ៍</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="bookmarks">
                <i class="fas fa-bookmark"></i>
                <span data-translate="bookmarks_nav">មេរៀនចូលចិត្ត</span>
            </button>
        </nav>

        <!-- Content Sections -->
        <div id="content-area" class="bg-white p-6 rounded-lg shadow-md min-h-[500px]">
            <!-- Home Section (Default View) -->
            <section id="home-section" class="app-section active">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="welcome_title">សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!</h2>
                <p class="text-gray-600 leading-relaxed mb-4" data-translate="welcome_text">កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-volume-up mr-2"></i><span data-translate="feature_audio_title">ស្តាប់សំឡេងជនជាតិដើម</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_audio_desc">ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-brain mr-2"></i><span data-translate="feature_exam_title">ប្រព័ន្ធប្រឡង</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_exam_desc">សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-address-card mr-2"></i><span data-translate="feature_flashcards_title">Flashcard ពាក្យសំខាន់ៗ</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_flashcards_desc">រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តរកម្ម។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-chart-bar mr-2"></i><span data-translate="feature_progress_title">តាមដានវឌ្ឍនភាព</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_progress_desc">មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-heart mr-2"></i><span data-translate="feature_bookmarks_title">Bookmark មេរៀនចូលចិត្ត</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_bookmarks_desc">រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-globe mr-2"></i><span data-translate="feature_language_title">ជម្រើសភាសា</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_language_desc">ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។</p>
                    </div>
                </div>
            </section>

            <!-- Kindergarten Section -->
            <section id="kindergarten-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="kindergarten_title">ថ្នាក់មតេយ្យ</h2>
                <p class="text-gray-600 mb-6" data-translate="kindergarten_intro">សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។</p>
                <div id="kindergarten-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Beginner Section -->
            <section id="beginner-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="beginner_title">កម្រិតចាប់ផ្តើម</h2>
                <p class="text-gray-600 mb-6" data-translate="beginner_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។</p>
                <div id="beginner-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Intermediate Section -->
            <section id="intermediate-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="intermediate_title">កម្រិតកណ្តាល</h2>
                <p class="text-gray-600 mb-6" data-translate="intermediate_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។</p>
                <div id="intermediate-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Advanced Section -->
            <section id="advanced-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="advanced_title">កម្រិតខ្ពស់</h2>
                <p class="text-gray-600 mb-6" data-translate="advanced_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។</p>
                <div id="advanced-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Alphabet Section (New) -->
            <section id="alphabet-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="alphabet_title">អក្ខរក្រមថៃ</h2>
                <p class="text-gray-600 mb-6" data-translate="alphabet_intro">ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។</p>

                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="consonants_title">ព្យញ្ជនៈ</h3>
                <div class="flex items-center space-x-2 mb-4">
                    <label for="consonant-sort-by" class="text-gray-700" data-translate="sort_by_label">តម្រៀបតាម:</label>
                    <select id="consonant-sort-by" class="bg-white border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="thaiChar" data-translate="sort_thai_char">អក្សរថៃ</option>
                        <option value="phoneticTranscription" data-translate="sort_phonetic">សូរស័ព្ទខ្មែរ</option>
                        <option value="khmerMeaning" data-translate="sort_khmer_meaning">អត្ថន័យខ្មែរ</option>
                        <option value="englishMeaning" data-translate="sort_english_meaning">អត្ថន័យអង់គ្លេស</option>
                    </select>
                </div>
                <div id="consonants-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8">
                    <!-- Consonants will be dynamically loaded here -->
                </div>

                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="vowels_title">ស្រៈ</h3>
                <div class="flex items-center space-x-2 mb-4">
                    <label for="vowel-sort-by" class="text-gray-700" data-translate="sort_by_label">តម្រៀបតាម:</label>
                    <select id="vowel-sort-by" class="bg-white border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="thaiChar" data-translate="sort_thai_char">អក្សរថៃ</option>
                        <option value="phoneticTranscription" data-translate="sort_phonetic">សូរស័ព្ទខ្មែរ</option>
                        <option value="khmerMeaning" data-translate="sort_khmer_meaning">អត្ថន័យខ្មែរ</option>
                        <option value="englishMeaning" data-translate="sort_english_meaning">អត្ថន័យអង់គ្លេស</option>
                    </select>
                </div>
                <div id="vowels-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Vowels will be dynamically loaded here -->
                </div>
            </section>

            <!-- AI Generated Lesson Section (New) -->
            <section id="ai-lesson-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="ai_lesson_title">មេរៀនដែលបង្កើតដោយ AI</h2>
                <p class="text-gray-600 mb-6" data-translate="ai_lesson_intro">បញ្ចូលប្រធានបទ ឬប្រភេទដែលអ្នកចង់រៀន ហើយ AI នឹងបង្កើតពាក្យ ឬប្រយោគជាភាសាថៃសម្រាប់អ្នក។</p>

                <div class="flex flex-col sm:flex-row items-stretch sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6">
                    <input type="text" id="ai-prompt-input" class="flex-grow p-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="ឧទាហរណ៍: ពាក្យអំពីអាហារ 5, ប្រយោគអំពីការធ្វើដំណើរ 3">
                    <button id="ai-generate-button" class="ai-generate-button flex-shrink-0">
                        <i class="fas fa-magic mr-2"></i>
                        <span data-translate="generate_button">បង្កើត</span>
                    </button>
                </div>

                <div id="ai-lesson-output" class="space-y-6">
                    <!-- AI generated lessons will be displayed here -->
                </div>
            </section>

            <!-- Custom Lesson Section (Now displays static content) -->
            <section id="custom-lesson-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="custom_lesson_title">មេរៀនតាមតម្រូវការ</h2>
                <p class="text-gray-600 mb-6" data-translate="custom_lesson_intro_static">នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។</p>

                <div id="custom-lesson-output" class="space-y-6">
                    <!-- Hardcoded custom lesson example -->
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ฉันอยากสั่งอาหารไทย</p>
                            <p class="text-lg text-gray-700">ឆាន់ យ៉ាក សាំង អាហារ ថៃ</p>
                            <p class="text-lg text-gray-700">ខ្ញុំចង់បញ្ជាម្ហូបថៃ</p>
                            <p class="text-md text-gray-500">I want to order Thai food.</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ฉันอยากสั่งอาหารไทย">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឆាន់ យ៉ាក សាំង អាហារ ថៃ">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">มีอะไรแนะนำไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មានអ្វីណែនាំទេ?</p>
                            <p class="text-md text-gray-500">Do you have any recommendations?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="มีอะไรแนะนำไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ลดราคาได้ไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">បញ្ចុះតម្លៃបានទេ?</p>
                            <p class="text-md text-gray-500">Can I get a discount?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ลดราคาได้ไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">อันนี้เท่าไหร่ครับ/คะ?</p>
                            <p class="text-lg text-gray-700">អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មួយនេះប៉ុន្មាន?</p>
                            <p class="text-md text-gray-500">How much is this one?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="อันนี้เท่าไหร่ครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Exam Section -->
            <section id="exam-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="exam_title">ប្រឡង</h2>
                <p class="text-gray-600 mb-6" data-translate="exam_intro_static">សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។</p>
                <div id="exam-questions-container" class="space-y-6">
                    <!-- Exam questions will be dynamically loaded here -->
                </div>
                <button id="exam-submit-button" class="exam-submit-button mt-6 hidden" data-translate="submit_exam">ដាក់ស្នើការប្រឡង</button>
                <div id="exam-result" class="mt-4 p-4 rounded-lg text-lg font-semibold hidden"></div>
            </section>

            <!-- Flashcards Section -->
            <section id="flashcards-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="flashcards_title">Flashcards</h2>
                <p class="text-gray-600 mb-6" data-translate="flashcards_intro_static">រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។</p>
                <div id="flashcards-container" class="flex flex-col items-center justify-center min-h-[300px]">
                    <div id="current-flashcard-wrapper" class="w-full max-w-sm h-64 flashcard cursor-pointer mb-6">
                        <!-- Flashcard will be dynamically loaded here -->
                    </div>
                    <div class="flex space-x-4">
                        <button id="prev-flashcard-button" class="flashcard-nav-button" data-translate="previous_card">មុន</button>
                        <button id="next-flashcard-button" class="flashcard-nav-button" data-translate="next_card">បន្ទាប់</button>
                    </div>
                </div>
            </section>

            <!-- Progress Section (Now displays static report) -->
            <section id="progress-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="progress_title">របាយការណ៍កម្រិតចំណេះដឹង</h2>
                <p class="text-gray-600 mb-6" data-translate="progress_intro_static">នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។</p>
                <div id="progress-report-container" class="bg-blue-50 p-4 rounded-lg shadow-sm text-gray-700 leading-relaxed">
                    <p data-translate="progress_content_static">
                        សូមអបអរសាទរចំពោះវឌ្ឍនភាពដ៏អស្ចារ្យរបស់អ្នកក្នុងការរៀនភាសាថៃ! អ្នកបានបង្ហាញពីភាពជាប់លាប់ដ៏គួរឱ្យកត់សម្គាល់ក្នុងការអនុវត្តប្រចាំថ្ងៃរបស់អ្នក។
                        វាក្យសព្ទរបស់អ្នកបានរីកចម្រើនយ៉ាងឆាប់រហ័ស ហើយអ្នកកំពុងចាប់ផ្តើមយល់ពីឃ្លាស្មុគស្មាញកាន់តែច្រើន។
                        ការបញ្ចេញសំឡេងរបស់អ្នកបានប្រសើរឡើងគួរឱ្យកត់សម្គាល់ ជាពិសេសនៅក្នុងព្យាង្គដែលមានសម្លេង។
                        អ្នកបានបញ្ចប់មេរៀនកម្រិតមតេយ្យ និងកម្រិតចាប់ផ្តើមទាំងអស់ដោយជោគជ័យ ហើយបានឆ្លើយសំណួរប្រឡងជាច្រើនបានត្រឹមត្រូវ។
                        ដើម្បីបន្តការរីកចម្រើនរបស់អ្នក សូមពិចារណាផ្តោតលើការកែលម្អការនិយាយឱ្យស្ទាត់ជំនាញដោយការអនុវត្តជាមួយអ្នកនិយាយដើម
                        និងការយល់ដឹងអំពីវេយ្យាករណ៍ស្មុគស្មាញបន្ថែមទៀត ដូចជាការប្រើប្រាស់ភាគល្អិត និងរចនាសម្ព័ន្ធប្រយោគ។
                        ការអានរឿងខ្លីៗ ឬអត្ថបទព័ត៌មានជាភាសាថៃក៏អាចជួយពង្រឹងជំនាញរបស់អ្នកផងដែរ។
                        បន្តការខិតខំប្រឹងប្រែងរបស់អ្នក! អ្នកกำลังทำได้ดีมาก!
                    </p>
                </div>
            </section>

            <!-- Bookmarks Section (Now displays static bookmarks) -->
            <section id="bookmarks-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="bookmarks_title">មេរៀនចូលចិត្ត</h2>
                <p class="text-gray-600 mb-6" data-translate="bookmarks_intro_static">គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។</p>
                <div id="bookmarks-list-container" class="space-y-3">
                    <!-- Hardcoded bookmarks -->
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ធ្វើដំណើរ</p>
                        <p class="text-md text-gray-700 ml-6">(Travel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการเดินทาง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> វាក្យសព្ទម្ហូបអាហារ</p>
                        <p class="text-md text-gray-700 ml-6">(Food Vocabulary)</p>
                        <p class="text-sm text-gray-500 ml-6">(คำศัพท์อาหาร)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់សណ្ឋាគារ</p>
                        <p class="text-md text-gray-700 ml-6">(Hotel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับโรงแรม)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ទិញទំនិញ</p>
                        <p class="text-md text-gray-700 ml-6">(Shopping Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการช้อปปิ้ง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> លេខ និងពណ៌</p>
                        <p class="text-md text-gray-700 ml-6">(Numbers and Colors)</p>
                        <p class="text-sm text-gray-500 ml-6">(ตัวเลขและสี)</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 text-center mt-6 rounded-t-lg">
        <p>&copy; 2025 <span data-translate="app_title_footer">កម្មវិធីរៀនភាសាថៃ</span>. <span data-translate="footer_text">រក្សាសិទ្ធិគ្រប់យ៉ាង។</span></p>
    </footer>

    <script>
        // Wrap the entire app logic in an IIFE and use a flag to ensure it runs only once
        // This helps prevent 'Identifier already declared' errors in environments that might re-execute scripts.
        if (typeof window.thaiLanguageAppInitialized === 'undefined') {
            window.thaiLanguageAppInitialized = true;

            // Show loading spinner
            function showLoadingSpinner() {
                document.getElementById('loading-spinner').classList.remove('hidden');
            }

            // Hide loading spinner
            function hideLoadingSpinner() {
                document.getElementById('loading-spinner').classList.add('hidden');
            }

            // Language translations
            const translations = {
                km: {
                    "app_title": "កម្មវិធីរៀនភាសាថៃ",
                    "app_title_footer": "កម្មវិធីរៀនភាសាថៃ",
                    "home_nav": "ទំព័រដើម",
                    "kindergarten_nav": "ថ្នាក់មតេយ្យ",
                    "beginner_nav": "កម្រិតចាប់ផ្តើម",
                    "intermediate_nav": "កម្រិតកណ្តាល",
                    "advanced_nav": "កម្រិតខ្ពស់",
                    "alphabet_nav": "អក្ខរក្រម",
                    "ai_lesson_nav": "មេរៀន AI",
                    "custom_lesson_nav": "មេរៀនតាមតម្រូវការ",
                    "exam_nav": "ប្រឡង",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "របាយការណ៍",
                    "bookmarks_nav": "មេរៀនចូលចិត្ត",
                    "welcome_title": "សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!",
                    "welcome_text": "កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។",
                    "feature_audio_title": "ស្តាប់សំឡេងជនជាតិដើម",
                    "feature_audio_desc": "ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។",
                    "feature_exam_title": "ប្រព័ន្ធប្រឡង",
                    "feature_exam_desc": "សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។",
                    "feature_flashcards_title": "Flashcard ពាក្យសំខាន់ៗ",
                    "feature_flashcards_desc": "រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តរកម្ម។",
                    "feature_progress_title": "តាមដានវឌ្ឍនភាព",
                    "feature_progress_desc": "មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។",
                    "feature_bookmarks_title": "Bookmark មេរៀនចូលចិត្ត",
                    "feature_bookmarks_desc": "រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។",
                    "feature_language_title": "ជម្រើសភាសា",
                    "feature_language_desc": "ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។",
                    "kindergarten_title": "ថ្នាក់មតេយ្យ",
                    "kindergarten_intro": "សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។",
                    "beginner_title": "កម្រិតចាប់ផ្តើម",
                    "beginner_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។",
                    "intermediate_title": "កម្រិតកណ្តាល",
                    "intermediate_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។",
                    "advanced_title": "កម្រិតខ្ពស់",
                    "advanced_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។",
                    "alphabet_title": "អក្ខរក្រមថៃ",
                    "alphabet_intro": "ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។",
                    "consonants_title": "ព្យញ្ជនៈ",
                    "vowels_title": "ស្រៈ",
                    "sort_by_label": "តម្រៀបតាម:",
                    "sort_thai_char": "អក្សរថៃ",
                    "sort_phonetic": "សូរស័ព្ទខ្មែរ",
                    "sort_khmer_meaning": "អត្ថន័យខ្មែរ",
                    "sort_english_meaning": "អត្ថន័យអង់គ្លេស",
                    "ai_lesson_title": "មេរៀនដែលបង្កើតដោយ AI",
                    "ai_lesson_intro": "បញ្ចូលប្រធានបទ ឬប្រភេទដែលអ្នកចង់រៀន ហើយ AI នឹងបង្កើតពាក្យ ឬប្រយោគជាភាសាថៃសម្រាប់អ្នក។",
                    "generate_button": "បង្កើត",
                    "custom_lesson_title": "មេរៀនតាមតម្រូវការ",
                    "custom_lesson_intro_static": "នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។",
                    "exam_title": "ប្រឡង",
                    "exam_intro_static": "សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។",
                    "submit_exam": "ដាក់ស្នើការប្រឡង",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។",
                    "previous_card": "មុន",
                    "next_card": "បន្ទាប់",
                    "progress_title": "របាយការណ៍កម្រិតចំណេះដឹង",
                    "progress_intro_static": "នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។",
                    "progress_content_static": "សូមអបអរសាទរចំពោះវឌ្ឍនភាពដ៏អស្ចារ្យរបស់អ្នកក្នុងការរៀនភាសាថៃ! អ្នកបានបង្ហាញពីភាពជាប់លាប់ដ៏គួរឱ្យកត់សម្គាល់ក្នុងការអនុវត្តប្រចាំថ្ងៃរបស់អ្នក។ វាក្យសព្ទរបស់អ្នកបានរីកចម្រើនយ៉ាងឆាប់រហ័ស ហើយអ្នកកំពុងចាប់ផ្តើមយល់ពីឃ្លាស្មុគស្មាញកាន់តែច្រើន។ ការបញ្ចេញសំឡេងរបស់អ្នកបានប្រសើរឡើងគួរឱ្យកត់សម្គាល់ ជាពិសេសនៅក្នុងព្យាង្គដែលមានសម្លេង។ អ្នកបានបញ្ចប់មេរៀនកម្រិតមតេយ្យ និងកម្រិតចាប់ផ្តើមទាំងអស់ដោយជោគជ័យ ហើយបានឆ្លើយសំណួរប្រឡងជាច្រើនបានត្រឹមត្រូវ។ ដើម្បីបន្តការរីកចម្រើនរបស់អ្នក សូមពិចារណាផ្តោតលើការកែលម្អការនិយាយឱ្យស្ទាត់ជំនាញដោយការអនុវត្តជាមួយអ្នកនិយាយដើម និងការយល់ដឹងអំពីវេយ្យាករណ៍ស្មុគស្មាញបន្ថែមទៀត ដូចជាការប្រើប្រាស់ភាគល្អិត និងរចនាសម្ព័ន្ធប្រយោគ។ ការអានរឿងខ្លីៗ ឬអត្ថបទព័ត៌មានជាភាសាថៃក៏អាចជួយពង្រឹងជំនាញរបស់អ្នកផងដែរ។ បន្តការខិតខំប្រឹងប្រែងរបស់អ្នក! អ្នកกำลังทำได้ดีมาก!",
                    "bookmarks_title": "មេរៀនចូលចិត្ត",
                    "bookmarks_intro_static": "គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។",
                    "user_id_label": "ID អ្នកប្រើប្រាស់:",
                    "footer_text": "រក្សាសិទ្ធិគ្រប់យ៉ាង។",
                    "correct_answers": "ចម្លើយត្រឹមត្រូវ:",
                    "total_questions": "សំណួរ​សរុប:",
                    "your_score": "ពិន្ទុរបស់អ្នក:",
                    "retry_exam": "ព្យាយាមម្តងទៀត",
                    "answer_correct": "ត្រឹមត្រូវ!",
                    "answer_incorrect": "ខុស!",
                    "the_correct_answer_was": "ចម្លើយត្រឹមត្រូវគឺ:",
                    "match_instructions": "អូសនិងទម្លាក់ពាក្យខ្មែរទៅផ្គូផ្គងនឹងពាក្យថៃ។",
                    "ai_generation_error": "មានបញ្ហាក្នុងការបង្កើតមេរៀន AI។ សូមព្យាយាមម្តងទៀតនៅពេលក្រោយ។",
                    "ai_invalid_response": "AI បានបង្កើតការឆ្លើយតបមិនត្រឹមត្រូវ។ សូមព្យាយាមម្តងទៀត។"
                },
                en: {
                    "app_title": "Thai Language Learning App",
                    "app_title_footer": "Thai Language Learning App",
                    "home_nav": "Home",
                    "kindergarten_nav": "Kindergarten",
                    "beginner_nav": "Beginner",
                    "intermediate_nav": "Intermediate",
                    "advanced_nav": "Advanced",
                    "alphabet_nav": "Alphabet",
                    "ai_lesson_nav": "AI Lesson",
                    "custom_lesson_nav": "Custom Lesson",
                    "exam_nav": "Exam",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "Progress Report",
                    "bookmarks_nav": "Bookmarks",
                    "welcome_title": "Welcome to the Thai Language Learning App!",
                    "welcome_text": "This app will help you learn Thai through interactive lessons, quizzes, flashcards, and progress tracking.",
                    "feature_audio_title": "Native Audio Playback",
                    "feature_audio_desc": "Listen to words and phrases pronounced by native Thai speakers to improve your pronunciation.",
                    "feature_exam_title": "Exam System",
                    "feature_exam_desc": "Test your knowledge with multiple-choice questions and matching exercises.",
                    "feature_flashcards_title": "Essential Flashcards",
                    "feature_flashcards_desc": "Easily learn new vocabulary using interactive flashcards.",
                    "feature_progress_title": "Track Progress",
                    "feature_progress_desc": "See how you're progressing with detailed knowledge level reports.",
                    "feature_bookmarks_title": "Bookmark Favorite Lessons",
                    "feature_bookmarks_desc": "Save lessons and words you want to revisit.",
                    "feature_language_title": "Language Options",
                    "feature_language_desc": "Switch interface language between Khmer, English, and Thai.",
                    "kindergarten_title": "Kindergarten Level",
                    "kindergarten_intro": "Welcome to the Kindergarten lessons! Let's learn the simplest words and phrases.",
                    "beginner_title": "Beginner Level",
                    "beginner_intro": "Welcome to the Beginner lessons! Let's learn some basic Thai phrases.",
                    "intermediate_title": "Intermediate Level",
                    "intermediate_intro": "Welcome to the Intermediate lessons! Here you will learn slightly more complex phrases.",
                    "advanced_title": "Advanced Level",
                    "advanced_intro": "Welcome to the Advanced lessons! Here you will learn complex phrases and idiomatic expressions.",
                    "alphabet_title": "Thai Alphabet",
                    "alphabet_intro": "Let's learn Thai consonants and vowels.",
                    "consonants_title": "Consonants",
                    "vowels_title": "Vowels",
                    "sort_by_label": "Sort by:",
                    "sort_thai_char": "Thai Character",
                    "sort_phonetic": "Khmer Phonetic",
                    "sort_khmer_meaning": "Khmer Meaning",
                    "sort_english_meaning": "English Meaning",
                    "ai_lesson_title": "AI Generated Lessons",
                    "ai_lesson_intro": "Enter the topic or type of words/sentences you want to learn, and AI will generate Thai words or sentences for you.",
                    "generate_button": "Generate",
                    "custom_lesson_title": "Custom Lesson",
                    "custom_lesson_intro_static": "This is a sample pre-generated lesson. You can edit it directly in the code.",
                    "exam_title": "Exam",
                    "exam_intro_static": "Test your Thai language knowledge with sample questions.",
                    "submit_exam": "Submit Exam",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "Easily learn new words and phrases using sample flashcards.",
                    "previous_card": "Previous",
                    "next_card": "Next",
                    "progress_title": "Knowledge Level Report",
                    "progress_intro_static": "This is a sample progress report.",
                    "progress_content_static": "Congratulations on your excellent progress in learning Thai! You have shown remarkable consistency in your daily practice. Your vocabulary has expanded rapidly, and you are starting to comprehend more complex phrases. Your pronunciation has significantly improved, especially in tonal syllables. You have successfully completed all Kindergarten and Beginner lessons and answered many exam questions correctly. To continue your growth, consider focusing on improving conversational fluency by practicing with native speakers and understanding more complex grammar, such as particle usage and sentence structures. Reading short stories or news articles in Thai can also help reinforce your skills. Keep up the great work! คุณกำลังทำได้ดีมาก!",
                    "bookmarks_title": "Favorite Lessons",
                    "bookmarks_intro_static": "Manage your favorite lessons and words here.",
                    "user_id_label": "User ID:",
                    "footer_text": "All rights reserved.",
                    "correct_answers": "Correct Answers:",
                    "total_questions": "Total Questions:",
                    "your_score": "Your Score:",
                    "retry_exam": "Retry Exam",
                    "answer_correct": "Correct!",
                    "answer_incorrect": "Incorrect!",
                    "the_correct_answer_was": "The correct answer was:",
                    "match_instructions": "Drag and drop the Khmer words to match the Thai words.",
                    "ai_generation_error": "There was an issue generating the AI lesson. Please try again later.",
                    "ai_invalid_response": "AI generated an invalid response. Please try again."
                },
                th: {
                    "app_title": "แอปเรียนภาษาไทย",
                    "app_title_footer": "แอปเรียนภาษาไทย",
                    "home_nav": "หน้าหลัก",
                    "kindergarten_nav": "ระดับอนุบาล",
                    "beginner_nav": "ระดับเริ่มต้น",
                    "intermediate_nav": "ระดับกลาง",
                    "advanced_nav": "ระดับสูง",
                    "alphabet_nav": "ตัวอักษร",
                    "ai_lesson_nav": "บทเรียน AI",
                    "custom_lesson_nav": "บทเรียนที่กำหนดเอง",
                    "exam_nav": "ข้อสอบ",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "รายงานความคืบหน้า",
                    "bookmarks_nav": "บทเรียนที่ชื่นชอบ",
                    "welcome_title": "ยินดีต้อนรับสู่แอปเรียนภาษาไทย!",
                    "welcome_text": "แอปนี้จะช่วยให้คุณเรียนภาษาไทยผ่านบทเรียนแบบโต้ตอบ แบบทดสอบ Flashcard และการติดตามความคืบหน้า",
                    "feature_audio_title": "การเล่นเสียงเจ้าของภาษา",
                    "feature_audio_desc": "ฟังคำและวลีที่ออกเสียงโดยเจ้าของภาษาไทยเพื่อปรับปรุงการออกเสียงของคุณ",
                    "feature_exam_title": "ระบบข้อสอบ",
                    "feature_exam_desc": "ทดสอบความรู้ของคุณด้วยคำถามปรนัยและแบบฝึกหัดจับคู่คำ",
                    "feature_flashcards_title": "Flashcards ที่จำเป็น",
                    "feature_flashcards_desc": "เรียนรู้คำศัพท์ใหม่ได้อย่างง่ายดายโดยใช้ Flashcard แบบโต้ตอบ",
                    "feature_progress_title": "ติดตามความคืบหน้า",
                    "feature_progress_desc": "ดูว่าคุณก้าวหน้าไปอย่างไรด้วยรายงานระดับความรู้โดยละเอียด",
                    "feature_bookmarks_title": "บุ๊กมาร์กบทเรียนที่ชื่นชอบ",
                    "feature_bookmarks_desc": "บันทึกบทเรียนและคำที่คุณต้องการทบทวน",
                    "feature_language_title": "ตัวเลือกภาษา",
                    "feature_language_desc": "สลับภาษาอินเทอร์เฟซระหว่างเขมร อังกฤษ และไทย",
                    "kindergarten_title": "ระดับอนุบาล",
                    "kindergarten_intro": "ยินดีต้อนรับสู่บทเรียนระดับอนุบาล! มาเรียนรู้คำและวลีที่ง่ายที่สุดกันเถอะ",
                    "beginner_title": "ระดับเริ่มต้น",
                    "beginner_intro": "ยินดีต้อนรับสู่บทเรียนระดับเริ่มต้น! มาเรียนรู้วลีภาษาไทยพื้นฐานกันเถอะ",
                    "intermediate_title": "ระดับกลาง",
                    "intermediate_intro": "ยินดีต้อนรับสู่บทเรียนระดับกลาง! ที่นี่คุณจะได้เรียนรู้วลีที่ซับซ้อนขึ้นเล็กน้อย",
                    "advanced_title": "ระดับสูง",
                    "advanced_intro": "ยินดีต้อนรับสู่บทเรียนระดับสูง! ที่นี่คุณจะได้เรียนรู้วลีที่ซับซ้อนและสำนวน",
                    "alphabet_title": "ตัวอักษรไทย",
                    "alphabet_intro": "มาเรียนรู้พยัญชนะและสระไทยกันเถอะ",
                    "consonants_title": "พยัญชนะ",
                    "vowels_title": "สระ",
                    "sort_by_label": "เรียงตาม:",
                    "sort_thai_char": "ตัวอักษรไทย",
                    "sort_phonetic": "การถอดเสียงภาษาเขมร",
                    "sort_khmer_meaning": "ความหมายภาษาเขมร",
                    "sort_english_meaning": "ความหมายภาษาอังกฤษ",
                    "ai_lesson_title": "บทเรียนที่สร้างโดย AI",
                    "ai_lesson_intro": "ป้อนหัวข้อหรือประเภทของคำ/ประโยคที่คุณต้องการเรียนรู้ แล้ว AI จะสร้างคำหรือประโยคภาษาไทยให้คุณ",
                    "generate_button": "สร้าง",
                    "custom_lesson_title": "บทเรียนที่กำหนดเอง",
                    "custom_lesson_intro_static": "นี่คือบทเรียนตัวอย่างที่สร้างไว้ล่วงหน้า คุณสามารถแก้ไขได้โดยตรงในโค้ด",
                    "exam_title": "ข้อสอบ",
                    "exam_intro_static": "ทดสอบความรู้ภาษาไทยของคุณด้วยคำถามตัวอย่าง",
                    "submit_exam": "ส่งข้อสอบ",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "เรียนรู้คำและวลีใหม่ได้อย่างง่ายดายโดยใช้ Flashcard ตัวอย่าง",
                    "previous_card": "ก่อนหน้า",
                    "next_card": "ถัดไป",
                    "progress_title": "รายงานระดับความรู้",
                    "progress_intro_static": "นี่คือรายงานความคืบหน้าตัวอย่าง",
                    "progress_content_static": "ขอแสดงความยินดีกับความก้าวหน้าที่ยอดเยี่ยมในการเรียนภาษาไทยของคุณ! คุณได้แสดงให้เห็นถึงความสม่ำเสมอที่น่าทึ่งในการฝึกฝนประจำวันของคุณ คำศัพท์ของคุณขยายตัวอย่างรวดเร็ว และคุณกำลังเริ่มเข้าใจวลีที่ซับซ้อนมากขึ้น การออกเสียงของคุณดีขึ้นอย่างเห็นได้ชัด โดยเฉพาะในพยางค์ที่มีวรรณยุกต์ คุณทำบทเรียนระดับอนุบาลและระดับเริ่มต้นทั้งหมดสำเร็จ และตอบคำถามข้อสอบหลายข้อได้อย่างถูกต้อง เพื่อให้การเติบโตของคุณดำเนินต่อไป ลองพิจารณาเน้นการปรับปรุงความคล่องแคล่วในการสนทนาโดยการฝึกฝนกับเจ้าของภาษา และทำความเข้าใจไวยากรณ์ที่ซับซ้อนมากขึ้น เช่น การใช้คำช่วยและโครงสร้างประโยค การอ่านเรื่องสั้นหรือบทความข่าวในภาษาไทยก็สามารถช่วยเสริมสร้างทักษะของคุณได้เช่นกัน ทำได้ดีมาก!",
                    "bookmarks_title": "บทเรียนที่ชื่นชอบ",
                    "bookmarks_intro_static": "จัดการบทเรียนและคำที่คุณชื่นชอบที่นี่",
                    "user_id_label": "รหัสผู้ใช้:",
                    "footer_text": "สงวนลิขสิทธิ์",
                    "correct_answers": "คำตอบที่ถูกต้อง:",
                    "total_questions": "คำถามทั้งหมด:",
                    "your_score": "คะแนนของคุณ:",
                    "retry_exam": "ลองอีกครั้ง",
                    "answer_correct": "ถูกต้อง!",
                    "answer_incorrect": "ไม่ถูกต้อง!",
                    "the_correct_answer_was": "คำตอบที่ถูกต้องคือ:",
                    "match_instructions": "ลากและวางคำภาษาเขมรเพื่อจับคู่กับคำภาษาไทย",
                    "ai_generation_error": "มีปัญหาในการสร้างบทเรียน AI โปรดลองอีกครั้งในภายหลัง",
                    "ai_invalid_response": "AI สร้างการตอบสนองที่ไม่ถูกต้อง โปรดลองอีกครั้ง"
                }
            };

            let currentLanguage = 'km'; // Default language
            let currentFlashcardIndex = 0;
            let currentExamAnswers = {}; // To store user's answers for the exam

            // Data for lessons (hardcoded for demonstration)
            const kindergartenLessons = [
                { thai: "สวัสดี", phonetic: "សួស្ដី", khmer: "ជំរាបសួរ", english: "Hello" },
                { thai: "ขอบคุณ", phonetic: "ខប ឃុន", khmer: "អរគុណ", english: "Thank you" },
                { thai: "ใช่", phonetic: "ឆៃ", khmer: "បាទ/ចាស", english: "Yes" },
                { thai: "ไม่ใช่", phonetic: "ម៉ៃ ឆៃ", khmer: "ទេ", english: "No" },
                { thai: "ขอโทษ", phonetic: "ខទោស", khmer: "សុំទោស", english: "Excuse me / Sorry" },
                { thai: "อร่อย", phonetic: "អរ่อย", khmer: "ឆ្ងាញ់", english: "Delicious" },
                { thai: "น้ำ", phonetic: "ណាំ", khmer: "ទឹក", english: "Water" },
                { thai: "ข้าว", phonetic: "ខាវ", khmer: "បាយ", english: "Rice" }
            ];

            const beginnerLessons = [
                { thai: "สบายดีไหม", phonetic: "សបាយឌី ម៉ៃ", khmer: "សុខសប្បាយជាទេ?", english: "How are you?" },
                { thai: "ฉันสบายดี", phonetic: "ឆាន់ សបាយឌី", khmer: "ខ្ញុំសុខសប្បាយ", english: "I'm fine" },
                { thai: "คุณชื่ออะไร", phonetic: "ឃុន ឈឺ អៈរ៉ៃ", khmer: "អ្នកឈ្មោះអ្វី?", english: "What is your name?" },
                { thai: "ฉันชื่อ...", phonetic: "ឆាន់ ឈឺ...", khmer: "ខ្ញុំឈ្មោះ...", english: "My name is..." },
                { thai: "ยินดีที่ได้รู้จัก", phonetic: "យិនឌី ធី ដាយ រូចាក់", khmer: "រីករាយដែលបានស្គាល់", english: "Nice to meet you" },
                { thai: "ไปไหนมา", phonetic: "ប៉ៃ ណៃ ម៉ា", khmer: "ទៅណា?", english: "Where are you going?" },
                { thai: "เท่าไหร่", phonetic: "ថៅ រ៉ៃ", khmer: "ប៉ុន្មាន?", english: "How much?" },
                { thai: "ห้องน้ำอยู่ไหน", phonetic: "ហង ណាំ យូ ណៃ", khmer: "បន្ទប់ទឹកនៅឯណា?", english: "Where is the restroom?" }
            ];

            const intermediateLessons = [
                { thai: "ช่วยด้วย", phonetic: "ជួយ ឌួយ", khmer: "ជួយផង", english: "Help!" },
                { thai: "ไม่เป็นไร", phonetic: "ម៉ៃ ប៉ិន រ៉ៃ", khmer: "មិនអីទេ", english: "Never mind / You're welcome" },
                { thai: "พูดช้าๆ หน่อย", phonetic: "ភូត ឆាៗ ណយ", khmer: "និយាយយឺតៗបន្តិច", english: "Please speak slowly" },
                { thai: "ฉันไม่เข้าใจ", phonetic: "ឆាន់ ម៉ៃ ខៅ ចៃ", khmer: "ខ្ញុំមិនយល់ទេ", english: "I don't understand" },
                { thai: "คุณมาจากไหน", phonetic: "ឃុន ម៉ា ចាក ណៃ", khmer: "អ្នកមកពីណា?", english: "Where are you from?" },
                { thai: "ฉันมาจาก...", phonetic: "ឆាន់ ម៉ា ចាក...", khmer: "ខ្ញុំមកពី...", english: "I am from..." },
                { thai: "คุณช่วยฉันได้ไหม", phonetic: "ឃុន ជួយ ឆាន់ ដាយ ម៉ៃ", khmer: "តើអ្នកអាចជួយខ្ញុំបានទេ?", english: "Can you help me?" },
                { thai: "ฉันอยากไปตลาด", phonetic: "ឆាន់ យ៉ាក ប៉ៃ តៈឡាត", khmer: "ខ្ញុំចង់ទៅផ្សារ", english: "I want to go to the market" }
            ];

            const advancedLessons = [
                { thai: "อากาศดีมากวันนี้", phonetic: "អាកាត ឌី ម៉ាក វ៉ាន់ នី", khmer: "អាកាសធាតុល្អណាស់ថ្ងៃនេះ", english: "The weather is very good today." },
                { thai: "ฉันกำลังเรียนภาษาไทย", phonetic: "ឆាន់ កាំឡាំង រៀន ភាសា ថៃ", khmer: "ខ្ញុំកំពុងរៀនភាសាថៃ", english: "I am learning Thai." },
                { thai: "คุณมีแผนอะไรสำหรับวันหยุดนี้", phonetic: "ឃុន មី ផែន អៈរ៉ៃ សាំหรับ វ៉ាន់ យុត នី", khmer: "តើអ្នកមានគម្រោងអ្វីសម្រាប់ចុងសប្តាហ៍នេះ?", english: "What are your plans for this weekend?" },
                { thai: "ฉันหวังว่าคุณจะมีความสุข", phonetic: "ឆាន់ ហ្វាំង វ៉ា ឃុន ចៈ មី ខ្វាម ស៊ុក", khmer: "ខ្ញុំសង្ឃឹមថាអ្នកនឹងសប្បាយរីករាយ", english: "I hope you will be happy." },
                { thai: "เดินทางปลอดภัยนะ", phonetic: "ឌើន ថាង ប្លត ភៃ ណៈ", khmer: "ធ្វើដំណើរដោយសុវត្ថិភាព", english: "Have a safe trip." },
                { thai: "คุณคิดยังไงกับเรื่องนี้", phonetic: "ឃុន ឃិត យ៉ាង ង៉ៃ កាប់ រឿង នី", khmer: "តើអ្នកគិតយ៉ាងណាចំពោះរឿងនេះ?", english: "What do you think about this matter?" },
                { thai: "ฉันขอตัวก่อนนะ", phonetic: "ឆាន់ ខ សួរ តួ កន ណៈ", khmer: "ខ្ញុំសូមលាហើយ", english: "I'll take my leave now." },
                { thai: "ไว้เจอกันใหม่นะ", phonetic: "វ៉ៃ ជើ កាន់ ម៉ៃ ណៈ", khmer: "ជួបគ្នាពេលក្រោយ", english: "See you again." }
            ];

            // Data for alphabet (hardcoded)
            const thaiConsonants = [
                { thaiChar: "ก", phoneticTranscription: "ក", khmerMeaning: "មាន់", englishMeaning: "Chicken" },
                { thaiChar: "ข", phoneticTranscription: "ខ", khmerMeaning: "ស៊ុត", englishMeaning: "Egg" },
                { thaiChar: "ค", phoneticTranscription: "គ", khmerMeaning: "ควาย", englishMeaning: "Buffalo" },
                { thaiChar: "ง", phoneticTranscription: "ង", khmerMeaning: "ពស់", englishMeaning: "Snake" },
                { thaiChar: "จ", phoneticTranscription: "ច", khmerMeaning: "ចាន", englishMeaning: "Dish" },
                { thaiChar: "ฉ", phoneticTranscription: "ឆ", khmerMeaning: "ឆ័ត្រ", englishMeaning: "Umbrella" },
                { thaiChar: "ช", phoneticTranscription: "ឈ", khmerMeaning: "ដំរី", englishMeaning: "Elephant" },
                { thaiChar: "ซ", phoneticTranscription: "ស", khmerMeaning: "ច្រវ៉ាក់", englishMeaning: "Chain" },
                { thaiChar: "ด", phoneticTranscription: "ដ", khmerMeaning: "កុមារ", englishMeaning: "Child" },
                { thaiChar: "ต", phoneticTranscription: "ត", khmerMeaning: "អណ្តើក", englishMeaning: "Turtle" },
                { thaiChar: "ท", phoneticTranscription: "ទ", khmerMeaning: "ទាហាន", englishMeaning: "Soldier" },
                { thaiChar: "น", phoneticTranscription: "ន", khmerMeaning: "កណ្ដុរ", englishMeaning: "Mouse" },
                { thaiChar: "บ", phoneticTranscription: "ប", khmerMeaning: "ស្លឹកឈើ", englishMeaning: "Leaf" },
                { thaiChar: "ป", phoneticTranscription: "ប", khmerMeaning: "ត្រី", englishMeaning: "Fish" },
                { thaiChar: "ผ", phoneticTranscription: "ផ", khmerMeaning: "ឃ្មុំ", englishMeaning: "Bee" },
                { thaiChar: "ฝ", phoneticTranscription: "ហ្វ", khmerMeaning: "គម្រប", englishMeaning: "Lid" },
                { thaiChar: "พ", phoneticTranscription: "ភ", khmerMeaning: "ថាស", englishMeaning: "Tray" },
                { thaiChar: "ฟ", phoneticTranscription: "ហ្វ", khmerMeaning: "ធ្មេញ", englishMeaning: "Tooth" },
                { thaiChar: "ม", phoneticTranscription: "ម", khmerMeaning: "សេះ", englishMeaning: "Horse" },
                { thaiChar: "ย", phoneticTranscription: "យ", khmerMeaning: "យក្ស", englishMeaning: "Giant" },
                { thaiChar: "ร", phoneticTranscription: "រ", khmerMeaning: "ទូក", englishMeaning: "Boat" },
                { thaiChar: "ล", phoneticTranscription: "ល", khmerMeaning: "លីង", englishMeaning: "Monkey" },
                { thaiChar: "ว", phoneticTranscription: "វ", khmerMeaning: "ចិញ្ចៀន", englishMeaning: "Ring" },
                { thaiChar: "อ", phoneticTranscription: "អ", khmerMeaning: "ចាន", englishMeaning: "Plate" },
                { thaiChar: "ฮ", phoneticTranscription: "ហ", khmerMeaning: "សត្វទីទុយ", englishMeaning: "Owl" }
            ];

            const thaiVowels = [
                { thaiChar: "ะ", phoneticTranscription: "អៈ", khmerMeaning: "ខ្លី អៈ", englishMeaning: "Short 'a'" },
                { thaiChar: "า", phoneticTranscription: "អា", khmerMeaning: "វែង អា", englishMeaning: "Long 'a'" },
                { thaiChar: "ิ", phoneticTranscription: "អិ", khmerMeaning: "ខ្លី អិ", englishMeaning: "Short 'i'" },
                { thaiChar: "ี", phoneticTranscription: "អ៊ី", khmerMeaning: "វែង អ៊ី", englishMeaning: "Long 'i'" },
                { thaiChar: "ึ", phoneticTranscription: "អ៊ឹ", khmerMeaning: "ខ្លី អ៊ឹ", englishMeaning: "Short 'ue'" },
                { thaiChar: "ื", phoneticTranscription: "អ៊ឺ", khmerMeaning: "វែង អ៊ឺ", englishMeaning: "Long 'ue'" },
                { thaiChar: "ุ", phoneticTranscription: "អុ", khmerMeaning: "ខ្លី អុ", englishMeaning: "Short 'u'" },
                { thaiChar: "ู", phoneticTranscription: "អ៊ូ", khmerMeaning: "វែង អ៊ូ", englishMeaning: "Long 'u'" },
                { thaiChar: "เะ", phoneticTranscription: "អេះ", khmerMeaning: "ខ្លី អេះ", englishMeaning: "Short 'e'" },
                { thaiChar: "เ", phoneticTranscription: "អេ", khmerMeaning: "វែង អេ", englishMeaning: "Long 'e'" },
                { thaiChar: "แะ", phoneticTranscription: "អែៈ", khmerMeaning: "ខ្លី អែៈ", englishMeaning: "Short 'ae'" },
                { thaiChar: "แ", phoneticTranscription: "អែ", khmerMeaning: "វែង អែ", englishMeaning: "Long 'ae'" },
                { thaiChar: "โะ", phoneticTranscription: "អុះ", khmerMeaning: "ខ្លី អុះ", englishMeaning: "Short 'o'" },
                { thaiChar: "โ", phoneticTranscription: "អូ", khmerMeaning: "វែង អូ", englishMeaning: "Long 'o'" },
                { thaiChar: "เอาะ", phoneticTranscription: "អោះ", khmerMeaning: "ខ្លី អោះ", englishMeaning: "Short 'aw'" },
                { thaiChar: "ออ", phoneticTranscription: "អ", khmerMeaning: "វែង អ", englishMeaning: "Long 'aw'" },
                { thaiChar: "เออะ", phoneticTranscription: "អឺ", khmerMeaning: "ខ្លី អឺ", englishMeaning: "Short 'oe'" },
                { thaiChar: "เออ", phoneticTranscription: "អើ", khmerMeaning: "វែង អើ", englishMeaning: "Long 'oe'" },
                { thaiChar: "เอียะ", phoneticTranscription: "អៀៈ", khmerMeaning: "ខ្លី អៀៈ", englishMeaning: "Short 'ia'" },
                { thaiChar: "เอีย", phoneticTranscription: "អៀ", khmerMeaning: "វែង អៀ", englishMeaning: "Long 'ia'" },
                { thaiChar: "เอือะ", phoneticTranscription: "អឿៈ", khmerMeaning: "ខ្លី អឿៈ", englishMeaning: "Short 'uea'" },
                { thaiChar: "เอือ", phoneticTranscription: "អឿ", khmerMeaning: "វែង អឿ", englishMeaning: "Long 'uea'" },
                { thaiChar: "อัวะ", phoneticTranscription: "អួៈ", khmerMeaning: "ខ្លី អួៈ", englishMeaning: "Short 'ua'" },
                { thaiChar: "อัว", phoneticTranscription: "អួ", khmerMeaning: "វែង អួ", englishMeaning: "Long 'ua'" },
                { thaiChar: "อำ", phoneticTranscription: "អាំ", khmerMeaning: "អាំ", englishMeaning: "Am" },
                { thaiChar: "ไอ", phoneticTranscription: "អៃ", khmerMeaning: "អៃ", englishMeaning: "Ai" },
                { thaiChar: "ใอ", phoneticTranscription: "អៃ", khmerMeaning: "អៃ", englishMeaning: "Ai" },
                { thaiChar: "เอา", phoneticTranscription: "អៅ", khmerMeaning: "អៅ", englishMeaning: "Ao" }
            ];

            // Data for exam questions (hardcoded)
            const examQuestions = [
                {
                    type: "multiple-choice",
                    thaiQuestion: "คำว่า 'สวัสดี' หมายความว่าอะไร?",
                    khmerQuestion: "តើពាក្យ 'สวัสดี' មានន័យដូចម្តេច?",
                    englishQuestion: "What does 'สวัสดี' mean?",
                    options: [
                        { thai: "ขอบคุณ", khmer: "អរគុណ", english: "Thank you" },
                        { thai: "ขอโทษ", khmer: "សុំទោស", english: "Sorry" },
                        { thai: "สวัสดี", khmer: "ជំរាបសួរ", english: "Hello" },
                        { thai: "ไม่เป็นไร", khmer: "មិនអីទេ", english: "Never mind" }
                    ],
                    correctAnswerIndex: 2
                },
                {
                    type: "multiple-choice",
                    thaiQuestion: "คำว่า 'ขอบคุณ' หมายความว่าอะไร?",
                    khmerQuestion: "តើពាក្យ 'ขอบคุณ' មានន័យដូចម្តេច?",
                    englishQuestion: "What does 'ขอบคุณ' mean?",
                    options: [
                        { thai: "ใช่", khmer: "បាទ/ចាស", english: "Yes" },
                        { thai: "ขอบคุณ", khmer: "អរគុណ", english: "Thank you" },
                        { thai: "อร่อย", khmer: "ឆ្ងាញ់", english: "Delicious" },
                        { thai: "น้ำ", khmer: "ទឹក", english: "Water" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    type: "matching",
                    thaiQuestion: "จับคู่คำภาษาไทยกับความหมายภาษาเขมร",
                    khmerQuestion: "ផ្គូផ្គងពាក្យថៃជាមួយអត្ថន័យខ្មែរ",
                    englishQuestion: "Match the Thai words with their Khmer meanings.",
                    pairs: [
                        { thai: "ข้าว", khmer: "បាយ", english: "Rice" },
                        { thai: "น้ำ", khmer: "ទឹក", english: "Water" },
                        { thai: "สบายดีไหม", khmer: "សុខសប្បាយជាទេ?", english: "How are you?" },
                        { thai: "เท่าไหร่", khmer: "ប៉ុន្មាន?", english: "How much?" }
                    ]
                }
            ];

            // Data for flashcards (hardcoded)
            const flashcardData = [
                { thai: "อร่อย", phonetic: "អរ่อย", khmer: "ឆ្ងាញ់", english: "Delicious" },
                { thai: "น้ำ", phonetic: "ណាំ", khmer: "ទឹក", english: "Water" },
                { thai: "ข้าว", phonetic: "ខាវ", khmer: "បាយ", english: "Rice" },
                { thai: "ห้องน้ำ", phonetic: "ហង ណាំ", khmer: "បន្ទប់ទឹក", english: "Restroom" },
                { thai: "ตลาด", phonetic: "តៈឡាត", khmer: "ផ្សារ", english: "Market" },
                { thai: "เงิน", phonetic: "ងើន", khmer: "លុយ", english: "Money" },
                { thai: "โรงแรม", phonetic: "រ៉ង រ៉ែម", khmer: "សណ្ឋាគារ", english: "Hotel" },
                { thai: "อาหาร", phonetic: "អាហារ", khmer: "អាហារ", english: "Food" }
            ];

            // New data from the uploaded file
            const uploadedVocabulary = [
                // Time-related words
                { thai: "วินาที", phonetic: "វិនាទី", khmer: "វិនាទី", english: "Second" },
                { thai: "นาที", phonetic: "នាទី", khmer: "នាទី", english: "Minute" },
                { thai: "นาฬิกา", phonetic: "នាលិកា", khmer: "ម៉ោង", english: "O'Clock / Watch / Clock" },
                { thai: "ชั่วโมง", phonetic: "ម៉ោង", khmer: "ម៉ោង", english: "Hour" },
                { thai: "ครึ่งชั่วโมง", phonetic: "ក្រឹង ម៉ោង", khmer: "កន្លះម៉ោង", english: "Half an hour" },
                { thai: "เช้า", phonetic: "ឆៅ", khmer: "ព្រឹក", english: "Morning" },
                { thai: "อาหารเช้า", phonetic: "អាហារ ឆៅ", khmer: "អាហារពេលព្រឹក", english: "Breakfast" },
                { thai: "ทุกเช้า", phonetic: "ធុក ឆៅ", khmer: "រាល់ព្រឹក", english: "Every morning" },
                { thai: "เช้านี้", phonetic: "ឆៅ នី", khmer: "ព្រឹកនេះ", english: "This Morning" },
                { thai: "เที่ยง", phonetic: "ធៀង", khmer: "ថ្ងៃត្រង់", english: "Noon" },
                { thai: "ข้าวเที่ยง", phonetic: "ខាវ ធៀង", khmer: "អាហារថ្ងៃត្រង់", english: "Lunch" },
                { thai: "บ่าย", phonetic: "បាយ", khmer: "រសៀល", english: "Afternoon" },
                { thai: "เย็น", phonetic: "យេន", khmer: "ល្ងាច", english: "Evening" },
                { thai: "ทุกเย็น", phonetic: "ធុក យេន", khmer: "រាល់ល្ងាច", english: "Every evening" },
                { thai: "กลางคืน", phonetic: "កាង ឃឺន", khmer: "យប់", english: "Night" },
                { thai: "เที่ยงคืน", phonetic: "ធៀង ឃឺន", khmer: "ពាក់កណ្ដាលអធ្រាត្រ", english: "Midnight" },
                { thai: "วันนี้", phonetic: "វ៉ាន់ នី", khmer: "ថ្ងៃនេះ", english: "Today" },
                { thai: "เมื่อวาน", phonetic: "មឿ វ៉ាន់", khmer: "ម្សិលមិញ", english: "Yesterday" },
                { thai: "พรุ่งนี้", phonetic: "ព្រុង នី", khmer: "ថ្ងៃស្អែក", english: "Tomorrow" },
                { thai: "เจอกันพรุ่งนี้", phonetic: "ជើ កាន់ ព្រុង នី", khmer: "ជួបគ្នាថ្ងៃស្អែក", english: "See you tomorrow" },
                { thai: "พรุ่งนี้เช้า", phonetic: "ព្រុង នី ឆៅ", khmer: "ព្រឹកស្អែក", english: "Tomorrow morning" },
                { thai: "พรุ่งนี้เย็น", phonetic: "ព្រុង នី យេន", khmer: "ល្ងាចស្អែក", english: "Tomorrow Evening" },
                { thai: "พรุ่งนี้คืน", phonetic: "ព្រុង នី ឃឺន", khmer: "យប់ស្អែក", english: "Tomorrow Night" },
                { thai: "วันจันทร์", phonetic: "វ៉ាន់ ចាន់", khmer: "ថ្ងៃច័ន្ទ", english: "Monday" },
                { thai: "วันอังคาร", phonetic: "វ៉ាន់ អាំងខារ", khmer: "ថ្ងៃអង្គារ", english: "Tuesday" },
                { thai: "วันพุธ", phonetic: "វ៉ាន់ ពុត", khmer: "ថ្ងៃពុធ", english: "Wednesday" },
                { thai: "วันพฤหัสบดี", phonetic: "វ៉ាន់ ផៈរឺហាត់សៈបៈឌី", khmer: "ថ្ងៃព្រហស្បតិ៍", english: "Thursday" },
                { thai: "วันศุกร์", phonetic: "វ៉ាន់ ស៊ុក", khmer: "ថ្ងៃសុក្រ", english: "Friday" },
                { thai: "วันเสาร์", phonetic: "វ៉ាន់ សៅ", khmer: "ថ្ងៃសៅរ៍", english: "Saturday" },
                { thai: "วันอาทิตย์", phonetic: "វ៉ាន់ អាទិត្យ", khmer: "ថ្ងៃអាទិត្យ", english: "Sunday" },
                { thai: "วันเสาร์อาทิตย์", phonetic: "វ៉ាន់ សៅ អាទិត្យ", khmer: "ចុងសប្តាហ៍", english: "Weekend" },
                { thai: "สัปดาห์", phonetic: "ស័ប្ដា", khmer: "សប្តាហ៍", english: "Week" },
                { thai: "สัปดาห์ที่แล้ว", phonetic: "ស័ប្ដា ធី ឡេវ", khmer: "សប្តាហ៍មុន", english: "Last Week" },
                { thai: "2 อาทิตย์ก่อน", phonetic: "សង អាទិត្យ កន", khmer: "២ សប្តាហ៍មុន", english: "Two weeks ago" },
                { thai: "ทุกอาทิตย์", phonetic: "ធុក អាទិត្យ", khmer: "រាល់សប្តាហ៍", english: "Every Week" },
                { thai: "เช้าวันอาทิตย์", phonetic: "ឆៅ វ៉ាន់ អាទិត្យ", khmer: "ព្រឹកថ្ងៃអាទិត្យ", english: "Sunday Morning" },
                { thai: "คืนวันอาทิตย์", phonetic: "ឃឺន វ៉ាន់ អាទិត្យ", khmer: "យប់ថ្ងៃអាទិត្យ", english: "Sunday Night" },
                { thai: "เดือน", phonetic: "ឌឿន", khmer: "ខែ", english: "Month" },
                { thai: "เดือนที่แล้ว", phonetic: "ឌឿន ធី ឡេវ", khmer: "ខែមុន", english: "Last month" },
                { thai: "เดือนหน้า", phonetic: "ឌឿន ណា", khmer: "ខែក្រោយ", english: "Next month" },
                { thai: "มกราคม", phonetic: "មករាគម", khmer: "ខែមករា", english: "January" },
                { thai: "กุมภาพันธ์", phonetic: "កុម្ភៈផាន់", khmer: "ខែកុម្ភៈ", english: "February" },
                { thai: "มีนาคม", phonetic: "មីនាគម", khmer: "ខែមីនា", english: "March" },
                { thai: "เมษายน", phonetic: "មេសាយ៉ន", khmer: "ខែមេសា", english: "April" },
                { thai: "พฤษภาคม", phonetic: "ផ្រឺសៈផាគម", khmer: "ខែឧសភា", english: "May" },
                { thai: "มิถุนายน", phonetic: "មិថុនាគម", khmer: "ខែមិថុនា", english: "June" },
                { thai: "กรกฎาคม", phonetic: "ករកៈដាគម", khmer: "ខែកក្កដា", english: "July" },
                { thai: "สิงหาคม", phonetic: "សិង្ហាគម", khmer: "ខែសីហា", english: "August" },
                { thai: "กันยายน", phonetic: "ក័នយ៉ាយ៉ន", khmer: "ខែកញ្ញា", english: "September" },
                { thai: "ตุลาคม", phonetic: "តុលាគម", khmer: "ខែតុលា", english: "October" },
                { thai: "พฤศจิกายน", phonetic: "ផ្រឺសៈចិកាគម", khmer: "ខែវិច្ឆិកា", english: "November" },
                { thai: "ธันวาคม", phonetic: "ធ័នវ៉ាគម", khmer: "ខែធ្នូ", english: "December" },
                { thai: "ฤดู", phonetic: "រឺឌូ", khmer: "រដូវ", english: "Season" },
                { thai: "ฤดูร้อน", phonetic: "រឺឌូ រន", khmer: "រដូវក្តៅ", english: "Summer" },
                { thai: "ฤดูฝน", phonetic: "រឺឌូ ហ្វុន", khmer: "រដូវវស្សា", english: "Rainy Season" },
                { thai: "ฤดูหนาว", phonetic: "រឺឌូ ណាវ", khmer: "រដូវរងា", english: "Winter" },
                { thai: "ปี", phonetic: "ពី", khmer: "ឆ្នាំ", english: "Year" },
                { thai: "ปีใหม่", phonetic: "ពី ម៉ៃ", khmer: "ឆ្នាំថ្មី", english: "New Year" },
                { thai: "สงกรานต์", phonetic: "សង្ក្រាន្ត", khmer: "បុណ្យចូលឆ្នាំថ្មី", english: "Songkran Festival" },
                { thai: "สวัสดีปีใหม่", phonetic: "សួស្ដី ពី ម៉ៃ", khmer: "រីករាយឆ្នាំថ្មី", english: "Happy New Year" },
                { thai: "อากาศ", phonetic: "អាកាត", khmer: "អាកាសធាតុ", english: "Weather" },
                { thai: "ร้อน", phonetic: "រន", khmer: "ក្តៅ", english: "Hot" },
                { thai: "หนาว", phonetic: "ណាវ", khmer: "ត្រជាក់", english: "Cold" },
                { thai: "เมฆ", phonetic: "មេក", khmer: "ពពក", english: "Cloud" },
                { thai: "หมอก", phonetic: "មោក", khmer: "អ័ព្ទ", english: "Fog" },
                { thai: "หิมะ", phonetic: "ហិម៉ៈ", khmer: "ព្រិល", english: "Snow" },
                { thai: "อุ่น", phonetic: "អ៊ុន", khmer: "ក្តៅឧណ្ហៗ", english: "Warm" },
                { thai: "ฟ้าร้อง", phonetic: "ហ្វា រង", khmer: "ផ្គរលាន់", english: "Thunder" },
                { thai: "รุ้ง", phonetic: "រុង", khmer: "ឥន្ទធនូ", english: "Rainbow" },
                { thai: "ฝน", phonetic: "ហ្វុន", khmer: "ភ្លៀង", english: "Rain" },
                { thai: "ลม", phonetic: "ឡម", khmer: "ខ្យល់", english: "Wind" },
                { thai: "พายุ", phonetic: "ផាយុ", khmer: "ព្យុះ", english: "Storm" },
                { thai: "ไต้ฝุ่น", phonetic: "តៃ ហ្វុន", khmer: "ព្យុះទីហ្វុង", english: "Typhoon" },
                { thai: "ฟ้าผ่า", phonetic: "ហ្វា ផា", khmer: "រន្ទះបាញ់", english: "Lightning" },
                { thai: "1 วัน", phonetic: "ណឺង វ៉ាន់", khmer: "១ ថ្ងៃ", english: "One Day" },
                { thai: "1 โมง", phonetic: "ណឺង ម៉ូង", khmer: "ម៉ោង ១", english: "1 AM" }, // Assuming "ต 1" refers to 1 AM
                { thai: "2 โมง", phonetic: "សង ម៉ូង", khmer: "ម៉ោង ២", english: "2 AM" }, // Assuming "ต 2" refers to 2 AM
                { thai: "3 โมง", phonetic: "សាម ម៉ូង", khmer: "ម៉ោង ៣", english: "3 AM" }, // Assuming "ต 3" refers to 3 AM
                { thai: "4 โมง", phonetic: "ស៊ី ម៉ូង", khmer: "ម៉ោង ៤", english: "4 AM" }, // Assuming "ต 4" refers to 4 AM
                { thai: "5 โมง", phonetic: "ហាស ម៉ូង", khmer: "ម៉ោង ៥", english: "5 AM" }, // Assuming "5" refers to 5 AM
                { thai: "6 โมงเช้า", phonetic: "ហុក ម៉ូង ឆៅ", khmer: "ម៉ោង ៦ ព្រឹក", english: "6 AM" }, // Assuming "1800 น" is a typo and should be 6 AM
                { thai: "7 โมงเช้า", phonetic: "ចេត ម៉ូង ឆៅ", khmer: "ម៉ោង ៧ ព្រឹក", english: "7 AM" },
                { thai: "8 โมงเช้า", phonetic: "แปด ម៉ូង ឆៅ", khmer: "ម៉ោង ៨ ព្រឹក", english: "8 AM" },
                { thai: "9 โมงเช้า", phonetic: "កៅ ម៉ូង ឆៅ", khmer: "ម៉ោង ៩ ព្រឹក", english: "9 AM" },
                { thai: "10 โมงเช้า", phonetic: "ស៊ីប ម៉ូង ឆៅ", khmer: "ម៉ោង ១០ ព្រឹក", english: "10 AM" },
                { thai: "11 โมงเช้า", phonetic: "ស៊ីប អេត ម៉ូង ឆៅ", khmer: "ម៉ោង ១១ ព្រឹក", english: "11 AM" },
                { thai: "เที่ยงวัน", phonetic: "ធៀង វ៉ាន់", khmer: "ថ្ងៃត្រង់", english: "Noon" },
                { thai: "13:00 น.", phonetic: "ស៊ីប សាម ណាលិកា", khmer: "ម៉ោង ១ រសៀល", english: "1 PM" },
                { thai: "14:00 น.", phonetic: "ស៊ីប ស៊ី ណាលិកា", khmer: "ម៉ោង ២ រសៀល", english: "2 PM" },
                { thai: "15:00 น.", phonetic: "ស៊ីប ហាស ណាលិកា", khmer: "ម៉ោង ៣ រសៀល", english: "3 PM" },
                { thai: "16:00 น.", phonetic: "ស៊ីប ហុក ណាលិកា", khmer: "ម៉ោង ៤ រសៀល", english: "4 PM" },
                { thai: "17:00 น.", phonetic: "ស៊ីប ចេត ណាលិកា", khmer: "ម៉ោង ៥ រសៀល", english: "5 PM" },
                { thai: "18:00 น.", phonetic: "ស៊ីប ប៉ែត ណាលិកា", khmer: "ម៉ោង ៦ ល្ងាច", english: "6 PM" },
                { thai: "19:00 น.", phonetic: "ស៊ីប កៅ ណាលិកា", khmer: "ម៉ោង ៧ ល្ងាច", english: "7 PM" },
                { thai: "20:00 น.", phonetic: "យី ស៊ីប ណាលិកា", khmer: "ម៉ោង ៨ យប់", english: "8 PM" },
                { thai: "21:00 น.", phonetic: "យី ស៊ីប អេត ណាលិកា", khmer: "ម៉ោង ៩ យប់", english: "9 PM" },
                { thai: "22:00 น.", phonetic: "យី ស៊ីប សង ណាលិកា", khmer: "ម៉ោង ១០ យប់", english: "10 PM" },
                { thai: "23:00 น.", phonetic: "យី ស៊ីប សាម ណាលិកា", khmer: "ម៉ោង ១១ យប់", english: "11 PM" },
                { thai: "ชั่วคราว", phonetic: "ឈួ ខ្រាវ", khmer: "បណ្ដោះអាសន្ន", english: "Temporary" },
                { thai: "ตลอดไป", phonetic: "តាឡត ប៉ៃ", khmer: "ជារៀងរហូត", english: "Forever" },
                { thai: "บางครั้ง", phonetic: "បាង ក្រាំង", khmer: "ជួនកាល", english: "Sometimes" },
                { thai: "มักจะ", phonetic: "ម៉ាក់ ចៈ", khmer: "ជាញឹកញាប់", english: "Often / Usually" },
                { thai: "เป็นประจำ", phonetic: "ប៉ិន ប្រៈចាំ", khmer: "ជាប្រចាំ", english: "Regularly" },
                { thai: "ขณะนี้", phonetic: "ខៈណៈ នី", khmer: "បច្ចុប្បន្ន", english: "Currently / Now at present" },
                { thai: "ทันที", phonetic: "ថាន់ ធី", khmer: "ភ្លាមៗ", english: "Immediately" },
                { thai: "ตอนนี้", phonetic: "តន នី", khmer: "ឥឡូវនេះ", english: "Now / At the moment" },
                { thai: "เพิ่ง", phonetic: "ភើង", khmer: "ទើបតែ", english: "Just recently" },
                { thai: "เมื่อกี้", phonetic: "មឿ គី", khmer: "មុននេះបន្តិច", english: "Just now / A moment ago" },
                { thai: "เดี๋ยวนี้", phonetic: "ឌៀវ នី", khmer: "ឥឡូវនេះ", english: "Right now" },
                { thai: "ก่อน", phonetic: "កន", khmer: "មុន", english: "Before" },
                { thai: "หลัง", phonetic: "ហ្លាំង", khmer: "ក្រោយ", english: "After" },
                { thai: "เร็วๆนี้", phonetic: "រ៉េវៗ នី", khmer: "ឆាប់ៗនេះ", english: "Soon" },
                { thai: "เกือบ", phonetic: "គឿប", khmer: "ជិត", english: "Almost" },
                { thai: "ปัจจุบัน", phonetic: "ប៉ាត់ចុបប៉ាន់", khmer: "បច្ចុប្បន្ន", english: "Nowadays" },
                { thai: "ตั้งแต่", phonetic: "តាំង តែ", khmer: "តាំងពី", english: "Since / From" },
                { thai: "ตั้งแต่เมื่อไหร่", phonetic: "តាំង តែ មឿ រ៉ៃ", khmer: "តាំងពីពេលណា?", english: "Since when?" },
                { thai: "จนถึง", phonetic: "ចន ធឹង", khmer: "រហូតដល់", english: "Until" },
                { thai: "อีกครั้ง", phonetic: "អ៊ិក ក្រាំង", khmer: "ម្តងទៀត", english: "Again" },
                { thai: "บ่ายนี้", phonetic: "បាយ នី", khmer: "រសៀលនេះ", english: "This Afternoon" },
                { thai: "คืนนี้", phonetic: "ឃឺន នី", khmer: "យប់នេះ", english: "Tonight" },
                { thai: "เมื่อไหร่", phonetic: "មឿ រ៉ៃ", khmer: "ពេលណា?", english: "When?" },
                { thai: "กี่โมง", phonetic: "គី ម៉ូង", khmer: "ម៉ោងប៉ុន្មាន?", english: "What time?" },
                { thai: "เวลา", phonetic: "វេលា", khmer: "ពេលវេលា", english: "Time" },
                { thai: "ช่วงเวลา", phonetic: "ឈួង វេលា", khmer: "រយៈពេល", english: "Period" },
                { thai: "อดีต", phonetic: "អៈឌីត", khmer: "អតីតកាល", english: "The Past" },
                { thai: "อนาคต", phonetic: "អៈណាខត", khmer: "អនាគត", english: "Future" },
                // Daily Activities
                { thai: "ตื่นนอน", phonetic: "ទឿន ណន", khmer: "ភ្ញាក់ពីគេង", english: "Wake up" },
                { thai: "ลุกจากเตียง", phonetic: "លុក ចាក ទៀង", khmer: "ក្រោកពីគ្រែ", english: "Get out of bed" },
                { thai: "อาบน้ำ", phonetic: "អាប ណាំ", khmer: "ងូតទឹក", english: "Take a Bath" },
                { thai: "แปรงฟัน", phonetic: "ប្រែង ហ្វាន់", khmer: "ដុសធ្មេញ", english: "Brush teeth" },
                { thai: "แต่งตัว", phonetic: "តែង តួ", khmer: "ស្លៀកពាក់", english: "Get dressed" },
                { thai: "กินอาหารเช้า", phonetic: "គិន អាហារ ឆៅ", khmer: "ញ៉ាំអាហារពេលព្រឹក", english: "Eat Breakfast" },
                { thai: "ปิดนาฬิกาปลุก", phonetic: "បិត ណាលិកា ប្លុក", khmer: "បិទម៉ោងរោទ៍", english: "Turn off Alarm" },
                { thai: "ขับ", phonetic: "ខាប់", khmer: "បើកបរ", english: "To drive" },
                { thai: "ขับรถ", phonetic: "ខាប់ រត", khmer: "បើកឡាន", english: "To Drive a car" },
                { thai: "ทำงาน", phonetic: "ថាំ ង៉ាន់", khmer: "ធ្វើការ", english: "To work" },
                { thai: "เรียน", phonetic: "រៀន", khmer: "រៀន", english: "To study" },
                { thai: "เช็คอีเมล", phonetic: "ឆេក អ៊ីម៉េល", khmer: "ឆែកអ៊ីមែល", english: "Check email" },
                { thai: "ไปทำงาน", phonetic: "ប៉ៃ ថាំ ង៉ាន់", khmer: "ទៅធ្វើការ", english: "Go to work" },
                { thai: "ดื่ม", phonetic: "ឌឿម", khmer: "ផឹក", english: "To drink" },
                { thai: "ทำความสะอาด", phonetic: "ថាំ ខ្វាម សៈអាត", khmer: "សម្អាត", english: "To clean" },
                { thai: "ดูทีวี", phonetic: "ឌូ ធីវី", khmer: "មើលទូរទស្សន៍", english: "Watch TV" },
                { thai: "ฟังเพลง", phonetic: "ហ្វាំង ភ្លេង", khmer: "ស្តាប់ចម្រៀង", english: "Listen to music" },
                { thai: "อ่านหนังสือ", phonetic: "អាន ណាំងស៊ឺ", khmer: "អានសៀវភៅ", english: "Read a book" },
                { thai: "เล่นเกม", phonetic: "เล่น ហ្គេម", khmer: "លេងហ្គេម", english: "Play Game" },
                { thai: "เดินเล่น", phonetic: "ដើរ លេង", khmer: "ដើរលេង", english: "Go for a walk" },
                { thai: "เดิน", phonetic: "ដើរ", khmer: "ដើរ", english: "To walk" },
                { thai: "รถ", phonetic: "រត", khmer: "ឡាន", english: "Car" },
                { thai: "ทำอาหารเย็น", phonetic: "ថាំ អាហារ យេន", khmer: "ធ្វើអាហារពេលល្ងាច", english: "Cook Dinner" },
                { thai: "ทำอาหาร", phonetic: "ថាំ អាហារ", khmer: "ធ្វើម្ហូប", english: "To Cook Food" },
                { thai: "ออกกำลังกาย", phonetic: "អក កាំឡាំង កាយ", khmer: "ហាត់ប្រាណ", english: "To Exercise" },
                { thai: "พักผ่อน", phonetic: "ផាក់ ផន", khmer: "សម្រាក", english: "To Rest / To relax" },
                { thai: "รีดผ้า", phonetic: "រីត ផា", khmer: "អ៊ុតខោអាវ", english: "Iron clothes" },
                { thai: "ซักผ้า", phonetic: "សាក់ ផា", khmer: "បោកខោអាវ", english: "Do laundry" },
                { thai: "ซื้อของ", phonetic: "ស៊ឺ ខង", khmer: "ទិញឥវ៉ាន់", english: "Buy groceries / To do shopping" },
                { thai: "ประชุม", phonetic: "ប្រៈឈុំ", khmer: "ប្រជុំ", english: "Meeting" },
                { thai: "เขียน", phonetic: "ខៀន", khmer: "សរសេរ", english: "To Write" },
                { thai: "ทำการบ้าน", phonetic: "ថាំ ការ បាន", khmer: "ធ្វើកិច្ចការផ្ទះ", english: "To do homework" },
                { thai: "สอน", phonetic: "សន", khmer: "បង្រៀន", english: "To teach" },
                { thai: "ค้นคว้า", phonetic: "ខុន ខ្វា", khmer: "ស្រាវជ្រាវ", english: "To search / To do Research" },
                { thai: "จดบันทึก", phonetic: "ចត ប័នធឹក", khmer: "កត់ចំណាំ", english: "Take notes" },
                { thai: "สอบ", phonetic: "សប", khmer: "ប្រឡង", english: "Exam" },
                { thai: "ส่งอีเมล", phonetic: "សុង អ៊ីម៉េល", khmer: "ផ្ញើអ៊ីមែល", english: "Send email" },
                { thai: "โทรศัพท์", phonetic: "ធរៈស័ប", khmer: "ទូរស័ព្ទ", english: "Telephone" },
                { thai: "คุย", phonetic: "ឃុយ", khmer: "និយាយ / ជជែក", english: "To chat / To talk" },
                { thai: "คุยโทรศัพท์", phonetic: "ឃុយ ធរៈស័ប", khmer: "និយាយទូរស័ព្ទ", english: "Talk on the phone" },
                { thai: "เขียนรายงาน", phonetic: "ខៀន រាយង៉ាន់", khmer: "សរសេររបាយការណ៍", english: "Write a report" },
                { thai: "ตรวจงาน", phonetic: "ត្រួត ង៉ាន់", khmer: "ត្រួតពិនិត្យការងារ", english: "Check work" },
                { thai: "กินอาหารกลางวัน", phonetic: "គិន អាហារ កាង វ៉ាន់", khmer: "ញ៉ាំអាហារថ្ងៃត្រង់", english: "Eat Lunch" },
                { thai: "กินอาหารเย็น", phonetic: "គិន អាហារ យេន", khmer: "ញ៉ាំអាហារពេលល្ងាច", english: "Eat Dinner" },
                { thai: "สั่งอาหาร", phonetic: "សាំង អាហារ", khmer: "កុម្ម៉ង់អាហារ", english: "Order Food" },
                { thai: "สั่ง", phonetic: "សាំង", khmer: "កុម្ម៉ង់", english: "To order" },
                { thai: "เตรียม", phonetic: "ត្រៀម", khmer: "រៀបចំ", english: "To prepare" },
                { thai: "เตรียมอาหาร", phonetic: "ត្រៀម អាហារ", khmer: "រៀបចំអាហារ", english: "To prepare Food" },
                { thai: "ล้างจาน", phonetic: "លាំង ចាន", khmer: "លាងចាន", english: "Wash dishes" },
                { thai: "อบขนม", phonetic: "អប ខៈណម", khmer: "ដុតនំ", english: "Bake snacks" },
                { thai: "อบ", phonetic: "អប", khmer: "ដុត", english: "To Bake" },
                { thai: "ขนม", phonetic: "ខៈណម", khmer: "នំ / អាហារសម្រន់", english: "Dessert / Snack" },
                { thai: "ซื้อ", phonetic: "ស៊ឺ", khmer: "ទិញ", english: "To buy" },
                { thai: "ผ้า", phonetic: "ផា", khmer: "ក្រណាត់ / ខោអាវ", english: "Clothes / Fabric" },
                { thai: "ผ้าห่ม", phonetic: "ផា ហម", khmer: "ភួយ", english: "Blanket" },
                { thai: "จักรเย็บผ้า", phonetic: "ចាក់ យេប ផា", khmer: "ម៉ាស៊ីនដេរ", english: "Sewing Machine" },
                { thai: "ผ้าพันคอ", phonetic: "ផា ផាន់ ខ", khmer: "ក្រមា / កន្សែងបង់ក", english: "Scarf" },
                { thai: "ผ้าขนหนู", phonetic: "ផា ខន ណូ", khmer: "កន្សែងពោះគោ", english: "Towel" },
                { thai: "จ่ายบิล", phonetic: "ចាយ ប៊ីន", khmer: "បង់វិក្កយបត្រ", english: "Pay bill" },
                { thai: "กวาดบ้าน", phonetic: "ក្វាត បាន", khmer: "បោសផ្ទះ", english: "Sweep The House" },
                { thai: "กวาด", phonetic: "ក្វាត", khmer: "បោស", english: "To sweep" },
                { thai: "ถู", phonetic: "ធូ", khmer: "ជូត / ត្រដុស", english: "To rub / To mop" },
                { thai: "ถูบ้าน", phonetic: "ធូ បាន", khmer: "ជូតផ្ទះ", english: "Mop The Floor" },
                { thai: "เช็ดโต๊ะ", phonetic: "ឆេត តូ", khmer: "ជូតតុ", english: "Wipe the table" },
                { thai: "โต๊ะ", phonetic: "តូ", khmer: "តុ", english: "Table / Desk" },
                { thai: "จัดโต๊ะ", phonetic: "ចាត់ តូ", khmer: "រៀបចំតុ", english: "To Set the table" },
                { thai: "ขยะ", phonetic: "ខៈយ៉ៈ", khmer: "សំរាម", english: "Rubbish / Garbage" },
                { thai: "ทิ้ง", phonetic: "ធីង", khmer: "បោះចោល", english: "To throw Away" },
                { thai: "จัดของ", phonetic: "ចាត់ ខង", khmer: "រៀបចំរបស់របរ", english: "Arrange Things" },
                { thai: "รดน้ำต้นไม้", phonetic: "រត ណាំ តន ម៉ៃ", khmer: "ស្រោចទឹកដើមឈើ", english: "Water Plants" },
                { thai: "ปลูก", phonetic: "ប្លូក", khmer: "ដាំ", english: "To Grow Plant" },
                { thai: "ไม้", phonetic: "ម៉ៃ", khmer: "ឈើ", english: "Wood / Tree" },
                { thai: "ล้างรถ", phonetic: "លាំង រត", khmer: "លាងឡាន", english: "Wash The Car" },
                { thai: "ล้าง", phonetic: "លាំង", khmer: "លាង", english: "To Wash" },
                { thai: "ซักผ้า", phonetic: "សាក់ ផា", khmer: "បោកខោអាវ", english: "To Wash clothes" },
                { thai: "เย็บผ้า", phonetic: "យេប ផា", khmer: "ដេរខោអាវ", english: "Sew clothes" },
                { thai: "เสื้อ", phonetic: "សឿ", khmer: "អាវ", english: "Shirt" },
                { thai: "เสื้อยืด", phonetic: "សឿ យឺត", khmer: "អាវយឺត", english: "T-shirt" },
                { thai: "เสื้อเชิ้ต", phonetic: "សឿ ឈើត", khmer: "អាវគីប", english: "Dress shirt" },
                { thai: "เสื้อนอก", phonetic: "សឿ ណក", khmer: "អាវក្រៅ / អាវធំ", english: "Jacket" },
                { thai: "เสื้อกันหนาว", phonetic: "សឿ កាន់ ណាវ", khmer: "អាវរងា", english: "Sweatshirt" },
                { thai: "เสื้อโค้ท", phonetic: "សឿ ខូត", khmer: "អាវធំ", english: "Coat" },
                { thai: "ร้านเสื้อผ้า", phonetic: "រ៉ាន់ សឿ ផា", khmer: "ហាងលក់សម្លៀកបំពាក់", english: "Clothing Store" },
                { thai: "เสื้อกันฝน", phonetic: "សឿ កាន់ ហ្វុន", khmer: "អាវភ្លៀង", english: "Raincoat" },
                { thai: "ชุดนอน", phonetic: "ឈុត ណន", khmer: "ឈុតគេង", english: "Pajamas" },
                { thai: "ชุดชั้นใน", phonetic: "ឈុត ឆាន់ ណៃ", khmer: "ខោអាវក្នុង", english: "Underwear" },
                { thai: "ถุงเท้า", phonetic: "ធុង ថៅ", khmer: "ស្រោមជើង", english: "Sock" },
                { thai: "ถุงมือ", phonetic: "ធុង មឺ", khmer: "ស្រោមដៃ", english: "Glove" },
                { thai: "รองเท้าผ้าใบ", phonetic: "រង ថៅ ផា បៃ", khmer: "ស្បែកជើងប៉ាតា", english: "Sneakers / Sport Shoes" },
                { thai: "รองเท้าแตะ", phonetic: "រង ថៅ តៈ", khmer: "ស្បែកជើងផ្ទាត់", english: "Sandals / Flip flops" },
                { thai: "หมวก", phonetic: "មួក", khmer: "មួក", english: "Hat" },
                { thai: "แว่นตา", phonetic: "វ៉ែន តា", khmer: "វ៉ែនតា", english: "Eyeglasses" },
                { thai: "เข็มขัด", phonetic: "ខេម ខាត់", khmer: "ខ្សែក្រវ៉ាត់", english: "Belt" },
                { thai: "เข็มขัดนิรภัย", phonetic: "ខេម ខាត់ និរៈភៃ", khmer: "ខ្សែក្រវ៉ាត់សុវត្ថិភាព", english: "Safety Belt in a car" },
                { thai: "สร้อยคอ", phonetic: "សរយ ខ", khmer: "ខ្សែក", english: "Necklace" },
                { thai: "ต่างหู", phonetic: "តាំង ហូ", khmer: "ក្រវិល", english: "Earrings" },
                { thai: "กระเป๋า", phonetic: "ក្រៈប៉ៅ", khmer: "កាបូប", english: "Bag" },
                // Body parts
                { thai: "ร่างกาย", phonetic: "រាង កាយ", khmer: "រាងកាយ", english: "Body" },
                { thai: "เท้า", phonetic: "ថៅ", khmer: "ជើង (បាតជើង)", english: "Foot" },
                { thai: "มือ", phonetic: "មឺ", khmer: "ដៃ", english: "Hand" },
                { thai: "ฟัน", phonetic: "ហ្វាន់", khmer: "ធ្មេញ", english: "Tooth" },
                { thai: "เลือด", phonetic: "លឿត", khmer: "ឈាម", english: "Blood" },
                { thai: "กระดูก", phonetic: "ក្រៈឌូក", khmer: "ឆ្អឹង", english: "Bone" },
                { thai: "หัวใจ", phonetic: "ហួ ចៃ", khmer: "បេះដូង", english: "Heart" },
                { thai: "ตับ", phonetic: "តាប់", khmer: "ថ្លើម", english: "Liver" },
                { thai: "ปอด", phonetic: "ប៉ត", khmer: "សួត", english: "Lung" },
                { thai: "ลิ้น", phonetic: "លីន", khmer: "អណ្ដាត", english: "Tongue" },
                { thai: "สมอง", phonetic: "សៈម៉ង", khmer: "ខួរក្បាល", english: "Brain" },
                { thai: "ไหล่", phonetic: "ហ្លៃ", khmer: "ស្មា", english: "Shoulder" },
                { thai: "คอ", phonetic: "ខ", khmer: "ក", english: "Neck / Throat" },
                { thai: "ข้อศอก", phonetic: "ខ សក", khmer: "កែងដៃ", english: "Elbow" },
                { thai: "ข้อมือ", phonetic: "ខ មឺ", khmer: "កដៃ", english: "Wrist" },
                { thai: "ข้อเท้า", phonetic: "ខ ថៅ", khmer: "កជើង", english: "Ankle" },
                { thai: "ขา", phonetic: "ខា", khmer: "ជើង", english: "Leg" },
                { thai: "แขน", phonetic: "ខែន", khmer: "ដៃ (កំភួនដៃ)", english: "Arm" },
                { thai: "ปาก", phonetic: "ប៉ាក", khmer: "មាត់", english: "Mouth / Lips" },
                { thai: "จมูก", phonetic: "ចៈម៉ូក", khmer: "ច្រមុះ", english: "Nose" },
                { thai: "หู", phonetic: "ហូ", khmer: "ត្រចៀក", english: "Ear" },
                { thai: "ผม", phonetic: "ផម", khmer: "សក់", english: "Hair" },
                { thai: "เล็บ", phonetic: "លេប", khmer: "ក្រចក", english: "Nail" },
                { thai: "ฝ่ามือ", phonetic: "ហ្វា មឺ", khmer: "បាតដៃ", english: "Palm Hand" },
                { thai: "หน้า", phonetic: "ណា", khmer: "មុខ", english: "Face" },
                { thai: "คิ้ว", phonetic: "ឃិវ", khmer: "ចិញ្ចើម", english: "Eyebrow" },
                { thai: "สะโพก", phonetic: "សៈផូក", khmer: "ត្រគាក", english: "Hip" },
                { thai: "คาง", phonetic: "ខាង", khmer: "ចង្កា", english: "Chin" },
                { thai: "เครา", phonetic: "ក្រៅ", khmer: "ពុកមាត់", english: "Beard" },
                { thai: "นิ้ว", phonetic: "ណិវ", khmer: "ម្រាមដៃ", english: "Finger" },
                { thai: "ติ่งหู", phonetic: "តិ่ง ហូ", khmer: "ក្រវិលត្រចៀក", english: "Earlobe" },
                { thai: "หน้าผาก", phonetic: "ណា ផាក", khmer: "ថ្ងាស", english: "Forehead" },
                { thai: "หนวด", phonetic: "ណួត", khmer: "ពុកមាត់", english: "Mustache" },
                { thai: "อวัยวะ", phonetic: "អៈវ៉ៃយ៉ៈវ៉ៈ", khmer: "សរីរាង្គ", english: "Organ of the Body" },
                { thai: "ท้อง", phonetic: "ថង", khmer: "ពោះ", english: "Abdomen / Belly" },
                { thai: "ผิว", phonetic: "ភិវ", khmer: "ស្បែក", english: "Skin Surface" },
                { thai: "นิ้วก้อย", phonetic: "ណិវ កយ", khmer: "ម្រាមដៃកូន", english: "Little Finger" },
                { thai: "นิ้วนาง", phonetic: "ណិវ ណាង", khmer: "ម្រាមដៃនាង", english: "Ring Finger" },
                { thai: "นิ้วกลาง", phonetic: "ណិវ កាង", khmer: "ម្រាមដៃកណ្ដាល", english: "Middle Finger" },
                { thai: "นิ้วโป้ง", phonetic: "ណិវ ប៉ុង", khmer: "ម្រាមដៃមេ", english: "Thumb" },
                { thai: "ขนตา", phonetic: "ខន តា", khmer: "រោមភ្នែក", english: "Eyelash" },
                { thai: "เปลือกตา", phonetic: "ប្លឿក តា", khmer: "ត្របកភ្នែក", english: "Eyelid" },
                { thai: "ไต", phonetic: "តៃ", khmer: "តម្រងនោម", english: "Kidney" },
                { thai: "ภูมิคุ้มกัน", phonetic: "ភូមិ ឃុំក័ន", khmer: "ប្រព័ន្ធភាពស៊ាំ", english: "Immunity" },
                { thai: "ไขมัน", phonetic: "ខៃ ម៉ាន់", khmer: "ខ្លាញ់", english: "Fat (in Food / Human / Animal)" },
                { thai: "ประสาท", phonetic: "ប្រៈសាត", khmer: "សរសៃប្រសាទ", english: "Nerve" },
                { thai: "หลอดเลือด", phonetic: "ហ្លត លឿត", khmer: "សរសៃឈាម", english: "Blood vessel" },
                { thai: "กล้ามเนื้อ", phonetic: "ក្លាំ នឿ", khmer: "សាច់ដុំ", english: "Muscle" },
                { thai: "ไส้", phonetic: "សៃ", khmer: "ពោះវៀន", english: "Intestine" },
                { thai: "สันหลัง", phonetic: "ស័ន ហ្លាំង", khmer: "ឆ្អឹងខ្នង", english: "Spine" },
                { thai: "ส้น", phonetic: "សន់", khmer: "កែងជើង", english: "Heel" },
                { thai: "ลำคอ", phonetic: "ឡាំ ខ", khmer: "បំពង់ក", english: "Throat" },
                { thai: "ข้อต่อ", phonetic: "ខ ត", khmer: "សន្លាក់", english: "Joint" },
                { thai: "เส้นเลือดแดง", phonetic: "សេន លឿត ដែង", khmer: "សរសៃឈាមក្រហម", english: "Artery" },
                { thai: "ไส้ติ่ง", phonetic: "សៃ តិ่ง", khmer: "ពោះវៀនខ្នែង", english: "Appendix organ" },
                { thai: "ลักยิ้ม", phonetic: "ឡាក់ យីម", khmer: "ខ្នួចថ្ពាល់", english: "Dimple" },
                // Colors
                { thai: "สีสัน", phonetic: "ស៊ី ស័ន", khmer: "ពណ៌", english: "Color" },
                { thai: "สีม่วง", phonetic: "ស៊ី ម៉ួង", khmer: "ពណ៌ស្វាយ", english: "Violet / Purple" },
                { thai: "สีเทา", phonetic: "ស៊ី ថៅ", khmer: "ពណ៌ប្រផេះ", english: "Grey" },
                { thai: "สีดำ", phonetic: "ស៊ី ដាំ", khmer: "ពណ៌ខ្មៅ", english: "Black" },
                { thai: "สีขาว", phonetic: "ស៊ី ខាវ", khmer: "ពណ៌ស", english: "White" },
                { thai: "สีชมพู", phonetic: "ស៊ី ឆុំភូ", khmer: "ពណ៌ផ្កាឈូក", english: "Pink" },
                { thai: "สีเหลือง", phonetic: "ស៊ី ហ្លឿង", khmer: "ពណ៌លឿង", english: "Yellow" },
                { thai: "สีเขียว", phonetic: "ស៊ី ខៀវ", khmer: "ពណ៌បៃតង", english: "Green" },
                { thai: "สีน้ำเงิน", phonetic: "ស៊ី ណាំ ងើន", khmer: "ពណ៌ខៀវចាស់", english: "Dark Blue" },
                { thai: "สีฟ้า", phonetic: "ស៊ី ហ្វា", khmer: "ពណ៌ខៀវខ្ចី", english: "Blue Sky" },
                { thai: "สีแดง", phonetic: "ស៊ី ដែង", khmer: "ពណ៌ក្រហម", english: "Red" },
                { thai: "สีส้ม", phonetic: "ស៊ី សុំ", khmer: "ពណ៌ទឹកក្រូច", english: "Orange (Fruit / Color)" },
                { thai: "สีน้ำตาล", phonetic: "ស៊ី ណាំ តាន", khmer: "ពណ៌ត្នោត", english: "Sugar Brown" }, // Assuming "Sugar Brown" refers to brown color
                // Plants
                { thai: "อ้อย", phonetic: "អយ", khmer: "អំពៅ", english: "Sugar cane" },
                { thai: "กัญชา", phonetic: "ក័នឆា", khmer: "កញ្ឆា", english: "Marijuana" },
                { thai: "คาโมมายล์", phonetic: "ខាម៉ូម៉ាយ", khmer: "ផ្កាខាម៉ូម៉ាយ", english: "Chamomile" },
                { thai: "เปปเปอร์มินต์", phonetic: "ប៉េបប៉ឺមីន", khmer: "ជីអង្កាម", english: "Peppermint" },
                { thai: "ไม้ไผ่", phonetic: "ម៉ៃ ផៃ", khmer: "ឫស្សី", english: "Bamboo" },
                { thai: "บัว", phonetic: "បួ", khmer: "ឈូក", english: "Lotus" },
                { thai: "ปาล์ม", phonetic: "ប៉ាម", khmer: "ដើមត្នោត", english: "Palm Tree" },
                { thai: "ว่านหางจระเข้", phonetic: "វ៉ាន ហាង ចរៈខេ", khmer: "ប្រទាលកន្ទុយក្រពើ", english: "Aloe vera" },
                { thai: "ใบไม้", phonetic: "បៃ ម៉ៃ", khmer: "ស្លឹកឈើ", english: "Leaf" },
                { thai: "หญ้า", phonetic: "យ៉ា", khmer: "ស្មៅ", english: "Grass" },
                { thai: "ตะไคร้", phonetic: "តៈក្រៃ", khmer: "គល់ស្លឹកគ្រៃ", english: "Lemon grass" },
                { thai: "ข่า", phonetic: "ខា", khmer: "រំដេង", english: "Galangal" },
                { thai: "ต้นปาล์ม", phonetic: "តន ប៉ាម", khmer: "ដើមត្នោត", english: "Palm Tree" },
                { thai: "ลาเวนเดอร์", phonetic: "ឡាវ៉េនឌឺ", khmer: "ផ្កាឡាវ៉េនឌឺ", english: "Lavender" },
                { thai: "เมเปิล", phonetic: "មេបិល", khmer: "ដើមម៉េផល", english: "Maple" },
                { thai: "กระบองเพชร", phonetic: "ក្រៈបង ផេត", khmer: "ដើមត្រសក់ផ្អែម", english: "Cactus" },
                { thai: "ดอกทานตะวัน", phonetic: "ដក ថាន តៈវ៉ាន់", khmer: "ផ្កាឈូករ័ត្ន", english: "Sunflower" },
                { thai: "ถั่ว", phonetic: "ធួ", khmer: "សណ្តែក", english: "Pea / Bean" },
                { thai: "กุหลาบ", phonetic: "គុឡាប", khmer: "ផ្កាកុលាប", english: "Rose" },
                { thai: "ทิวลิป", phonetic: "ធីវលិប", khmer: "ផ្កាធូលីប", english: "Tulip" },
                { thai: "ดอกไม้", phonetic: "ដក ម៉ៃ", khmer: "ផ្កា", english: "Flower" },
                { thai: "ใบตอง", phonetic: "បៃ តង", khmer: "ស្លឹកចេក", english: "Banana leaf" },
                { thai: "พริก", phonetic: "ផ្រិក", khmer: "ម្ទេស", english: "Chilli" },
                { thai: "กะเพรา", phonetic: "ក្រៈផៅ", khmer: "ស្លឹកក្រូចសើច", english: "Holy basil" },
                { thai: "เห็ด", phonetic: "ហេត", khmer: "ផ្សិត", english: "Mushroom" },
                { thai: "มันฝรั่ง", phonetic: "ម៉ាន់ ហ្វារាំង", khmer: "ដំឡូងបារាំង", english: "Potato" },
                // Food and Taste
                { thai: "ขม", phonetic: "ខម", khmer: "ល្វីង", english: "Bitter Taste" },
                { thai: "วุ้นเส้น", phonetic: "វុន សេន", khmer: "មីសរសៃកែវ", english: "Glass Noodle" },
                { thai: "ข้าวเหนียว", phonetic: "ខាវ ណៀវ", khmer: "បាយដំណើប", english: "Sticky Rice" },
                { thai: "เนื้อสัตว์", phonetic: "នឿ សាត់", khmer: "សាច់", english: "Meat" },
                { thai: "ข้าวต้ม", phonetic: "ខាវ តម", khmer: "បបរ", english: "Rice soup" },
                { thai: "เค็ม", phonetic: "ខេម", khmer: "ប្រៃ", english: "Salty" },
                { thai: "ไก่ย่าง", phonetic: "កៃ យ៉ាង", khmer: "មាន់អាំង", english: "Grilled Chicken" },
                { thai: "หมากฝรั่ง", phonetic: "ម៉ាក ហ្វារាំង", khmer: "ស្ករកៅស៊ូ", english: "Chewing gum" },
                { thai: "ลูกอม", phonetic: "លូក អម", khmer: "ស្ករគ្រាប់", english: "Candy" },
                { thai: "ยำ", phonetic: "យ៉ាំ", khmer: "សាឡាត់ហឹរ", english: "Spicy salad" },
                { thai: "น้ำผลไม้", phonetic: "ណាំ ផុនឡៈម៉ៃ", khmer: "ទឹកផ្លែឈើ", english: "Juice" },
                { thai: "ต้ม", phonetic: "តម", khmer: "ស្ងោរ", english: "To boil Soup" },
                { thai: "เนยแข็ง", phonetic: "ណឺយ ខែង", khmer: "ឈីស", english: "Cheese" },
                { thai: "มะกอก", phonetic: "ម៉ៈកក", khmer: "អូលីវ", english: "Olive" },
                { thai: "กินข้าว", phonetic: "គិន ខាវ", khmer: "ញ៉ាំបាយ", english: "To have a Meal" },
                { thai: "บาร์บีคิว", phonetic: "បាប៊ីឃ្យូ", khmer: "បាប៊ីឃ្យូ", english: "BBQ" },
                { thai: "วาฟเฟิล", phonetic: "វ៉ាហ្វហ្វឺល", khmer: "វ៉ាហ្វហ្វឺល", english: "Waffle" },
                { thai: "โภชนาการ", phonetic: "ផូឆៈណាការ", khmer: "អាហារូបត្ថម្ភ", english: "Nutrition" },
                { thai: "ตู้เย็น", phonetic: "ទូ យេន", khmer: "ទូទឹកកក", english: "Fridge" },
                { thai: "เนื้อวัว", phonetic: "នឿ វួ", khmer: "សាច់គោ", english: "Beef" },
                { thai: "น้ำปลา", phonetic: "ណាំ ប្លា", khmer: "ទឹកត្រី", english: "Fish Sauce" },
                { thai: "เกลือ", phonetic: "ក្លឿ", khmer: "អំបិល", english: "Salt" },
                { thai: "ไข่", phonetic: "ខៃ", khmer: "ពងមាន់", english: "Egg" },
                { thai: "ไส้กรอก", phonetic: "សៃ ក្រក", khmer: "សាច់ក្រក", english: "Sausage" },
                { thai: "แซนวิช", phonetic: "សែនវីច", khmer: "នំប៉័ងសាំងវិច", english: "Sandwich" },
                { thai: "น้ำผึ้ง", phonetic: "ណាំ ភឹង", khmer: "ទឹកឃ្មុំ", english: "Honey" },
                { thai: "ลำไย", phonetic: "ឡាំយ៉ៃ", khmer: "មៀន", english: "Longan" },
                { thai: "ปลาแซลมอน", phonetic: "ប្លា សែលម៉ន", khmer: "ត្រីសាល់ម៉ុន", english: "Salmon" },
                { thai: "หอยนางรม", phonetic: "ហយ ណាងរម", khmer: "អយស្ទ័រ", english: "Oyster" },
                { thai: "ปลากะพง", phonetic: "ប្លា កៈផុង", khmer: "ត្រីកាប៉ុង", english: "Sea Bass" },
                { thai: "ปลา", phonetic: "ប្លា", khmer: "ត្រី", english: "Fish" },
                { thai: "ไก่งวง", phonetic: "កៃ ងួង", khmer: "មាន់ទួរគី", english: "Turkey Animal" },
                { thai: "ส้มตำ", phonetic: "សុំ តាំ", khmer: "បុកល្ហុង", english: "Som Tum / Papaya Salad" },
                { thai: "กระเทียม", phonetic: "ក្រៈធៀម", khmer: "ខ្ទឹមស", english: "Garlic" },
                { thai: "กุ้ง", phonetic: "កុង", khmer: "បង្គា", english: "Shrimp" },
                { thai: "ต้มยำ", phonetic: "តម យ៉ាំ", khmer: "ស៊ុបត้มយាំ", english: "Tom Yum (Hot and sour Soup)" },
                { thai: "เมนู", phonetic: "មេនូ", khmer: "បញ្ជីមុខម្ហូប", english: "Menu" },
                { thai: "อร่อย", phonetic: "អរ่อย", khmer: "ឆ្ងាញ់", english: "Delicious / Tasty" },
                { thai: "หมู", phonetic: "ម៉ូ", khmer: "សាច់ជ្រូក", english: "Pork" },
                { thai: "เนื้อ", phonetic: "នឿ", khmer: "សាច់", english: "Meat / Beef" },
                { thai: "พิซซ่า", phonetic: "ភីតហ្សា", khmer: "ភីតហ្សា", english: "Pizza" },
                { thai: "ขนมปัง", phonetic: "ខៈណម ប៉ាំង", khmer: "នំប៉័ង", english: "Bread" },
                { thai: "มะละกอ", phonetic: "ម៉ៈឡៈក", khmer: "ល្ហុង", english: "Papaya" },
                { thai: "นม", phonetic: "ណម", khmer: "ទឹកដោះគោ", english: "Milk" },
                { thai: "ช็อกโกแลต", phonetic: "ឆក់កូឡែត", khmer: "សូកូឡា", english: "Chocolate" },
                { thai: "แกง", phonetic: "កែង", khmer: "ការី", english: "Curry" },
                { thai: "แมงกะพรุน", phonetic: "ម៉ែង កៈផ្រុន", khmer: "ចាហួយសមុទ្រ", english: "Jellyfish" },
                { thai: "หวาน", phonetic: "វ៉ាន", khmer: "ផ្អែម", english: "Sweet" },
                { thai: "ปลาหมึกยักษ์", phonetic: "ប្លា ម៉ឹក យ៉ាក់", khmer: "មឹក្សយក្ស", english: "Octopus" },
                { thai: "ปลาโลมา", phonetic: "ប្លា ឡូម៉ា", khmer: "ផ្សោត", english: "Dolphin" },
                // Animals
                { thai: "สัตว์ป่า", phonetic: "សាត់ ប៉ា", khmer: "សត្វព្រៃ", english: "Wild Animal" },
                { thai: "สุนัขจิ้งจอก", phonetic: "ស៊ុណាក់ ចិងចក", khmer: "កញ្ជ្រោង", english: "Fox" },
                { thai: "นกกระเรียน", phonetic: "ណក ក្រៈរៀន", khmer: "ក្រៀល", english: "Flamingo" },
                { thai: "ลูกหมา", phonetic: "លូក ម៉ា", khmer: "កូនឆ្កែ", english: "Puppy" },
                { thai: "เสือ", phonetic: "សឿ", khmer: "ខ្លា", english: "Tiger" },
                { thai: "กิ้งก่า", phonetic: "គិង កា", khmer: "ជីងចក់", english: "Chameleon Lizard" },
                { thai: "หนูแฮมสเตอร์", phonetic: "ណូ ហែមស្ទ័រ", khmer: "កណ្ដុរហែមស្ទ័រ", english: "Hamster" },
                { thai: "ลิงกอริลล่า", phonetic: "លីង ហ្គោរីឡា", khmer: "ស្វាហ្គោរីឡា", english: "Gorilla" },
                { thai: "ลิงชิมแปนซี", phonetic: "លីង ឈីមប៉ែនស៊ី", khmer: "ស្វាឈីមប៉ែនស៊ី", english: "Chimpanzee" },
                { thai: "นกฮูก", phonetic: "ណក ហូក", khmer: "សត្វទីទុយ", english: "Owl" },
                { thai: "หมาป่า", phonetic: "ម៉ា ប៉ា", khmer: "ឆ្កែចចក", english: "Wolf" },
                { thai: "สวนสัตว์", phonetic: "សួន សាត់", khmer: "សួនសត្វ", english: "Zoo" },
                { thai: "หมี", phonetic: "ម៉ី", khmer: "ខ្លាឃ្មុំ", english: "Bear" },
                { thai: "แมลงวัน", phonetic: "ម៉ៈឡែង វ៉ាន់", khmer: "រុយ", english: "Fly insect" },
                { thai: "ฮิปโปโปเตมัส", phonetic: "ហ៊ីបប៉ូ", khmer: "ហ៊ីបប៉ូ", english: "Hippopotamus" },
                { thai: "อูฐ", phonetic: "អូត", khmer: "អូដ្ឋ", english: "Camel" },
                { thai: "เหยี่ยว", phonetic: "យៀវ", khmer: "ឥន្ទ្រី", english: "Hawk" },
                { thai: "ห่าน", phonetic: "ហាន", khmer: "ក្ងាន", english: "Goose" },
                { thai: "หอยทาก", phonetic: "ហយ ថាក", khmer: "ខ្យង", english: "Snail" },
                { thai: "หอย", phonetic: "ហយ", khmer: "ខ្យង / ខ្ចៅ", english: "Shellfish" },
                { thai: "หนอน", phonetic: "ណន", khmer: "ដង្កូវ", english: "Worm" },
                { thai: "สิงโต", phonetic: "សិង្ហតោ", khmer: "តោ", english: "Lion" },
                { thai: "ลิง", phonetic: "លីង", khmer: "ស្វា", english: "Monkey" },
                { thai: "ยีราฟ", phonetic: "យីរ៉ាប", khmer: "សត្វកវែង", english: "Giraffe" },
                { thai: "แมวน้ำ", phonetic: "ម៉ែវ ណាំ", khmer: "ឆ្មាសមុទ្រ", english: "Seal" },
                { thai: "แมลงสาบ", phonetic: "ម៉ៈឡែង សាប", khmer: "កន្លាត", english: "Cockroach" },
                { thai: "แมลงปอ", phonetic: "ម៉ៈឡែង ប៉", khmer: "មេអំបៅ", english: "Dragonfly" },
                { thai: "แมงมุม", phonetic: "ម៉ែង មុំ", khmer: "ពីងពាង", english: "Spider" },
                { thai: "แมงป่อง", phonetic: "ម៉ែង ប៉ង", khmer: "ខ្យាដំរី", english: "Scorpion" },
                { thai: "ม้าลาย", phonetic: "ម៉ា ឡាយ", khmer: "សេះបង្កង់", english: "Zebra" },
                { thai: "ม้าน้ำ", phonetic: "ម៉ា ណាំ", khmer: "សេះសមុទ្រ", english: "Seahorse" },
                { thai: "ม้า", phonetic: "ម៉ា", khmer: "សេះ", english: "Horse" },
                { thai: "มด", phonetic: "ម៉ត", khmer: "ស្រមោច", english: "Ant" },
                { thai: "แพนด้า", phonetic: "ផែនដា", khmer: "ខ្លាឃ្មុំផែនដា", english: "Panda" },
                { thai: "เพนกวิน", phonetic: "ផេនក្វិន", khmer: "សត្វភេនឃ្វីន", english: "Penguin" },
                { thai: "ผีเสื้อ", phonetic: "ផី សឿ", khmer: "មេអំបៅ", english: "Butterfly" },
                { thai: "เป็ด", phonetic: "ពេត", khmer: "ទា", english: "Duck" },
                { thai: "ปลาหมึก", phonetic: "ប្លា ម៉ឹក", khmer: "មឹក", english: "Cuttlefish / Squid" },
                { thai: "ปลาทู", phonetic: "ប្លា ធូ", khmer: "ត្រីធូ", english: "Mackerel" },
                { thai: "ปลาทอง", phonetic: "ប្លា ថង", khmer: "ត្រីមាស", english: "Goldfish" },
                { thai: "ปลาดุก", phonetic: "ប្លា ឌុក", khmer: "ត្រីអណ្តើក", english: "Catfish" },
                { thai: "ปลาดาว", phonetic: "ប្លា ដាវ", khmer: "ត្រីផ្កាយ", english: "Starfish" },
                { thai: "ปลาฉลาม", phonetic: "ប្លា ឆៈឡាម", khmer: "ត្រីឆ្លាម", english: "Shark" },
                { thai: "ปลวก", phonetic: "ប្លួក", khmer: "កន្លាត", english: "Termite" },
                { thai: "นกอินทรี", phonetic: "ណក អ៊ិនទ្រី", khmer: "ឥន្ទ្រី", english: "Eagle" },
                { thai: "นกยูง", phonetic: "ណក យូង", khmer: "ក្ងោក", english: "Peacock" },
                { thai: "นกนางนวล", phonetic: "ណក ណាង នួន", khmer: "នាងនួន", english: "Seagull" },
                { thai: "นก", phonetic: "ណក", khmer: "បក្សី", english: "Bird" },
                { thai: "เต่า", phonetic: "តៅ", khmer: "អណ្តើក", english: "Turtle" },
                { thai: "ตั๊กแตน", phonetic: "តាក់កៈតែន", khmer: "កណ្តូប", english: "Grasshopper" },
                { thai: "ไดโนเสาร์", phonetic: "ដាយណូសៅ", khmer: "ដាយណូស័រ", english: "Dinosaur" },
                { thai: "ช้าง", phonetic: "ឆាង", khmer: "ដំរី", english: "Elephant" },
                { thai: "จิงโจ้", phonetic: "ចិងចូ", khmer: "កង់ហ្គូរូ", english: "Kangaroo" },
                { thai: "จิ้งจก", phonetic: "ចិងចក", khmer: "ជីងចក់", english: "Gecko" },
                { thai: "จระเข้", phonetic: "ចរៈខេ", khmer: "ក្រពើ", english: "Crocodile" },
                { thai: "งู", phonetic: "ងូ", khmer: "ពស់", english: "Snake" },
                { thai: "ค้างคาว", phonetic: "ខាង ខាវ", khmer: "ប្រចៀវ", english: "Bat" },
                { thai: "กวาง", phonetic: "ក្វាង", khmer: "ក្តាន់", english: "Deer" },
                { thai: "กระรอก", phonetic: "ក្រៈរ៉ក", khmer: "កំប្រុក", english: "Squirrel" },
                { thai: "กระต่าย", phonetic: "ក្រៈតាយ", khmer: "ទន្សាយ", english: "Rabbit" },
                { thai: "กบ", phonetic: "កប", khmer: "កង្កែប", english: "Frog" },
                { thai: "แมว", phonetic: "ម៉ែវ", khmer: "ឆ្មា", english: "Cat" },
                // Geography
                { thai: "ทะเล", phonetic: "ថៈលេ", khmer: "សមុទ្រ", english: "Sea" },
                { thai: "ทะเลสาบ", phonetic: "ថៈលេ សាប", khmer: "បឹង", english: "Lake / Lagoon" },
                { thai: "ทะเลทราย", phonetic: "ថៈលេ សាយ", khmer: "វាលខ្សាច់", english: "Desert" },
                { thai: "สะพาน", phonetic: "សៈផាន", khmer: "ស្ពាន", english: "Bridge" },
                { thai: "แม่น้ำ", phonetic: "ម៉ែ ណាំ", khmer: "ទន្លេ", english: "River" }
            ];

            // Combine existing flashcard data with new vocabulary
            const allFlashcardData = [...flashcardData, ...uploadedVocabulary];

            // Function to apply translations based on the selected language
            function applyTranslations() {
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[currentLanguage] && translations[currentLanguage][key]) {
                        element.textContent = translations[currentLanguage][key];
                    }
                });
                // Update specific elements that might not use data-translate directly for their value
                document.documentElement.lang = currentLanguage; // Update HTML lang attribute
                // Update placeholder for AI prompt input
                const aiPromptInput = document.getElementById('ai-prompt-input');
                if (aiPromptInput) {
                    if (currentLanguage === 'km') {
                        aiPromptInput.placeholder = "ឧទាហរណ៍: ពាក្យអំពីអាហារ 5, ប្រយោគអំពីការធ្វើដំណើរ 3";
                    } else if (currentLanguage === 'en') {
                        aiPromptInput.placeholder = "Example: 5 words about food, 3 sentences about travel";
                    } else if (currentLanguage === 'th') {
                        aiPromptInput.placeholder = "ตัวอย่าง: 5 คำเกี่ยวกับอาหาร, 3 ประโยคเกี่ยวกับการเดินทาง";
                    }
                }
            }

            // Function to switch between sections
            function switchSection(sectionId) {
                showLoadingSpinner();
                const sections = document.querySelectorAll('.app-section');
                sections.forEach(section => {
                    section.classList.add('hidden');
                });
                document.getElementById(`${sectionId}-section`).classList.remove('hidden');

                const navButtons = document.querySelectorAll('.nav-button');
                navButtons.forEach(button => {
                    button.classList.remove('active', 'bg-blue-200', 'text-blue-800', 'font-semibold');
                });
                document.querySelector(`.nav-button[data-section="${sectionId}"]`).classList.add('active', 'bg-blue-200', 'text-blue-800', 'font-semibold');

                // Dynamically load content for specific sections when they become active
                if (sectionId === 'kindergarten') {
                    generateLessons('kindergarten-lessons-container', kindergartenLessons);
                } else if (sectionId === 'beginner') {
                    generateLessons('beginner-lessons-container', beginnerLessons);
                } else if (sectionId === 'intermediate') {
                    generateLessons('intermediate-lessons-container', intermediateLessons);
                } else if (sectionId === 'advanced') {
                    generateLessons('advanced-lessons-container', advancedLessons);
                } else if (sectionId === 'alphabet') {
                    generateAlphabetCards('consonants-container', thaiConsonants, document.getElementById('consonant-sort-by').value);
                    generateAlphabetCards('vowels-container', thaiVowels, document.getElementById('vowel-sort-by').value);
                } else if (sectionId === 'exam') {
                    generateExamQuestions('exam-questions-container', examQuestions);
                } else if (sectionId === 'flashcards') {
                    generateFlashcards('current-flashcard-wrapper', allFlashcardData); // Use allFlashcardData
                }
                hideLoadingSpinner();
            }

            // Function to speak text using Web Speech API
            function speakText(text, lang) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = lang; // 'th-TH' for Thai, 'km-KH' for Khmer (may vary by browser), 'en-US' for English
                    if (lang === 'th') {
                        utterance.lang = 'th-TH';
                    } else if (lang === 'km') {
                        // Khmer language support is often limited or requires specific voices.
                        // We'll try 'en-US' as a fallback or if a specific Khmer voice isn't available.
                        // For better Khmer pronunciation, a dedicated Khmer TTS library might be needed.
                        utterance.lang = 'en-US'; // Fallback to English for phonetic
                    } else if (lang === 'en') {
                        utterance.lang = 'en-US';
                    }
                    speechSynthesis.speak(utterance);
                } else {
                    console.warn("Speech synthesis not supported in this browser.");
                    // In a real app, you might display a message to the user
                    // alert("Speech synthesis is not supported in your browser. Please try Chrome or Edge.");
                }
            }

            // Function to create a lesson card HTML
            function createLessonCard(lesson) {
                const div = document.createElement('div');
                div.className = 'bg-blue-50 p-4 rounded-lg shadow-sm flex flex-col sm:flex-row items-start sm:items-center justify-between';
                div.innerHTML = `
                    <div class="mb-4 sm:mb-0 sm:mr-4">
                        <p class="text-2xl font-bold text-blue-800">${lesson.thai}</p>
                        <p class="text-lg text-gray-700">${lesson.phonetic}</p>
                        <p class="text-lg text-gray-700">${lesson.khmer}</p>
                        <p class="text-md text-gray-500">${lesson.english}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="${lesson.thai}">
                            <i class="fas fa-volume-up text-xl"></i>
                        </button>
                        <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${lesson.khmer}">
                            <i class="fas fa-comment-dots text-xl"></i>
                        </button>
                    </div>
                `;
                return div;
            }

            // Function to generate lessons for a given container
            function generateLessons(containerId, lessonsData) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear previous content
                lessonsData.forEach(lesson => {
                    container.appendChild(createLessonCard(lesson));
                });
                // Add event listeners for new audio buttons
                container.querySelectorAll('.play-audio-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.thaiText, 'th');
                });
                container.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.khmerPhoneticText, 'km');
                });
            }

            // Function to create an alphabet card HTML
            function createAlphabetCard(charData) {
                const div = document.createElement('div');
                div.className = 'bg-blue-50 p-4 rounded-lg shadow-sm flex flex-col items-center justify-center text-center';
                div.innerHTML = `
                    <p class="text-4xl font-bold text-blue-800 mb-2">${charData.thaiChar}</p>
                    <p class="text-lg text-gray-700">${charData.phoneticTranscription}</p>
                    <p class="text-md text-gray-700">${charData.khmerMeaning}</p>
                    <p class="text-sm text-gray-500">${charData.englishMeaning}</p>
                    <div class="flex items-center space-x-2 mt-3">
                        <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-md transition-colors duration-200 text-lg" data-thai-text="${charData.thaiChar}">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-full shadow-md transition-colors duration-200 text-lg" data-khmer-phonetic-text="${charData.khmerMeaning}">
                            <i class="fas fa-comment-dots"></i>
                        </button>
                    </div>
                `;
                return div;
            }

            // Function to generate alphabet cards with sorting
            function generateAlphabetCards(containerId, alphabetData, sortBy) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear previous content

                const sortedData = [...alphabetData].sort((a, b) => {
                    if (sortBy === 'thaiChar') {
                        return a.thaiChar.localeCompare(b.thaiChar, 'th');
                    } else if (sortBy === 'phoneticTranscription') {
                        return a.phoneticTranscription.localeCompare(b.phoneticTranscription, 'km');
                    } else if (sortBy === 'khmerMeaning') {
                        return a.khmerMeaning.localeCompare(b.khmerMeaning, 'km');
                    } else if (sortBy === 'englishMeaning') {
                        return a.englishMeaning.localeCompare(b.englishMeaning, 'en');
                    }
                    return 0;
                });

                sortedData.forEach(charData => {
                    container.appendChild(createAlphabetCard(charData));
                });

                // Add event listeners for new audio buttons
                container.querySelectorAll('.play-audio-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.thaiText, 'th');
                });
                container.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.khmerPhoneticText, 'km');
                });
            }

            // Function to create an exam question HTML
            function createExamQuestion(question, index) {
                const div = document.createElement('div');
                div.className = 'bg-blue-50 p-4 rounded-lg shadow-sm';
                let questionHtml = '';
                let questionText = '';

                if (currentLanguage === 'km') {
                    questionText = question.khmerQuestion;
                } else if (currentLanguage === 'en') {
                    questionText = question.englishQuestion;
                } else { // th
                    questionText = question.thaiQuestion;
                }

                questionHtml += `<p class="text-lg font-semibold text-gray-800 mb-3">សំណួរ ${index + 1}: ${questionText}</p>`;

                if (question.type === 'multiple-choice') {
                    question.options.forEach((option, optIndex) => {
                        let optionText = '';
                        if (currentLanguage === 'km') {
                            optionText = option.khmer;
                        } else if (currentLanguage === 'en') {
                            optionText = option.english;
                        } else { // th
                            optionText = option.thai;
                        }
                        questionHtml += `
                            <label class="block mb-2 cursor-pointer">
                                <input type="radio" name="question-${index}" value="${optIndex}" class="mr-2 form-radio text-blue-600">
                                <span class="text-gray-700">${optionText}</span>
                            </label>
                        `;
                    });
                } else if (question.type === 'matching') {
                    questionHtml += `<p class="text-gray-600 mb-4" data-translate="match_instructions">${translations[currentLanguage]['match_instructions']}</p>`;
                    const thaiWords = question.pairs.map(p => p.thai);
                    const khmerWords = question.pairs.map(p => p.khmer).sort(() => Math.random() - 0.5); // Shuffle Khmer words

                    questionHtml += `<div class="grid grid-cols-2 gap-4 mt-4">`;
                    questionHtml += `<div class="flex flex-col space-y-2">`;
                    thaiWords.forEach((word, i) => {
                        questionHtml += `<div class="bg-blue-100 p-3 rounded-md text-blue-800 font-medium text-center" data-thai-word="${word}">${word}</div>`;
                    });
                    questionHtml += `</div>`;
                    questionHtml += `<div class="flex flex-col space-y-2">`;
                    khmerWords.forEach((word, i) => {
                        questionHtml += `<div class="bg-gray-200 p-3 rounded-md text-gray-700 font-medium text-center draggable-item" draggable="true" data-khmer-word="${word}">${word}</div>`;
                    });
                    questionHtml += `</div>`;
                    questionHtml += `</div>`;
                    questionHtml += `<div id="drop-areas-${index}" class="grid grid-cols-2 gap-4 mt-4">`;
                    thaiWords.forEach((word, i) => {
                        questionHtml += `
                            <div class="bg-gray-100 border-2 border-dashed border-gray-300 p-3 rounded-md flex items-center justify-center h-12 droppable-area" data-target-thai="${word}">
                                <span class="text-gray-500">Drop Khmer word here</span>
                            </div>
                        `;
                    });
                    questionHtml += `</div>`;
                }

                div.innerHTML = questionHtml;
                return div;
            }

            // Function to generate exam questions
            function generateExamQuestions(containerId, questionsData) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear previous content
                currentExamAnswers = {}; // Reset answers

                questionsData.forEach((question, index) => {
                    const questionElement = createExamQuestion(question, index);
                    container.appendChild(questionElement);

                    if (question.type === 'matching') {
                        const draggableItems = questionElement.querySelectorAll('.draggable-item');
                        const droppableAreas = questionElement.querySelectorAll('.droppable-area');
                        let draggedItem = null;

                        draggableItems.forEach(item => {
                            item.addEventListener('dragstart', (e) => {
                                draggedItem = item;
                                e.dataTransfer.setData('text/plain', item.dataset.khmerWord);
                                setTimeout(() => item.classList.add('opacity-50'), 0);
                            });
                            item.addEventListener('dragend', () => {
                                draggedItem.classList.remove('opacity-50');
                                draggedItem = null;
                            });
                        });

                        droppableAreas.forEach(area => {
                            area.addEventListener('dragover', (e) => {
                                e.preventDefault();
                                area.classList.add('border-blue-500', 'bg-blue-50');
                            });
                            area.addEventListener('dragleave', () => {
                                area.classList.remove('border-blue-500', 'bg-blue-50');
                            });
                            area.addEventListener('drop', (e) => {
                                e.preventDefault();
                                area.classList.remove('border-blue-500', 'bg-blue-50');
                                const khmerWord = e.dataTransfer.getData('text/plain');
                                const targetThai = area.dataset.targetThai;

                                // Prevent dropping if area already has content
                                if (area.children.length > 0 && area.children[0].classList.contains('dropped-item')) {
                                    return;
                                }

                                const droppedItem = document.createElement('div');
                                droppedItem.className = 'bg-green-100 p-2 rounded-md text-green-800 font-medium text-center dropped-item';
                                droppedItem.textContent = khmerWord;
                                area.innerHTML = ''; // Clear "Drop here" text
                                area.appendChild(droppedItem);

                                // Store the match
                                if (!currentExamAnswers[index]) {
                                    currentExamAnswers[index] = {};
                                }
                                currentExamAnswers[index][targetThai] = khmerWord;

                                // Remove the dragged item from its original place
                                if (draggedItem) {
                                    draggedItem.remove();
                                }
                            });
                        });
                    }
                });

                // Show submit button
                document.getElementById('exam-submit-button').classList.remove('hidden');
                document.getElementById('exam-result').classList.add('hidden'); // Hide previous results
            }

            // Function to check exam answers
            function checkExamAnswers() {
                let correctCount = 0;
                const examResultDiv = document.getElementById('exam-result');
                examResultDiv.innerHTML = ''; // Clear previous results

                examQuestions.forEach((question, index) => {
                    const questionElement = document.querySelector(`#exam-questions-container > div:nth-child(${index + 1})`);
                    const resultP = document.createElement('p');
                    resultP.className = 'mb-2 p-2 rounded-md';

                    if (question.type === 'multiple-choice') {
                        const selectedOption = questionElement.querySelector(`input[name="question-${index}"]:checked`);
                        const userAnswer = selectedOption ? parseInt(selectedOption.value) : null;
                        const correctAnswer = question.correctAnswerIndex;

                        if (userAnswer === correctAnswer) {
                            correctCount++;
                            resultP.classList.add('bg-green-100', 'text-green-800');
                            resultP.textContent = `${translations[currentLanguage]['answer_correct']} (${question.options[correctAnswer].thai})`;
                        } else {
                            resultP.classList.add('bg-red-100', 'text-red-800');
                            let incorrectText = translations[currentLanguage]['answer_incorrect'];
                            if (userAnswer !== null) {
                                incorrectText += ` (${question.options[userAnswer].thai})`;
                            }
                            resultP.textContent = `${incorrectText}. ${translations[currentLanguage]['the_correct_answer_was']}: ${question.options[correctAnswer].thai}`;
                        }
                    } else if (question.type === 'matching') {
                        let allMatchesCorrect = true;
                        question.pairs.forEach(pair => {
                            const droppedKhmerWord = currentExamAnswers[index] ? currentExamAnswers[index][pair.thai] : undefined;
                            if (droppedKhmerWord !== pair.khmer) {
                                allMatchesCorrect = false;
                            }
                        });

                        if (allMatchesCorrect) {
                            correctCount++;
                            resultP.classList.add('bg-green-100', 'text-green-800');
                            resultP.textContent = `${translations[currentLanguage]['answer_correct']} (Matching)`;
                        } else {
                            resultP.classList.add('bg-red-100', 'text-red-800');
                            resultP.textContent = `${translations[currentLanguage]['answer_incorrect']} (Matching).`;
                            question.pairs.forEach(pair => {
                                const droppedKhmerWord = currentExamAnswers[index] ? currentExamAnswers[index][pair.thai] : 'N/A';
                                resultP.textContent += ` ${pair.thai} -> ${droppedKhmerWord} (Correct: ${pair.khmer})`;
                            });
                        }
                    }
                    examResultDiv.appendChild(resultP);
                });

                const totalQuestions = examQuestions.length;
                const scorePercentage = (correctCount / totalQuestions) * 100;

                const finalScoreP = document.createElement('p');
                finalScoreP.className = 'mt-4 text-xl font-bold';
                finalScoreP.textContent = `${translations[currentLanguage]['your_score']} ${correctCount}/${totalQuestions} (${scorePercentage.toFixed(2)}%)`;
                examResultDiv.appendChild(finalScoreP);

                const retryButton = document.createElement('button');
                retryButton.className = 'exam-submit-button mt-4';
                retryButton.textContent = translations[currentLanguage]['retry_exam'];
                retryButton.onclick = () => generateExamQuestions('exam-questions-container', examQuestions);
                examResultDiv.appendChild(retryButton);

                examResultDiv.classList.remove('hidden');
                document.getElementById('exam-submit-button').classList.add('hidden'); // Hide submit button after showing results
            }

            // Function to create a flashcard HTML
            function createFlashcard(cardData) {
                const div = document.createElement('div');
                div.className = 'flashcard-inner w-full h-full';
                div.innerHTML = `
                    <div class="flashcard-face flashcard-front">
                        <p class="text-4xl font-bold mb-4">${cardData.thai}</p>
                        <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="${cardData.thai}">
                            <i class="fas fa-volume-up text-xl"></i>
                        </button>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <p class="text-2xl font-bold mb-2">${cardData.khmer}</p>
                        <p class="text-xl text-gray-700 mb-2">${cardData.phonetic}</p>
                        <p class="text-lg text-gray-500 mb-4">${cardData.english}</p>
                        <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${cardData.khmer}">
                            <i class="fas fa-comment-dots text-xl"></i>
                        </button>
                    </div>
                `;
                return div;
            }

            // Function to generate flashcards
            function generateFlashcards(containerId, flashcards) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear previous content
                if (flashcards.length === 0) {
                    container.innerHTML = '<p class="text-gray-600">No flashcards available.</p>';
                    document.getElementById('prev-flashcard-button').classList.add('hidden');
                    document.getElementById('next-flashcard-button').classList.add('hidden');
                    return;
                }

                // Shuffle the flashcards
                const shuffledFlashcards = [...flashcards].sort(() => Math.random() - 0.5);

                currentFlashcardIndex = 0;
                const currentCardElement = createFlashcard(shuffledFlashcards[currentFlashcardIndex]);
                container.appendChild(currentCardElement);

                // Add event listeners for audio buttons on the current card
                currentCardElement.querySelectorAll('.play-audio-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.thaiText, 'th');
                });
                currentCardElement.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                    button.onclick = () => speakText(button.dataset.khmerPhoneticText, 'km');
                });

                // Add flip functionality
                container.onclick = (event) => {
                    if (!event.target.closest('button')) { // Don't flip if a button is clicked
                        currentCardElement.classList.toggle('rotate-y-180');
                    }
                };

                document.getElementById('prev-flashcard-button').classList.remove('hidden');
                document.getElementById('next-flashcard-button').classList.remove('hidden');
            }

            // Function to generate AI lessons
            async function generateAILesson() {
                const promptInput = document.getElementById('ai-prompt-input');
                const outputContainer = document.getElementById('ai-lesson-output');
                const prompt = promptInput.value.trim();

                if (!prompt) {
                    outputContainer.innerHTML = '<p class="text-red-500">សូមបញ្ចូលប្រធានបទ ឬសំណួរដើម្បីបង្កើតមេរៀន។</p>';
                    return;
                }

                showLoadingSpinner();
                outputContainer.innerHTML = ''; // Clear previous content

                try {
                    let chatHistory = [];
                    // Construct a prompt that encourages structured JSON output
                    const fullPrompt = `Generate Thai words/sentences based on the following request: "${prompt}". 
                                        For each item, provide the Thai word/sentence, its Khmer phonetic transcription, its Khmer meaning, and its English meaning. 
                                        Respond only with a JSON array of objects. Each object should have 'thai', 'phonetic', 'khmer', and 'english' keys.`;

                    chatHistory.push({ role: "user", parts: [{ text: fullPrompt }] });

                    const payload = {
                        contents: chatHistory,
                        generationConfig: {
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: "ARRAY",
                                items: {
                                    type: "OBJECT",
                                    properties: {
                                        "thai": { "type": "STRING" },
                                        "phonetic": { "type": "STRING" },
                                        "khmer": { "type": "STRING" },
                                        "english": { "type": "STRING" }
                                    },
                                    "propertyOrdering": ["thai", "phonetic", "khmer", "english"]
                                }
                            }
                        }
                    };

                    const apiKey = ""; // Canvas will automatically provide this
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const jsonString = result.candidates[0].content.parts[0].text;
                        const generatedLessons = JSON.parse(jsonString);

                        if (Array.isArray(generatedLessons) && generatedLessons.length > 0) {
                            generatedLessons.forEach(lesson => {
                                // Basic validation for the structure of each lesson object
                                if (lesson.thai && lesson.phonetic && lesson.khmer && lesson.english) {
                                    outputContainer.appendChild(createLessonCard(lesson));
                                } else {
                                    console.warn("Skipping malformed lesson object:", lesson);
                                }
                            });
                            // Add event listeners for new audio buttons
                            outputContainer.querySelectorAll('.play-audio-button').forEach(button => {
                                button.onclick = () => speakText(button.dataset.thaiText, 'th');
                            });
                            outputContainer.querySelectorAll('.play-khmer-phonetic-button').forEach(button => {
                                button.onclick = () => speakText(button.dataset.khmerPhoneticText, 'km');
                            });
                        } else {
                            outputContainer.innerHTML = `<p class="text-red-500">${translations[currentLanguage]['ai_invalid_response']}</p>`;
                        }
                    } else {
                        outputContainer.innerHTML = `<p class="text-red-500">${translations[currentLanguage]['ai_generation_error']}</p>`;
                        console.error("AI response structure unexpected:", result);
                    }
                } catch (error) {
                    outputContainer.innerHTML = `<p class="text-red-500">${translations[currentLanguage]['ai_generation_error']}</p>`;
                    console.error("Error generating AI lesson:", error);
                } finally {
                    hideLoadingSpinner();
                }
            }


            // Event Listeners
            document.addEventListener('DOMContentLoaded', () => {
                showLoadingSpinner();

                // Set a random user ID
                document.getElementById('current-user-id').textContent = crypto.randomUUID().substring(0, 8);

                // Initial language application
                applyTranslations();

                // Navigation button clicks
                document.querySelectorAll('.nav-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const sectionId = button.dataset.section;
                        switchSection(sectionId);
                    });
                });

                // Language selector change
                document.getElementById('language-selector').addEventListener('change', (event) => {
                    currentLanguage = event.target.value;
                    applyTranslations();
                    // Re-render current section to apply new language to dynamic content
                    const activeSection = document.querySelector('.app-section.active');
                    if (activeSection) {
                        switchSection(activeSection.id.replace('-section', ''));
                    }
                });

                // Alphabet sorting
                document.getElementById('consonant-sort-by').addEventListener('change', (event) => {
                    generateAlphabetCards('consonants-container', thaiConsonants, event.target.value);
                });
                document.getElementById('vowel-sort-by').addEventListener('change', (event) => {
                    generateAlphabetCards('vowels-container', thaiVowels, event.target.value);
                });

                // Exam submit button
                document.getElementById('exam-submit-button').addEventListener('click', checkExamAnswers);

                // Flashcard navigation
                document.getElementById('prev-flashcard-button').addEventListener('click', () => {
                    if (allFlashcardData.length > 0) {
                        currentFlashcardIndex = (currentFlashcardIndex - 1 + allFlashcardData.length) % allFlashcardData.length;
                        generateFlashcards('current-flashcard-wrapper', allFlashcardData);
                    }
                });

                document.getElementById('next-flashcard-button').addEventListener('click', () => {
                    if (allFlashcardData.length > 0) {
                        currentFlashcardIndex = (currentFlashcardIndex + 1) % allFlashcardData.length;
                        generateFlashcards('current-flashcard-wrapper', allFlashcardData);
                    }
                });

                // AI Generate button click
                document.getElementById('ai-generate-button').addEventListener('click', generateAILesson);

                // Initial section display (Home)
                switchSection('home');
                hideLoadingSpinner();
            });
        }
    </script>
</body>
</html>
