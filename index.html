<!DOCTYPE html>
<html lang="km"> <!-- Set default language to Khmer -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>កម្មវិធីរៀនភាសាថៃ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Custom CSS for basic styling and overrides -->
    <link rel="stylesheet" href="styles/style.css">
    <style>
        /* Custom styles for flashcards */
        .flashcard {
            perspective: 1000px; /* Needed for 3D flip effect */
        }
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }
        .flashcard-inner.rotate-y-180 {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .flashcard-front {
            background-color: #eff6ff; /* blue-50 */
            color: #1e40af; /* blue-800 */
        }
        .flashcard-back {
            background-color: #dbeafe; /* blue-100 */
            color: #1f2937; /* gray-800 */
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 font-inter min-h-screen flex flex-col">
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="fixed inset-0 bg-gray-200 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
    </div>

    <header class="bg-blue-600 text-white p-4 shadow-md rounded-b-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold" data-translate="app_title">កម្មវិធីរៀនភាសាថៃ</h1>
            <div class="flex items-center space-x-4">
                <!-- User ID Display (Removed Firebase dependency) -->
                <span id="user-id-display" class="text-sm bg-blue-700 px-3 py-1 rounded-full">
                    <span data-translate="user_id_label">ID អ្នកប្រើប្រាស់:</span> <span id="current-user-id">Guest</span>
                </span>
                <!-- Language Selector -->
                <div class="relative">
                    <select id="language-selector" class="bg-blue-700 text-white px-3 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <option value="km">ខ្មែរ</option>
                        <option value="en">English</option>
                        <option value="th">ไทย</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto mt-6 p-4 flex-grow">
        <!-- Navigation Tabs -->
        <nav class="bg-white p-2 rounded-lg shadow-md mb-6 flex flex-wrap justify-center sm:justify-start">
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="home">
                <i class="fas fa-home"></i>
                <span data-translate="home_nav">ទំព័រដើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="kindergarten">
                <i class="fas fa-child"></i>
                <span data-translate="kindergarten_nav">ថ្នាក់មតេយ្យ</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="beginner">
                <i class="fas fa-seedling"></i>
                <span data-translate="beginner_nav">កម្រិតចាប់ផ្តើម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="intermediate">
                <i class="fas fa-book-open"></i>
                <span data-translate="intermediate_nav">កម្រិតកណ្តាល</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="advanced">
                <i class="fas fa-graduation-cap"></i>
                <span data-translate="advanced_nav">កម្រិតខ្ពស់</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="alphabet">
                <i class="fas fa-spell-check"></i>
                <span data-translate="alphabet_nav">អក្ខរក្រម</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="custom-lesson">
                <i class="fas fa-magic"></i>
                <span data-translate="custom_lesson_nav">មេរៀនតាមតម្រូវការ</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="exam">
                <i class="fas fa-question-circle"></i>
                <span data-translate="exam_nav">ប្រឡង</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="flashcards">
                <i class="fas fa-clone"></i>
                <span data-translate="flashcards_nav">Flashcards</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="progress">
                <i class="fas fa-chart-line"></i>
                <span data-translate="progress_nav">របាយការណ៍</span>
            </button>
            <button class="nav-button p-3 rounded-lg text-gray-700 hover:bg-blue-100 hover:text-blue-700 focus:outline-none transition-colors duration-200 flex items-center space-x-2 mr-2 mb-2 sm:mb-0" data-section="bookmarks">
                <i class="fas fa-bookmark"></i>
                <span data-translate="bookmarks_nav">មេរៀនចូលចិត្ត</span>
            </button>
        </nav>

        <!-- Content Sections -->
        <div id="content-area" class="bg-white p-6 rounded-lg shadow-md min-h-[500px]">
            <!-- Home Section (Default View) -->
            <section id="home-section" class="app-section active">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="welcome_title">សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!</h2>
                <p class="text-gray-600 leading-relaxed mb-4" data-translate="welcome_text">កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-volume-up mr-2"></i><span data-translate="feature_audio_title">ស្តាប់សំឡេងជនជាតិដើម</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_audio_desc">ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-brain mr-2"></i><span data-translate="feature_exam_title">ប្រព័ន្ធប្រឡង</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_exam_desc">សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-address-card mr-2"></i><span data-translate="feature_flashcards_title">Flashcard ពាក្យសំខាន់ៗ</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_flashcards_desc">រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តរកម្ម។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-chart-bar mr-2"></i><span data-translate="feature_progress_title">តាមដានវឌ្ឍនភាព</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_progress_desc">មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-heart mr-2"></i><span data-translate="feature_bookmarks_title">Bookmark មេរៀនចូលចិត្ត</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_bookmarks_desc">រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។</p>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-lg shadow-sm">
                        <h3 class="text-xl font-medium text-blue-700 mb-2 flex items-center"><i class="fas fa-globe mr-2"></i><span data-translate="feature_language_title">ជម្រើសភាសា</span></h3>
                        <p class="text-gray-600 text-sm" data-translate="feature_language_desc">ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។</p>
                    </div>
                </div>
            </section>

            <!-- Kindergarten Section -->
            <section id="kindergarten-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="kindergarten_title">ថ្នាក់មតេយ្យ</h2>
                <p class="text-gray-600 mb-6" data-translate="kindergarten_intro">សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។</p>
                <div id="kindergarten-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Beginner Section -->
            <section id="beginner-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="beginner_title">កម្រិតចាប់ផ្តើម</h2>
                <p class="text-gray-600 mb-6" data-translate="beginner_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។</p>
                <div id="beginner-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Intermediate Section -->
            <section id="intermediate-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="intermediate_title">កម្រិតកណ្តាល</h2>
                <p class="text-gray-600 mb-6" data-translate="intermediate_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។</p>
                <div id="intermediate-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Advanced Section -->
            <section id="advanced-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="advanced_title">កម្រិតខ្ពស់</h2>
                <p class="text-gray-600 mb-6" data-translate="advanced_intro">សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។</p>
                <div id="advanced-lessons-container" class="space-y-6">
                    <!-- Lessons will be dynamically loaded here -->
                </div>
            </section>

            <!-- Alphabet Section (New) -->
            <section id="alphabet-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="alphabet_title">អក្ខរក្រមថៃ</h2>
                <p class="text-gray-600 mb-6" data-translate="alphabet_intro">ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។</p>
                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="consonants_title">ព្យញ្ជនៈ</h3>
                <div id="consonants-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8">
                    <!-- Consonants will be dynamically loaded here -->
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-3" data-translate="vowels_title">ស្រៈ</h3>
                <div id="vowels-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Vowels will be dynamically loaded here -->
                </div>
            </section>

            <!-- Custom Lesson Section (Now displays static content) -->
            <section id="custom-lesson-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="custom_lesson_title">មេរៀនតាមតម្រូវការ</h2>
                <p class="text-gray-600 mb-6" data-translate="custom_lesson_intro_static">នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។</p>

                <div id="custom-lesson-output" class="space-y-6">
                    <!-- Hardcoded custom lesson example -->
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ฉันอยากสั่งอาหารไทย</p>
                            <p class="text-lg text-gray-700">ឆាន់ យ៉ាក សាំង អាហារ ថៃ</p>
                            <p class="text-lg text-gray-700">ខ្ញុំចង់បញ្ជាម្ហូបថៃ</p>
                            <p class="text-md text-gray-500">I want to order Thai food.</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ฉันอยากสั่งอาหารไทย">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឆាន់ យ៉ាក សាំង អាហារ ថៃ">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">มีอะไรแนะนำไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មានអ្វីណែនាំទេ?</p>
                            <p class="text-md text-gray-500">Do you have any recommendations?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="มีอะไรแนะนำไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="មី អៈរ៉ៃ ណែណាំ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">ลดราคาได้ไหมครับ/คะ?</p>
                            <p class="text-lg text-gray-700">ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">បញ្ចុះតម្លៃបានទេ?</p>
                            <p class="text-md text-gray-500">Can I get a discount?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="ลดราคาได้ไหมครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="ឡុត រ៉ាខា ដាយ ម៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between">
                        <div>
                            <p class="text-2xl font-bold text-blue-800">อันนี้เท่าไหร่ครับ/คะ?</p>
                            <p class="text-lg text-gray-700">អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?</p>
                            <p class="text-lg text-gray-700">មួយនេះប៉ុន្មាន?</p>
                            <p class="text-md text-gray-500">How much is this one?</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="อันนี้เท่าไหร่ครับ/คะ?">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                            <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="អាន់ នី ថៅ រ៉ៃ ក្រាប់/ខៈ?">
                                <i class="fas fa-comment-dots text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Exam Section -->
            <section id="exam-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="exam_title">ប្រឡង</h2>
                <p class="text-gray-600 mb-6" data-translate="exam_intro_static">សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។</p>
                <div id="exam-questions-container" class="space-y-6">
                    <!-- Exam questions will be dynamically loaded here -->
                </div>
            </section>

            <!-- Flashcards Section -->
            <section id="flashcards-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="flashcards_title">Flashcards</h2>
                <p class="text-gray-600 mb-6" data-translate="flashcards_intro_static">រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។</p>
                <div id="flashcards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Flashcards will be dynamically loaded here -->
                </div>
            </section>

            <!-- Progress Section (Now displays static report) -->
            <section id="progress-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="progress_title">របាយការណ៍កម្រិតចំណេះដឹង</h2>
                <p class="text-gray-600 mb-6" data-translate="progress_intro_static">នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។</p>
                <div id="progress-report-container" class="bg-blue-50 p-4 rounded-lg shadow-sm text-gray-700 leading-relaxed">
                    <p data-translate="progress_content_static">
                        សូមអបអរសាទរចំពោះវឌ្ឍនភាពដ៏អស្ចារ្យរបស់អ្នកក្នុងការរៀនភាសាថៃ! អ្នកបានបង្ហាញពីភាពជាប់លាប់ដ៏គួរឱ្យកត់សម្គាល់ក្នុងការអនុវត្តប្រចាំថ្ងៃរបស់អ្នក។
                        វាក្យសព្ទរបស់អ្នកបានរីកចម្រើនយ៉ាងឆាប់រហ័ស ហើយអ្នកកំពុងចាប់ផ្តើមយល់ពីឃ្លាស្មុគស្មាញកាន់តែច្រើន។
                        ការបញ្ចេញសំឡេងរបស់អ្នកបានប្រសើរឡើងគួរឱ្យកត់សម្គាល់ ជាពិសេសនៅក្នុងព្យាង្គដែលមានសម្លេង។
                        អ្នកបានបញ្ចប់មេរៀនកម្រិតមតេយ្យ និងកម្រិតចាប់ផ្តើមទាំងអស់ដោយជោគជ័យ ហើយបានឆ្លើយសំណួរប្រឡងជាច្រើនបានត្រឹមត្រូវ។
                        ដើម្បីបន្តការរីកចម្រើនរបស់អ្នក សូមពិចារណាផ្តោតលើការកែលម្អការនិយាយឱ្យស្ទាត់ជំនាញដោយការអនុវត្តជាមួយអ្នកនិយាយដើម
                        និងការយល់ដឹងអំពីវេយ្យាករណ៍ស្មុគស្មាញបន្ថែមទៀត ដូចជាការប្រើប្រាស់ភាគល្អិត និងរចនាសម្ព័ន្ធប្រយោគ។
                        ការអានរឿងខ្លីៗ ឬអត្ថបទព័ត៌មានជាភាសាថៃក៏អាចជួយពង្រឹងជំនាញរបស់អ្នកផងដែរ។
                        បន្តការខិតខំប្រឹងប្រែងរបស់អ្នក! អ្នកกำลังทำได้ดีมาก!
                    </p>
                </div>
            </section>

            <!-- Bookmarks Section (Now displays static bookmarks) -->
            <section id="bookmarks-section" class="app-section hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4" data-translate="bookmarks_title">មេរៀនចូលចិត្ត</h2>
                <p class="text-gray-600 mb-6" data-translate="bookmarks_intro_static">គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។</p>
                <div id="bookmarks-list-container" class="space-y-3">
                    <!-- Hardcoded bookmarks -->
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ធ្វើដំណើរ</p>
                        <p class="text-md text-gray-700 ml-6">(Travel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการเดินทาง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> វាក្យសព្ទម្ហូបអាហារ</p>
                        <p class="text-md text-gray-700 ml-6">(Food Vocabulary)</p>
                        <p class="text-sm text-gray-500 ml-6">(คำศัพท์อาหาร)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់សណ្ឋាគារ</p>
                        <p class="text-md text-gray-700 ml-6">(Hotel Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับโรงแรม)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ឃ្លាសម្រាប់ទិញទំនិញ</p>
                        <p class="text-md text-gray-700 ml-6">(Shopping Phrases)</p>
                        <p class="text-sm text-gray-500 ml-6">(วลีสำหรับการช้อปปิ้ง)</p>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start">
                        <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> លេខ និងពណ៌</p>
                        <p class="text-md text-gray-700 ml-6">(Numbers and Colors)</p>
                        <p class="text-sm text-gray-500 ml-6">(ตัวเลขและสี)</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 text-center mt-6 rounded-t-lg">
        <p>&copy; 2025 <span data-translate="app_title_footer">កម្មវិធីរៀនភាសាថៃ</span>. <span data-translate="footer_text">រក្សាសិទ្ធិគ្រប់យ៉ាង។</span></p>
    </footer>

    <script>
        // Wrap the entire app logic in an IIFE and use a flag to ensure it runs only once
        // This helps prevent 'Identifier already declared' errors in environments that might re-execute scripts.
        if (typeof window.thaiLanguageAppInitialized === 'undefined') {
            window.thaiLanguageAppInitialized = true;

            // Show loading spinner
            function showLoadingSpinner() {
                document.getElementById('loading-spinner').classList.remove('hidden');
            }

            // Hide loading spinner
            function hideLoadingSpinner() {
                document.getElementById('loading-spinner').classList.add('hidden');
            }

            // Language translations
            const translations = {
                km: {
                    "app_title": "កម្មវិធីរៀនភាសាថៃ",
                    "app_title_footer": "កម្មវិធីរៀនភាសាថៃ",
                    "home_nav": "ទំព័រដើម",
                    "kindergarten_nav": "ថ្នាក់មតេយ្យ",
                    "beginner_nav": "កម្រិតចាប់ផ្តើម",
                    "intermediate_nav": "កម្រិតកណ្តាល",
                    "advanced_nav": "កម្រិតខ្ពស់",
                    "alphabet_nav": "អក្ខរក្រម",
                    "custom_lesson_nav": "មេរៀនតាមតម្រូវការ",
                    "exam_nav": "ប្រឡង",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "របាយការណ៍",
                    "bookmarks_nav": "មេរៀនចូលចិត្ត",
                    "welcome_title": "សូមស្វាគមន៍មកកាន់កម្មវិធីរៀនភាសាថៃ!",
                    "welcome_text": "កម្មវិធីនេះនឹងជួយអ្នកឱ្យរៀនភាសាថៃតាមរយៈមេរៀនអន្តរកម្ម កម្រងសំណួរ Flashcard និងការតាមដានវឌ្ឍនភាព។",
                    "feature_audio_title": "ស្តាប់សំឡេងជនជាតិដើម",
                    "feature_audio_desc": "ស្តាប់ពាក្យ និងឃ្លាដែលបញ្ចេញសំឡេងដោយអ្នកនិយាយភាសាថៃដើម ដើម្បីកែលម្អការបញ្ចេញសំឡេងរបស់អ្នក។",
                    "feature_exam_title": "ប្រព័ន្ធប្រឡង",
                    "feature_exam_desc": "សាកល្បងចំណេះដឹងរបស់អ្នកជាមួយនឹងសំណួរជម្រើសច្រើន និងលំហាត់ផ្គូផ្គងពាក្យ។",
                    "feature_flashcards_title": "Flashcard ពាក្យសំខាន់ៗ",
                    "feature_flashcards_desc": "រៀនវាក្យស័ព្ទថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard អន្តរកម្ម។",
                    "feature_progress_title": "តាមដានវឌ្ឍនភាព",
                    "feature_progress_desc": "មើលពីរបៀបដែលអ្នករីកចម្រើនជាមួយនឹងរបាយការណ៍កម្រិតចំណេះដឹងលម្អិត។",
                    "feature_bookmarks_title": "Bookmark មេរៀនចូលចិត្ត",
                    "feature_bookmarks_desc": "រក្សាទុកមេរៀន និងពាក្យដែលអ្នកចង់រៀនម្តងទៀត។",
                    "feature_language_title": "ជម្រើសភាសា",
                    "feature_language_desc": "ប្តូរភាសាចំណុចប្រទាក់រវាងខ្មែរ អង់គ្លេស និងថៃ។",
                    "kindergarten_title": "ថ្នាក់មតេយ្យ",
                    "kindergarten_intro": "សូមស្វាគមន៍មកកាន់មេរៀនថ្នាក់មតេយ្យ! ចូរយើងរៀនពាក្យ និងឃ្លាសាមញ្ញបំផុត។",
                    "beginner_title": "កម្រិតចាប់ផ្តើម",
                    "beginner_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតចាប់ផ្តើម! ចូរយើងរៀនឃ្លាថៃមូលដ្ឋានមួយចំនួន។",
                    "intermediate_title": "កម្រិតកណ្តាល",
                    "intermediate_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតកណ្តាល! នៅទីនេះ អ្នកនឹងរៀនឃ្លាដែលស្មុគស្មាញជាងនេះបន្តិច។",
                    "advanced_title": "កម្រិតខ្ពស់",
                    "advanced_intro": "សូមស្វាគមន៍មកកាន់មេរៀនកម្រិតខ្ពស់! នៅទីនេះ អ្នកនឹងរៀនឃ្លាស្មុគស្មាញ និងកន្សោម idiomatic។",
                    "alphabet_title": "អក្ខរក្រមថៃ",
                    "alphabet_intro": "ចូរយើងរៀនព្យញ្ជនៈ និងស្រៈថៃ។",
                    "consonants_title": "ព្យញ្ជនៈ",
                    "vowels_title": "ស្រៈ",
                    "custom_lesson_title": "មេរៀនតាមតម្រូវការ",
                    "custom_lesson_intro_static": "នេះគឺជាមេរៀនគំរូដែលបានបង្កើតឡើងជាមុន។ អ្នកអាចកែសម្រួលវាដោយផ្ទាល់នៅក្នុងកូដ។",
                    "exam_title": "ប្រឡង",
                    "exam_intro_static": "សាកល្បងចំណេះដឹងភាសាថៃរបស់អ្នកជាមួយនឹងសំណួរគំរូ។",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "រៀនពាក្យ និងឃ្លាថ្មីៗយ៉ាងងាយស្រួលដោយប្រើ Flashcard គំរូ។",
                    "progress_title": "របាយការណ៍កម្រិតចំណេះដឹង",
                    "progress_intro_static": "នេះគឺជារបាយការណ៍វឌ្ឍនភាពគំរូ។",
                    "bookmarks_title": "មេរៀនចូលចិត្ត",
                    "bookmarks_intro_static": "គ្រប់គ្រងមេរៀន និងពាក្យដែលអ្នកចូលចិត្តនៅទីនេះ។",
                    "footer_text": "រក្សាសិទ្ធិគ្រប់យ៉ាង។",
                    "user_id_label": "ID អ្នកប្រើប្រាស់:",
                    "tts_not_supported_error": "Browser របស់អ្នកមិនគាំទ្រមុខងារសំឡេងអានទេ។",
                    "tts_error": "មានបញ្ហាក្នុងការអានសំឡេង។"
                },
                en: {
                    "app_title": "Thai Language Learning App",
                    "app_title_footer": "Thai Language Learning App",
                    "home_nav": "Home",
                    "kindergarten_nav": "Kindergarten",
                    "beginner_nav": "Beginner",
                    "intermediate_nav": "Intermediate",
                    "advanced_nav": "Advanced",
                    "alphabet_nav": "Alphabet",
                    "custom_lesson_nav": "Custom Lesson",
                    "exam_nav": "Exam",
                    "flashcards_nav": "Flashcards",
                    "progress_nav": "Progress Report",
                    "bookmarks_nav": "Favorite Lessons",
                    "welcome_title": "Welcome to the Thai Language Learning App!",
                    "welcome_text": "This app will help you learn Thai through interactive lessons, quizzes, flashcards, and progress tracking.",
                    "feature_audio_title": "Native Speaker Audio",
                    "feature_audio_desc": "Listen to words and phrases pronounced by native Thai speakers to improve your pronunciation.",
                    "feature_exam_title": "Exam System",
                    "feature_exam_desc": "Test your knowledge with multiple-choice questions and word matching exercises.",
                    "feature_flashcards_title": "Essential Word Flashcards",
                    "feature_flashcards_desc": "Learn new vocabulary easily using interactive flashcards.",
                    "feature_progress_title": "Track Progress",
                    "feature_progress_desc": "See how you're improving with detailed knowledge level reports.",
                    "feature_bookmarks_title": "Bookmark Favorite Lessons",
                    "feature_bookmarks_desc": "Save lessons and words you want to revisit.",
                    "feature_language_title": "Language Options",
                    "feature_language_desc": "Switch the interface language between Khmer, English, and Thai.",
                    "kindergarten_title": "Kindergarten Level",
                    "kindergarten_intro": "Welcome to the kindergarten lessons! Let's learn the simplest words and phrases.",
                    "beginner_title": "Beginner Level",
                    "beginner_intro": "Welcome to the beginner lessons! Let's learn some basic Thai phrases.",
                    "intermediate_title": "Intermediate Level",
                    "intermediate_intro": "Welcome to the intermediate lessons! Here, you'll learn slightly more complex phrases.",
                    "advanced_title": "Advanced Level",
                    "advanced_intro": "Welcome to the advanced lessons! Here, you'll learn complex phrases and idiomatic expressions.",
                    "alphabet_title": "Thai Alphabet",
                    "alphabet_intro": "Let's learn the Thai consonants and vowels.",
                    "consonants_title": "Consonants",
                    "vowels_title": "Vowels",
                    "custom_lesson_title": "Custom Lesson",
                    "custom_lesson_intro_static": "This is a sample pre-generated lesson. You can edit it directly in the code.",
                    "exam_title": "Exam",
                    "exam_intro_static": "Test your Thai language knowledge with sample questions.",
                    "flashcards_title": "Flashcards",
                    "flashcards_intro_static": "Easily learn new words and phrases using sample flashcards.",
                    "progress_title": "Knowledge Progress Report",
                    "progress_intro_static": "This is a sample progress report.",
                    "bookmarks_title": "Favorite Lessons",
                    "bookmarks_intro_static": "Manage your favorite lessons and words here.",
                    "footer_text": "All rights reserved.",
                    "user_id_label": "User ID:",
                    "tts_not_supported_error": "Your browser does not support text-to-speech.",
                    "tts_error": "Error speaking text."
                },
                th: {
                    "app_title": "แอปพลิเคชันเรียนภาษาไทย",
                    "app_title_footer": "แอปพลิเคชันเรียนภาษาไทย",
                    "home_nav": "หน้าหลัก",
                    "kindergarten_nav": "ระดับอนุบาล",
                    "beginner_nav": "ระดับเริ่มต้น",
                    "intermediate_nav": "ระดับกลาง",
                    "advanced_nav": "ระดับสูง",
                    "alphabet_nav": "ตัวอักษร",
                    "custom_lesson_nav": "บทเรียนที่กำหนดเอง",
                    "exam_nav": "แบบทดสอบ",
                    "flashcards_nav": "แฟลชการ์ด",
                    "progress_nav": "รายงานความคืบหน้า",
                    "bookmarks_nav": "บทเรียนที่ชื่นชอบ",
                    "welcome_title": "ยินดีต้อนรับสู่แอปพลิเคชันเรียนภาษาไทย!",
                    "welcome_text": "แอปพลิเคชันนี้จะช่วยให้คุณเรียนภาษาไทยผ่านบทเรียนแบบโต้ตอบ แบบทดสอบ แฟลชการ์ด และการติดตามความคืบหน้า",
                    "feature_audio_title": "เสียงจากเจ้าของภาษา",
                    "feature_audio_desc": "ฟังคำและวลีที่ออกเสียงโดยเจ้าของภาษาไทยเพื่อปรับปรุงการออกเสียงของคุณ",
                    "feature_exam_title": "ระบบแบบทดสอบ",
                    "feature_exam_desc": "ทดสอบความรู้ของคุณด้วยคำถามปรนัยและแบบฝึกหัดจับคู่คำศัพท์",
                    "feature_flashcards_title": "แฟลชการ์ดคำศัพท์ที่สำคัญ",
                    "feature_flashcards_desc": "เรียนรู้คำศัพท์ใหม่ได้อย่างง่ายดายโดยใช้แฟลชการ์ดแบบโต้ตอบ",
                    "feature_progress_title": "ติดตามความคืบหน้า",
                    "feature_progress_desc": "ดูว่าคุณกำลังพัฒนาขึ้นอย่างไรด้วยรายงานระดับความรู้โดยละเอียด",
                    "feature_bookmarks_title": "บุ๊กมาร์กบทเรียนที่ชื่นชอบ",
                    "feature_bookmarks_desc": "บันทึกบทเรียนและคำศัพท์ที่คุณต้องการทบทวน",
                    "feature_language_title": "ตัวเลือกภาษา",
                    "feature_language_desc": "เปลี่ยนภาษาของอินเทอร์เฟซระหว่าง เขมร อังกฤษ และไทย",
                    "kindergarten_title": "ระดับอนุบาล",
                    "kindergarten_intro": "ยินดีต้อนรับสู่บทเรียนระดับอนุบาล! มาเรียนรู้คำศัพท์และวลีที่ง่ายที่สุดกัน",
                    "beginner_title": "ระดับเริ่มต้น",
                    "beginner_intro": "ยินดีต้อนรับสู่บทเรียนระดับเริ่มต้น! มาเรียนรู้ประโยคภาษาไทยพื้นฐานกัน",
                    "intermediate_title": "ระดับกลาง",
                    "intermediate_intro": "ยินดีต้อนรับสู่บทเรียนระดับกลาง! ที่นี่ คุณจะได้เรียนรู้วลีที่ซับซ้อนขึ้นเล็กน้อย",
                    "advanced_title": "ระดับสูง",
                    "advanced_intro": "ยินดีต้อนรับสู่บทเรียนระดับสูง! ที่นี่ คุณจะได้เรียนรู้วลีที่ซับซ้อนและสำนวนภาษา",
                    "alphabet_title": "ตัวอักษรไทย",
                    "alphabet_intro": "มาเรียนรู้พยัญชนะและสระไทยกัน",
                    "consonants_title": "พยัญชนะ",
                    "vowels_title": "สระ",
                    "custom_lesson_title": "บทเรียนที่กำหนดเอง",
                    "custom_lesson_intro_static": "นี่คือบทเรียนตัวอย่างที่สร้างไว้ล่วงหน้า คุณสามารถแก้ไขได้โดยตรงในโค้ด",
                    "exam_title": "แบบทดสอบ",
                    "exam_intro_static": "ทดสอบความรู้ภาษาไทยของคุณด้วยคำถามตัวอย่าง",
                    "flashcards_title": "แฟลชการ์ด",
                    "flashcards_intro_static": "เรียนรู้คำศัพท์และวลีใหม่ ๆ ได้อย่างง่ายดายโดยใช้แฟลชการ์ดตัวอย่าง",
                    "progress_title": "รายงานความคืบหน้าของความรู้",
                    "progress_intro_static": "นี่คือรายงานความคืบหน้าตัวอย่าง",
                    "bookmarks_title": "บทเรียนที่ชื่นชอบ",
                    "bookmarks_intro_static": "จัดการบทเรียนและคำศัพท์ที่คุณชื่นชอบที่นี่",
                    "footer_text": "สงวนลิขสิทธิ์ทุกประการ",
                    "user_id_label": "รหัสผู้ใช้:",
                    "tts_not_supported_error": "เบราว์เซอร์ของคุณไม่รองรับคุณสมบัติการแปลงข้อความเป็นคำพูด",
                    "tts_error": "เกิดข้อผิดพลาดในการออกเสียงข้อความ"
                }
            };

            let currentLang = 'km'; // Default language

            // Function to apply translations based on currentLang
            function applyTranslations() {
                const currentTranslation = translations[currentLang];

                // Update specific elements that don't use data-translate or need special handling
                document.querySelector('h1').textContent = currentTranslation['app_title'];
                document.querySelector('footer p').innerHTML = `&copy; 2025 <span data-translate="app_title_footer">${currentTranslation['app_title_footer']}</span>. <span data-translate="footer_text">${currentTranslation['footer_text']}</span>`;
                document.querySelector('#user-id-display span[data-translate="user_id_label"]').textContent = currentTranslation['user_id_label'];

                // Update elements with data-translate attribute
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.dataset.translate;
                    // Exclude elements where content is handled by child elements (e.g., spans inside h3 or footer)
                    if (element.tagName === 'SPAN' || element.tagName === 'P' || element.tagName === 'H2' || element.tagName === 'BUTTON' || element.tagName === 'TEXTAREA' || element.tagName === 'INPUT' || element.tagName === 'LABEL') {
                        if (currentTranslation[key]) {
                            // For textarea and input, update placeholder
                            if ((element.tagName === 'TEXTAREA' || element.tagName === 'INPUT') && element.hasAttribute('placeholder')) {
                                element.setAttribute('placeholder', currentTranslation[key]);
                            } else {
                                element.textContent = currentTranslation[key];
                            }
                        }
                    }
                });
            }

            // Function to create a Lesson Item HTML element
            function createLessonElement(lesson) {
                const lessonDiv = document.createElement('div');
                lessonDiv.className = 'bg-blue-50 p-4 rounded-lg shadow-sm flex items-center justify-between';
                lessonDiv.innerHTML = `
                    <div>
                        <p class="text-2xl font-bold text-blue-800">${lesson.thaiWord}</p>
                        <p class="text-lg text-gray-700">${lesson.phoneticTranscription}</p>
                        <p class="text-lg text-gray-700">${lesson.khmerTranslation}</p>
                        <p class="text-md text-gray-500">${lesson.englishTranslation}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-thai-text="${lesson.thaiWord}">
                            <i class="fas fa-volume-up text-xl"></i>
                        </button>
                        <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${lesson.phoneticTranscription}">
                            <i class="fas fa-comment-dots text-xl"></i>
                        </button>
                    </div>
                `;
                return lessonDiv;
            }

            // Function to create an Alphabet Item HTML element (similar to lesson but adapted for alphabet)
            function createAlphabetElement(alphabetChar) {
                const alphabetDiv = document.createElement('div');
                alphabetDiv.className = 'bg-blue-50 p-4 rounded-lg shadow-sm flex flex-col items-center justify-center text-center';
                alphabetDiv.innerHTML = `
                    <p class="text-4xl font-bold text-blue-800 mb-2">${alphabetChar.thaiChar}</p>
                    <p class="text-lg text-gray-700">${alphabetChar.phoneticTranscription}</p>
                    <p class="text-md text-gray-600">${alphabetChar.khmerMeaning}</p>
                    <p class="text-sm text-gray-500">${alphabetChar.englishMeaning}</p>
                    <div class="flex items-center space-x-2 mt-3">
                        <button class="play-audio-button bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-thai-text="${alphabetChar.thaiChar}">
                            <i class="fas fa-volume-up text-lg"></i>
                        </button>
                        <button class="play-khmer-phonetic-button bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${alphabetChar.phoneticTranscription}">
                            <i class="fas fa-comment-dots text-lg"></i>
                        </button>
                    </div>
                `;
                return alphabetDiv;
            }


            // Function to create an Exam Question HTML element
            function createQuizQuestionElement(question) {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'bg-blue-50 p-4 rounded-lg shadow-sm space-y-3';
                questionDiv.innerHTML = `
                    <p class="text-lg font-semibold text-gray-800"><span class="font-bold">សំណួរ:</span> ${question.questionKhmer}</p>
                    <p class="text-md text-gray-600"><span class="font-bold">Question:</span> ${question.questionEnglish}</p>
                    <p class="text-xl font-bold text-blue-800"><span class="font-bold">คำถาม:</span> ${question.questionThai}</p>
                    <div class="options-container space-y-2">
                        ${question.options.map((option, index) => `
                            <button class="option-button w-full text-left bg-white hover:bg-blue-100 p-3 rounded-md border border-gray-300 transition-colors duration-200 text-gray-700"
                                data-correct="${index === question.correctAnswerIndex ? 'true' : 'false'}"
                                data-index="${index}">
                                ${index + 1}. ${option.textKhmer} / ${option.textEnglish} / ${option.textThai}
                            </button>
                        `).join('')}
                    </div>
                    <div class="feedback-message mt-2 text-center font-bold"></div>
                `;

                // Add event listeners for options
                questionDiv.querySelectorAll('.option-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const isCorrect = button.dataset.correct === 'true';
                        const feedbackDiv = questionDiv.querySelector('.feedback-message');
                        // Reset all buttons
                        questionDiv.querySelectorAll('.option-button').forEach(btn => {
                            btn.classList.remove('bg-green-200', 'bg-red-200', 'border-green-500', 'border-red-500');
                        });

                        if (isCorrect) {
                            button.classList.add('bg-green-200', 'border-green-500');
                            feedbackDiv.textContent = currentLang === 'km' ? 'ត្រឹមត្រូវ!' : currentLang === 'en' ? 'Correct!' : 'ถูกต้อง!';
                            feedbackDiv.classList.remove('text-red-500');
                            feedbackDiv.classList.add('text-green-500');
                        } else {
                            button.classList.add('bg-red-200', 'border-red-500');
                            feedbackDiv.textContent = currentLang === 'km' ? 'ខុសហើយ!' : currentLang === 'en' ? 'Incorrect!' : 'ผิด!';
                            feedbackDiv.classList.remove('text-green-500');
                            feedbackDiv.classList.add('text-red-500');
                            // Highlight correct answer
                            questionDiv.querySelector(`.option-button[data-correct="true"]`).classList.add('bg-green-200', 'border-green-500');
                        }
                    });
                });

                return questionDiv;
            }

            // Function to create a Flashcard HTML element
            function createFlashcardElement(flashcard) {
                const flashcardDiv = document.createElement('div');
                flashcardDiv.className = 'flashcard bg-blue-50 p-6 rounded-lg shadow-md cursor-pointer transform transition-transform duration-500 perspective-1000 relative h-48 flex items-center justify-center';
                flashcardDiv.setAttribute('tabindex', '0'); // Make it focusable for keyboard users

                flashcardDiv.innerHTML = `
                    <div class="flashcard-inner relative w-full h-full text-center transition-transform duration-500 transform-style-preserve-3d">
                        <div class="flashcard-face flashcard-front absolute w-full h-full backface-hidden flex flex-col items-center justify-center">
                            <p class="text-3xl font-bold text-blue-800 mb-2">${flashcard.thaiWord}</p>
                            <p class="text-lg text-gray-600">${flashcard.phoneticTranscription}</p>
                             <button class="play-khmer-phonetic-button mt-3 bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-khmer-phonetic-text="${flashcard.phoneticTranscription}">
                                <i class="fas fa-comment-dots text-lg"></i>
                            </button>
                        </div>
                        <div class="flashcard-face flashcard-back absolute w-full h-full backface-hidden flex flex-col items-center justify-center rotate-y-180">
                            <p class="text-xl font-semibold text-gray-800 mb-1">${flashcard.khmerTranslation}</p>
                            <p class="text-lg text-gray-700">${flashcard.englishTranslation}</p>
                            <button class="play-audio-button mt-3 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-md transition-colors duration-200" data-thai-text="${flashcard.thaiWord}">
                                <i class="fas fa-volume-up text-lg"></i>
                                </button>
                            </div>
                        </div>
                    `;

                flashcardDiv.addEventListener('click', () => {
                    flashcardDiv.querySelector('.flashcard-inner').classList.toggle('rotate-y-180');
                });
                return flashcardDiv;
            }

            // Function to create a Bookmark HTML element (retained for consistency with hardcoded data)
            function createBookmarkElement(bookmark) {
                const bookmarkDiv = document.createElement('div');
                bookmarkDiv.className = 'bg-blue-50 p-3 rounded-lg shadow-sm flex flex-col items-start';
                bookmarkDiv.innerHTML = `
                    <p class="text-lg font-semibold text-blue-800"><i class="fas fa-bookmark text-blue-500 mr-2"></i> ${bookmark.titleKhmer}</p>
                    <p class="text-md text-gray-700 ml-6">(${bookmark.titleEnglish})</p>
                    <p class="text-sm text-gray-500 ml-6">(${bookmark.titleThai})</p>
                `;
                return bookmarkDiv;
            }


            // Data for lessons, flashcards, and exams
            const kindergartenLessonsData = [
                { thaiWord: "สวัสดี", phoneticTranscription: "សៈ វ៉ាត់ ឌី", khmerTranslation: "ជំរាបសួរ", englishTranslation: "Hello" },
                { thaiWord: "ลา ก่อน", phoneticTranscription: "ឡា កន", khmerTranslation: "លាហើយ", englishTranslation: "Goodbye" },
                { thaiWord: "ขอบคุณ", phoneticTranscription: "ខប់ ឃុន", khmerTranslation: "អរគុណ", englishTranslation: "Thank you" },
                { thaiWord: "ขอโทษ", phoneticTranscription: "ខរ ថូត", khmerTranslation: "សូមទោស", englishTranslation: "Sorry" },
                { thaiWord: "ใช่", phoneticTranscription: "ឆៃ", khmerTranslation: "បាទ/ចាស៎ (ត្រូវ)", englishTranslation: "Yes" },
                { thaiWord: "ไม่", phoneticTranscription: "ម៉ៃ", khmerTranslation: "ទេ/មិន", englishTranslation: "No" },
                { thaiWord: "แม่", phoneticTranscription: "ម៉ែ", khmerTranslation: "ម្ដាយ", englishTranslation: "Mother" },
                { thaiWord: "พ่อ", phoneticTranscription: "ប៉ា", khmerTranslation: "ឪពុក", englishTranslation: "Father" },
                { thaiWord: "น้ำ", phoneticTranscription: "ណាំ", khmerTranslation: "ទឹក", englishTranslation: "Water" },
                { thaiWord: "กิน", phoneticTranscription: "គីន", khmerTranslation: "ញ៉ាំ/បរិភោគ", englishTranslation: "Eat" },
                { thaiWord: "นอน", phoneticTranscription: "ណន", khmerTranslation: "គេង", englishTranslation: "Sleep" },
                { thaiWord: "หมา", phoneticTranscription: "ម៉ា", khmerTranslation: "ឆ្កែ", englishTranslation: "Dog" },
                { thaiWord: "แมว", phoneticTranscription: "ម៉ែវ", khmerTranslation: "ឆ្មា", englishTranslation: "Cat" },
                { thaiWord: "นก", phoneticTranscription: "ណុក", khmerTranslation: "បក្សី", englishTranslation: "Bird" }
            ];

            const beginnerLessonsData = [
                { thaiWord: "สบายดีไหมครับ/คะ", phoneticTranscription: "សៈបាយ ឌី ម៉ៃ ក្រាប់/ខៈ", khmerTranslation: "សុខសប្បាយជាទេ?", englishTranslation: "How are you?" },
                { thaiWord: "ฉันสบายดี ขอบคุณ", phoneticTranscription: "ឆាន់ សៈបាយ ឌី ខប់ ឃុន", khmerTranslation: "ខ្ញុំសុខសប្បាយ អរគុណ", englishTranslation: "I'm fine, thank you" },
                { thaiWord: "คุณชื่ออะไรครับ/คะ", phoneticTranscription: "ឃុន ឈឺ អៈរ៉ៃ ក្រាប់/ខៈ", khmerTranslation: "អ្នកឈ្មោះអ្វី?", englishTranslation: "What's your name?" },
                { thaiWord: "คุณมาจากที่ไหน", phoneticTranscription: "ឃុន ម៉ា ចាក ធី ណៃ", khmerTranslation: "អ្នកមកពីណា?", englishTranslation: "Where are you from?" },
                { thaiWord: "คุณอายุเท่าไหร่", phoneticTranscription: "ឃុន អាយុ ថៅ រ៉ៃ", khmerTranslation: "អ្នកអាយុប៉ុន្មាន?", englishTranslation: "How old are you?" },
                { thaiWord: "กี่โมงแล้ว", phoneticTranscription: "គី ម៉ុង ឡែវ", khmerTranslation: "ម៉ោងប៉ុន្មានហើយ?", englishTranslation: "What time is it?" },
                { thaiWord: "ห้องน้ำอยู่ที่ไหน", phoneticTranscription: "ហង ណាំ យូ ធី ណៃ", khmerTranslation: "បន្ទប់ទឹកនៅឯណា?", englishTranslation: "Where is the restroom?" },
                { thaiWord: "นี่ราคาเท่าไหร่", phoneticTranscription: "នី រ៉ាខា ថៅ រ៉ៃ", khmerTranslation: "នេះថ្លៃប៉ុន្មាន?", englishTranslation: "How much is this?" },
                { thaiWord: "ฉันไม่เข้าใจ", phoneticTranscription: "ឆាន់ ម៉ៃ ខៅ ចៃ", khmerTranslation: "ខ្ញុំមិនយល់ទេ", englishTranslation: "I don't understand" },
                { thaiWord: "คุณพูดภาษาอังกฤษได้ไหม", phoneticTranscription: "ឃុន ភូត ភាសាអង់គ្លេស ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកនិយាយភាសាអង់គ្លេសបានទេ?", englishTranslation: "Can you speak English?" },
                { thaiWord: "ฉันพูดภาษาไทยได้นิดหน่อย", phoneticTranscription: "ឆាន់ ភូត ភាសាថៃ ដាយ ណិត ណយ", khmerTranslation: "ខ្ញុំនិយាយភាសាថៃបានបន្តិចបន្តួច", englishTranslation: "I can speak a little Thai." },
                { thaiWord: "นี่เรียกว่าอะไร", phoneticTranscription: "នី រៀក វ៉ា អៈរ៉ៃ", khmerTranslation: "នេះហៅថាអ្វី?", englishTranslation: "What is this called?" },
                { thaiWord: "คุณช่วยฉันได้ไหม", phoneticTranscription: "ឃុន ឈួយ ឆាន់ ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចជួយខ្ញុំបានទេ?", englishTranslation: "Can you help me?" },
                { thaiWord: "ฉันต้องการความช่วยเหลือ", phoneticTranscription: "ឆាន់ តង កាន ខ្វាម ឈួយ លឿ", khmerTranslation: "ខ្ញុំត្រូវការជំនួយ", englishTranslation: "I need help" },
                { thaiWord: "ฉันหลงทาง", phoneticTranscription: "ឆាន់ ហ្លុង ថាង", khmerTranslation: "ខ្ញុំវង្វេងផ្លូវ", englishTranslation: "I'm lost" },
                { thaiWord: "คุณพูดซ้ำอีกครั้งได้ไหม", phoneticTranscription: "ឃុន ភូត សាំ អីក ឃ្រាំង ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចនិយាយម្តងទៀតបានទេ?", englishTranslation: "Can you repeat that please?" },
                { thaiWord: "คุณมีไหม", phoneticTranscription: "ឃុន មី ម៉ៃ", khmerTranslation: "តើអ្នកមានទេ?", englishTranslation: "Do you have?" },
                { thaiWord: "ฉันหิว", phoneticTranscription: "ឆាន់ ហ៊ីវ", khmerTranslation: "ខ្ញុំឃ្លាន", englishTranslation: "I'm hungry" },
                { thaiWord: "ฉันหิวน้ำ", phoneticTranscription: "ឆាន់ ហ៊ីវ ណាំ", khmerTranslation: "ខ្ញុំស្រេកទឹក", englishTranslation: "I'm thirsty" },
                { thaiWord: "ฉันเหนื่อย", phoneticTranscription: "ឆាន់ ណឿយ", khmerTranslation: "ខ្ញុំនឿយហត់", englishTranslation: "I'm tired" },
                { thaiWord: "ฉันหนาว", phoneticTranscription: "ឆាន់ ណាវ", khmerTranslation: "ខ្ញុំរងា", englishTranslation: "I'm cold" },
                { thaiWord: "ฉันร้อน", phoneticTranscription: "ឆាន់ រ៉ន", khmerTranslation: "ខ្ញុំក្តៅ", englishTranslation: "I'm hot" },
                { thaiWord: "ฉันป่วย", phoneticTranscription: "ឆាន់ បួយ", khmerTranslation: "ខ្ញុំឈឺ", englishTranslation: "I'm sick" },
                { thaiWord: "ฉันต้องการหมอ", phoneticTranscription: "ឆាន់ តង កាន ម៉រ", khmerTranslation: "ខ្ញុំត្រូវការពេទ្យ", englishTranslation: "I need a doctor" },
                { thaiWord: "โทรเรียกรถพยาบาล", phoneticTranscription: "ថូ រៀក រ៉ត់ ផៈយាបាន", khmerTranslation: "ហៅរថយន្តសង្គ្រោះ", englishTranslation: "Call an ambulance" },
                { thaiWord: "โรงพยาบาลอยู่ที่ไหน", phoneticTranscription: "រ៉ុងផៈយាបាន យូ ធី ណៃ", khmerTranslation: "មន្ទីរពេទ្យនៅឯណា?", englishTranslation: "Where is the hospital?" },
                { thaiWord: "ฉันแพ้", phoneticTranscription: "ឆាន់ ផែ", khmerTranslation: "ខ្ញុំអាលែកហ្ស៊ី", englishTranslation: "I'm allergic to" },
                { thaiWord: "ขอเมนูหน่อย", phoneticTranscription: "ខរ មេនូ ណយ", khmerTranslation: "សុំម៉ឺនុយ", englishTranslation: "Can I have the menu please?" },
                { thaiWord: "อาหารที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "អាហារ ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "អាហារដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite food?" },
                { thaiWord: "มีเมนูมังสวิรัติไหม", phoneticTranscription: "មី មេនូ មាំងសៈវីរ៉ាត់ ម៉ៃ", khmerTranslation: "មានមុខម្ហូបបួសទេ?", englishTranslation: "Is there a vegetarian option?" },
                { thaiWord: "ฉันจ่ายด้วยบัตรเครดิตได้ไหม", phoneticTranscription: "ឆាន់ ចាយ ដួយ បាត់ ឃ្រេឌិត ដាយ ម៉ៃ", khmerTranslation: "ខ្ញុំអាចបង់ដោយប័ណ្ណឥណទានបានទេ?", englishTranslation: "Can I pay by credit card?" },
                { thaiWord: "ขอเช็คบิล", phoneticTranscription: "ខរ ឆេក ប៊ីន", khmerTranslation: "សុំវិក័យប័ត្រ", englishTranslation: "Check please" },
                { thaiWord: "สภาพอากาศวันนี้เป็นยังไง", phoneticTranscription: "សៈផាប អាកាត វ៉ាន់ នី ប៉ិន យ៉ាង ង៉ៃ", khmerTranslation: "អាកាសធាតុថ្ងៃនេះយ៉ាងម៉េច?", englishTranslation: "What's the weather like today?" },
                { thaiWord: "มีแดด", phoneticTranscription: "មី ដែត", khmerTranslation: "មានថ្ងៃរះ", englishTranslation: "It's sunny" },
                { thaiWord: "มีเมฆมาก", phoneticTranscription: "មី មេក ម៉ាក", khmerTranslation: "មានពពកច្រើន", englishTranslation: "It's cloudy" },
                { thaiWord: "ฝนตก", phoneticTranscription: "ហ្វុន តក់", khmerTranslation: "ភ្លៀងធ្លាក់", englishTranslation: "It's raining" },
                { thaiWord: "มีลมพัด", phoneticTranscription: "មី លម ផាត់", khmerTranslation: "មានខ្យល់បក់", englishTranslation: "It's windy" },
                { thaiWord: "มีหิมะตก", phoneticTranscription: "មី ហ៊ីម៉ៈ តក់", khmerTranslation: "មានព្រិលធ្លាក់", englishTranslation: "It's snowing" },
                { thaiWord: "วันนี้เป็นยังไงบ้าง", phoneticTranscription: "វ៉ាន់ នី ប៉ិន យ៉ាង ង៉ៃ បាង", khmerTranslation: "ថ្ងៃនេះយ៉ាងម៉េចដែរ?", englishTranslation: "How was your day?" },
                { thaiWord: "คุณทำอะไรวันนี้", phoneticTranscription: "ឃុន ថាំ អៈរ៉ៃ វ៉ាន់ នី", khmerTranslation: "ថ្ងៃនេះអ្នកបានធ្វើអ្វីខ្លះ?", englishTranslation: "What did you do today?" },
                { thaiWord: "คุณตื่นเวลากี่โมง", phoneticTranscription: "ឃុន តឺន វ៉េឡា គី ម៉ុង", khmerTranslation: "អ្នកក្រោកម៉ោងប៉ុន្មាន?", englishTranslation: "What time do you wake up?" },
                { thaiWord: "คุณนอนเวลากี่โมง", phoneticTranscription: "ឃុន ណន វ៉េឡា គី ម៉ុង", khmerTranslation: "អ្នកចូលគេងម៉ោងប៉ុន្មាន?", englishTranslation: "What time do you go to bed?" },
                { thaiWord: "งานอดิเรกที่คุณชอบทำมากที่สุดคืออะไร", phoneticTranscription: "ង៉ាន អៈឌីរេក ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "ចំណូលចិត្តដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite hobby?" },
                { thaiWord: "คุณชอบไปเที่ยวที่ไหนในวันหยุด", phoneticTranscription: "ឃុន ឆប ប៉ៃ ធៀវ ធី ណៃ ណៃ វ៉ាន់ យុត", khmerTranslation: "អ្នកចូលចិត្តទៅលេងកន្លែងណាពេលវិស្សមកាល?", englishTranslation: "Where do you like to go on vacation?" },
                { thaiWord: "ภาพยนตร์ที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "ផាបផៈយុន ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "ភាពយន្តដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite movie?" },
                { thaiWord: "คุณมีพี่น้องไหม", phoneticTranscription: "ឃុន មី ភី ណង ម៉ៃ", khmerTranslation: "តើអ្នកមានបងប្អូនទេ?", englishTranslation: "Do you have siblings?" },
                { thaiWord: "คุณมีพี่น้องกี่คน", phoneticTranscription: "ឃុន មី ភី ណង គី ខុន", khmerTranslation: "តើអ្នកមានបងប្អូនប៉ុន្មាននាក់?", englishTranslation: "How many siblings do you have?" },
                { thaiWord: "คุณเลี้ยงสัตว์ไหม", phoneticTranscription: "ឃុន លៀង សាត់ ម៉ៃ", khmerTranslation: "តើអ្នកចិញ្ចឹមសត្វទេ?", englishTranslation: "Do you have any pets?" },
                { thaiWord: "สัตว์ที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "សាត់ ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "សត្វដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite animal?" },
                { thaiWord: "สีที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "ស៊ី ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "ពណ៌ដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite color?" },
                { thaiWord: "ฤดูที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "រ៉ឺឌូ ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "រដូវដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite season?" },
                { thaiWord: "กีฬาที่คุณชอบมากที่สุดคืออะไร", phoneticTranscription: "គីឡា ធី ឃុន ឆប ម៉ាក ធី ស៊ុត គឺ អៈរ៉ៃ", khmerTranslation: "កីឡាដែលអ្នកចូលចិត្តជាងគេគឺអ្វី?", englishTranslation: "What's your favorite sport?" },
                { thaiWord: "คุณชอบทำอาหารไหม", phoneticTranscription: "ឃុន ឆប ថាំ អាហារ ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តធ្វើម្ហូបទេ?", englishTranslation: "Do you like to cook?" },
                { thaiWord: "คุณชอบเดินทางไหม", phoneticTranscription: "ឃុន ឆប ដឿនថាង ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តធ្វើដំណើរទេ?", englishTranslation: "Do you like to travel?" },
                { thaiWord: "คุณชอบอ่านหนังสือไหม", phoneticTranscription: "ឃុន ឆប អាន ណាំងស៊ឺ ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តអានសៀវភៅទេ?", englishTranslation: "Do you like to read?" },
                { thaiWord: "คุณชอบดูภาพยนตร์ไหม", phoneticTranscription: "ឃុន ឆប ដូ ផាបផៈយុន ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តមើលភាពយន្តទេ?", englishTranslation: "Do you like to watch movies?" },
                { thaiWord: "คุณชอบฟังเพลงไหม", phoneticTranscription: "ឃុន ឆប ហ្វាំង ភ្លេង ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តស្តាប់ចម្រៀងទេ?", englishTranslation: "Do you like to listen to music?" },
                { thaiWord: "คุณชอบเต้นรำไหม", phoneticTranscription: "ឃុន ឆប តេន រាំ ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តរាំទេ?", englishTranslation: "Do you like to dance?" },
                { thaiWord: "คุณชอบร้องเพลงไหม", phoneticTranscription: "ឃុន ឆប រ៉ង ភ្លេង ម៉ៃ", khmerTranslation: "តើអ្នកចូលចិត្តច្រៀងទេ?", englishTranslation: "Do you like to sing?" }
            ];

            const intermediateLessonsData = [
                { thaiWord: "เพื่อน", phoneticTranscription: "ភឿន", khmerTranslation: "មិត្តភក្តិ", englishTranslation: "Friend" },
                { thaiWord: "ครอบครัว", phoneticTranscription: "ឃ្រប ឃ្រួ", khmerTranslation: "គ្រួសារ", englishTranslation: "Family" },
                { thaiWord: "รัก", phoneticTranscription: "រ៉ាក់", khmerTranslation: "ស្រឡាញ់", englishTranslation: "Love" },
                { thaiWord: "ความสุข", phoneticTranscription: "ខ្វាម ស៊ុក", khmerTranslation: "សុភមង្គល", englishTranslation: "Happiness" },
                { thaiWord: "ความเศร้า", phoneticTranscription: "ខ្វាម សៅ", khmerTranslation: "ភាពសោកសៅ", englishTranslation: "Sadness" },
                { thaiWord: "ความโกรธ", phoneticTranscription: "ខ្វាម ក្រូត", khmerTranslation: "កំហឹង", englishTranslation: "Anger" },
                { thaiWord: "ความกลัว", phoneticTranscription: "ខ្វាម ក្លួ", khmerTranslation: "ការភ័យខ្លាច", englishTranslation: "Fear" },
                { thaiWord: "ความกล้าหาญ", phoneticTranscription: "ខ្វាម ក្លា ហាន", khmerTranslation: "ភាពក្លាហាន", englishTranslation: "Courage" },
                { thaiWord: "ความสงบ", phoneticTranscription: "ខ្វាម សៈងប់", khmerTranslation: "សន្តិភាព", englishTranslation: "Peace" },
                { thaiWord: "ความหวัง", phoneticTranscription: "ខ្វាម វ៉ាំង", khmerTranslation: "ក្តីសង្ឃឹម", englishTranslation: "Hope" },
                { thaiWord: "ความฝัน", phoneticTranscription: "ខ្វាម ហ្វាន់", khmerTranslation: "ក្តីសុបិន", englishTranslation: "Dream" },
                { thaiWord: "อนาคต", phoneticTranscription: "អៈណាខុត", khmerTranslation: "អនាគត", englishTranslation: "Future" },
                { thaiWord: "อดีต", phoneticTranscription: "អៈឌីត", khmerTranslation: "អតីតកាល", englishTranslation: "Past" },
                { thaiWord: "ปัจจุบัน", phoneticTranscription: "ប៉ាត់ចុបបាន", khmerTranslation: "បច្ចុប្បន្ន", englishTranslation: "Present" },
                { thaiWord: "ความสำเร็จ", phoneticTranscription: "ខ្វាម សាំរ៉េត", khmerTranslation: "ភាពជោគជ័យ", englishTranslation: "Success" },
                { thaiWord: "ความล้มเหลว", phoneticTranscription: "ខ្វាម ឡុំ ឡេវ", khmerTranslation: "ភាពបរាជ័យ", englishTranslation: "Failure" },
                { thaiWord: "การเดินทาง", phoneticTranscription: "កាន ដឿនថាង", khmerTranslation: "ការធ្វើដំណើរ", englishTranslation: "Journey" },
                { thaiWord: "การผจญภัย", phoneticTranscription: "កាន ផៈចុនភៃ", khmerTranslation: "ការផ្សងព្រេង", englishTranslation: "Adventure" },
                { thaiWord: "การค้นพบ", phoneticTranscription: "កាន ខុន ភប់", khmerTranslation: "ការរកឃើញ", englishTranslation: "Discovery" },
                { thaiWord: "ประสบการณ์", phoneticTranscription: "ប្រៈសប់កាន", khmerTranslation: "បទពិសោធន៍", englishTranslation: "Experience" },
                { thaiWord: "ความรู้", phoneticTranscription: "ខ្វាម រូ", khmerTranslation: "ចំណេះដឹង", englishTranslation: "Knowledge" },
                { thaiWord: "ปัญญา", phoneticTranscription: "ប៉ាន់យ៉ា", khmerTranslation: "ប្រាជ្ញា", englishTranslation: "Wisdom" },
                { thaiWord: "การเรียนรู้", phoneticTranscription: "កាន រៀនរូ", khmerTranslation: "ការរៀនសូត្រ", englishTranslation: "Learning" },
                { thaiWord: "การสอน", phoneticTranscription: "កាន សន", khmerTranslation: "ការបង្រៀន", englishTranslation: "Teaching" },
                { thaiWord: "โรงเรียน", phoneticTranscription: "រ៉ុងរៀន", khmerTranslation: "សាលារៀន", englishTranslation: "School" },
                { thaiWord: "มหาวิทยาลัย", phoneticTranscription: "មៈហាវិថៈយាល័យ", khmerTranslation: "សាកលវិទ្យាល័យ", englishTranslation: "University" },
                { thaiWord: "ห้องเรียน", phoneticTranscription: "ហង រៀន", khmerTranslation: "បន្ទប់រៀន", englishTranslation: "Classroom" },
                { thaiWord: "นักเรียน", phoneticTranscription: "ណាក់រៀន", khmerTranslation: "សិស្ស", englishTranslation: "Student" },
                { thaiWord: "ครู", phoneticTranscription: "គ្រូ", khmerTranslation: "គ្រូ", englishTranslation: "Teacher" },
                { thaiWord: "บทเรียน", phoneticTranscription: "បុតរៀន", khmerTranslation: "មេរៀន", englishTranslation: "Lesson" },
                { thaiWord: "หนังสือ", phoneticTranscription: "ណាំងស៊ឺ", khmerTranslation: "សៀវភៅ", englishTranslation: "Book" },
                { thaiWord: "สมุดบันทึก", phoneticTranscription: "សៈមុត បាន់ថឹក", khmerTranslation: "សៀវភៅកត់ត្រា", englishTranslation: "Notebook" },
                { thaiWord: "ปากกา", phoneticTranscription: "ប៉ាកកា", khmerTranslation: "ប៊ិច", englishTranslation: "Pen" },
                { thaiWord: "ดินสอ", phoneticTranscription: "ដិនសរ", khmerTranslation: "ខ្មៅដៃ", englishTranslation: "Pencil" },
                { thaiWord: "ยางลบ", phoneticTranscription: "យ៉ាង លប់", khmerTranslation: "ជ័រលុប", englishTranslation: "Eraser" },
                { thaiWord: "กระดาษ", phoneticTranscription: "ក្រៈដាត", khmerTranslation: "ក្រដាស", englishTranslation: "Paper" },
                { thaiWord: "คุณช่วยส่งให้ฉันได้ไหม", phoneticTranscription: "ឃុន ឈួយ សុង ហៃ ឆាន់ ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចហុចឲ្យខ្ញុំបានទេ?", englishTranslation: "Can you pass me?" },
                { thaiWord: "ฉันกำลังหา", phoneticTranscription: "ឆាន់ កាំលាំង ហា", khmerTranslation: "ខ្ញុំកំពុងរក", englishTranslation: "I'm looking for" },
                { thaiWord: "เปิดปิดที่เวลากี่โมง", phoneticTranscription: "ប៉ិត ប៉ិត ធី វ៉េឡា គី ម៉ុង", khmerTranslation: "បើកបិទម៉ោងប៉ុន្មាន?", englishTranslation: "What time does it open/close?" },
                { thaiWord: "คุณแนะนำร้านอาหารที่ดีได้ไหม", phoneticTranscription: "ឃុន ណែណាំ រ៉ាន អាហារ ធី ឌី ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចណែនាំភោជនីយដ្ឋានល្អបានទេ?", englishTranslation: "Can you recommend a good restaurant?" },
                { thaiWord: "ร้านนี้รับบัตรเครดิตไหม", phoneticTranscription: "រ៉ាន នី រ៉ាប់ បាត់ ឃ្រេឌិត ម៉ៃ", khmerTranslation: "តើហាងនេះទទួលប័ណ្ណឥណទានទេ?", englishTranslation: "Do you accept credit cards?" },
                { thaiWord: "ฉันจะหาแท็กซี่ที่ไหน", phoneticTranscription: "ឆាន់ ចៈ ហា ថែកស៊ី ធី ណៃ", khmerTranslation: "ខ្ញុំអាចរកតាក់ស៊ីនៅឯណា?", englishTranslation: "Where can I find a taxi?" },
                { thaiWord: "ค่ารถไปเท่าไหร่", phoneticTranscription: "ខា រ៉ត់ ប៉ៃ ថៅ រ៉ៃ", khmerTranslation: "ថ្លៃឡានទៅប៉ុន្មាន?", englishTranslation: "How much does it cost to get to...?" },
                { thaiWord: "คุณพาฉันไปได้ไหม", phoneticTranscription: "ឃុន ផា ឆាន់ ប៉ៃ ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចនាំខ្ញុំទៅបានទេ?", englishTranslation: "Can you take me to...?" },
                { thaiWord: "คุณพูดช้าลงหน่อยได้ไหม", phoneticTranscription: "ឃុន ភូត ឆា ឡុង ណយ ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចនិយាយយឺតៗបន្តិចបានទេ?", englishTranslation: "Could you speak more slowly please?" },
                { thaiWord: "ขอใบเสร็จหน่อย", phoneticTranscription: "ខរ បៃសេត ណយ", khmerTranslation: "សុំវិក័យប័ត្រ", englishTranslation: "Can I have a receipt please?" },
                { thaiWord: "รหัสผ่าน Wifi คืออะไร", phoneticTranscription: "រ៉ាត់ផាន វ៉ៃហ្វាយ គឺ អៈរ៉ៃ", khmerTranslation: "លេខសម្ងាត់ Wifi គឺអ្វី?", englishTranslation: "What's the WiFi password?" },
                { thaiWord: "คุณช่วยเขียนให้ฉันดูได้ไหม", phoneticTranscription: "ឃុន ឈួយ ខៀន ហៃ ឆាន់ ដូ ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចសរសេរវាឲ្យខ្ញុំបានទេ?", englishTranslation: "Could you please write it down for me?" },
                { thaiWord: "ฉันยืมได้ไหม", phoneticTranscription: "ឆាន់ យឺម ដាយ ម៉ៃ", khmerTranslation: "ខ្ញុំអាចខ្ចីបានទេ?", englishTranslation: "Can I borrow?" }
            ];

            const advancedLessonsData = [
                { thaiWord: "ธรรมชาติ", phoneticTranscription: "ថាំម៉ៈឆាត", khmerTranslation: "ធម្មជាតិ", englishTranslation: "Nature" },
                { thaiWord: "ป่า", phoneticTranscription: "ប៉ា", khmerTranslation: "ព្រៃ", englishTranslation: "Forest" },
                { thaiWord: "เขา", phoneticTranscription: "ខៅ", khmerTranslation: "ភ្នំ", englishTranslation: "Mountain" },
                { thaiWord: "แม่น้ำ", phoneticTranscription: "ម៉ែណាំ", khmerTranslation: "ទន្លេ", englishTranslation: "River" },
                { thaiWord: "ทะเลสาบ", phoneticTranscription: "ថៈលេ សាប", khmerTranslation: "បឹង", englishTranslation: "Lake" },
                { thaiWord: "ชายหาด", phoneticTranscription: "ឆាយ ហាត", khmerTranslation: "ឆ្នេរ", englishTranslation: "Beach" },
                { thaiWord: "ฟ้า", phoneticTranscription: "ហ្វា", khmerTranslation: "មេឃ", englishTranslation: "Sky" },
                { thaiWord: "เมฆ", phoneticTranscription: "មេក", khmerTranslation: "ពពក", englishTranslation: "Cloud" },
                { thaiWord: "ฝน", phoneticTranscription: "ហ្វុន", khmerTranslation: "ភ្លៀង", englishTranslation: "Rain" },
                { thaiWord: "หิมะ", phoneticTranscription: "ហ៊ីម៉ៈ", khmerTranslation: "ព្រិល", englishTranslation: "Snow" },
                { thaiWord: "พระอาทิตย์", phoneticTranscription: "ផ្រៈអាទិត", khmerTranslation: "ព្រះអាទិត្យ", englishTranslation: "Sun" },
                { thaiWord: "พระจันทร์", phoneticTranscription: "ផ្រៈចាន់", khmerTranslation: "ព្រះច័ន្ទ", englishTranslation: "Moon" },
                { thaiWord: "ดาว", phoneticTranscription: "ដាវ", khmerTranslation: "ផ្កាយ", englishTranslation: "Star" },
                { thaiWord: "ดอกไม้", phoneticTranscription: "ដក់ម៉ៃ", khmerTranslation: "ផ្កា", englishTranslation: "Flower" },
                { thaiWord: "ต้นไม้", phoneticTranscription: "តន់ម៉ៃ", khmerTranslation: "ដើមឈើ", englishTranslation: "Tree" },
                { thaiWord: "หญ้า", phoneticTranscription: "យ៉ា", khmerTranslation: "ស្មៅ", englishTranslation: "Grass" },
                { thaiWord: "หิน", phoneticTranscription: "ហ៊ីន", khmerTranslation: "ថ្ម", englishTranslation: "Stone" },
                { thaiWord: "มหาสมุทร", phoneticTranscription: "មៈហាសៈមុត", khmerTranslation: "មហាសមុទ្រ", englishTranslation: "Ocean" },
                { thaiWord: "คลื่น", phoneticTranscription: "ឃ្លឿន", khmerTranslation: "រលក", englishTranslation: "Wave" },
                { thaiWord: "ลม", phoneticTranscription: "លម", khmerTranslation: "ខ្យល់", englishTranslation: "Wind" },
                { thaiWord: "ไฟ", phoneticTranscription: "ហ្វៃ", khmerTranslation: "ភ្លើង", englishTranslation: "Fire" },
                { thaiWord: "โลก", phoneticTranscription: "លោក", khmerTranslation: "ផែនដី/ពិភពលោក", englishTranslation: "Earth" },
                { thaiWord: "สิ่งแวดล้อม", phoneticTranscription: "ស៊ิ่งវ៉ែតលម", khmerTranslation: "បរិស្ថាន", englishTranslation: "Environment" },
                { thaiWord: "สภาพอากาศ", phoneticTranscription: "សៈផាប អាកាត", khmerTranslation: "អាកាសធាតុ", englishTranslation: "Climate" },
                { thaiWord: "คุณแนะนำสถานที่ท่องเที่ยวที่ดีได้ไหม", phoneticTranscription: "ឃុន ណែណាំ សៈថានធី ថងធៀវ ធី ឌី ដាយ ម៉ៃ", khmerTranslation: "តើអ្នកអាចណែនាំកន្លែងទេសចរណ៍ល្អបានទេ?", englishTranslation: "Can you recommend a good place to visit?" },
                { thaiWord: "ATM ที่ใกล้ที่สุดอยู่ที่ไหน", phoneticTranscription: "អេធីអឹម ធី ក្លៃ ធី ស៊ុត យូ ធី ណៃ", khmerTranslation: "ATM ដែលនៅជិតបំផុតនៅឯណា?", englishTranslation: "Where is the nearest ATM?" },
                { thaiWord: "ใกล้นี้มีธนาคารไหม", phoneticTranscription: "ក្លៃ នី មី ថៈណាខាន ម៉ៃ", khmerTranslation: "នៅក្បែរនេះមានធនាគារទេ?", englishTranslation: "Is there a bank nearby?" },
                { thaiWord: "อัตราแลกเปลี่ยนสำหรับเท่าไหร่", phoneticTranscription: "អាត់ត្រា លែកប្លៀន សាំរ៉ាប់ ថៅ រ៉ៃ", khmerTranslation: "អត្រាប្តូរប្រាក់សម្រាប់ប៉ុន្មាន?", englishTranslation: "What's the exchange rate for...?" },
                { thaiWord: "ขอซ่อมช้อนหน่อยได้ไหม", phoneticTranscription: "ខរ សម ឆន ណយ ដាយ ម៉ៃ", khmerTranslation: "សុំសម/ស្លាបព្រាបន្តិចបានទេ?", englishTranslation: "Can I have a fork/spoon please?" }
            ];

            const alphabetConsonantsData = [
                { thaiChar: "ก", phoneticTranscription: "ក (ក៑)", khmerMeaning: "មាន់", englishMeaning: "Chicken" },
                { thaiChar: "ข", phoneticTranscription: "ខ (ខ៑)", khmerMeaning: "ពងមាន់", englishMeaning: "Egg" },
                { thaiChar: "ฃ", phoneticTranscription: "ឃ (ឃ៑)", khmerMeaning: "ដប (លែងប្រើ)", englishMeaning: "Bottle (obsolete)" },
                { thaiChar: "ค", phoneticTranscription: "គ (គ៑)", khmerMeaning: "ក្របី", englishMeaning: "Buffalo" },
                { thaiChar: "ฅ", phoneticTranscription: "ឝ (ឝ៑)", khmerMeaning: "មនុស្ស (លែងប្រើ)", englishMeaning: "Person (obsolete)" },
                { thaiChar: "ฆ", phoneticTranscription: "ឃ (ឃ៑)", khmerMeaning: "កណ្ដឹង", englishMeaning: "Bell" },
                { thaiChar: "ง", phoneticTranscription: "ង (ង៑)", khmerMeaning: "ពស់", englishMeaning: "Snake" },
                { thaiChar: "จ", phoneticTranscription: "ច (ច៑)", khmerMeaning: "ចាន", englishMeaning: "Plate" },
                { thaiChar: "ฉ", phoneticTranscription: "ឆ (ឆ៑)", khmerMeaning: "ឈិង", englishMeaning: "Cymbals" },
                { thaiChar: "ช", phoneticTranscription: "ឈ (ឈ៑)", khmerMeaning: "ដំរី", englishMeaning: "Elephant" },
                { thaiChar: "ซ", phoneticTranscription: "ស (ស៑)", khmerMeaning: "ច្រវ៉ាក់", englishMeaning: "Chain" },
                { thaiChar: "ฌ", phoneticTranscription: "ឈ (ឈ៑)", khmerMeaning: "ដើមឈើ", englishMeaning: "Tree" },
                { thaiChar: "ญ", phoneticTranscription: "ញ (ញ៑)", khmerMeaning: "ស្ត្រី", englishMeaning: "Woman" },
                { thaiChar: "ฎ", phoneticTranscription: "ដ (ដ៑)", khmerMeaning: "រូបរាំ", englishMeaning: "Dancing figure" },
                { thaiChar: "ฏ", phoneticTranscription: "ត (ត៑)", khmerMeaning: "ដំបង", englishMeaning: "Goad" },
                { thaiChar: "ฐ", phoneticTranscription: "ឋ (ឋ៑)", khmerMeaning: "ជើងទម្រ", englishMeaning: "Pedestal" },
                { thaiChar: "ฑ", phoneticTranscription: "ឌ (ឌ៑)", khmerMeaning: "មន្ទោ", englishMeaning: "Mandodari" },
                { thaiChar: "ฒ", phoneticTranscription: "ឍ (ឍ៑)", khmerMeaning: "មនុស្សចាស់", englishMeaning: "Old person" },
                { thaiChar: "ณ", phoneticTranscription: "ណ (ណ៑)", khmerMeaning: "សាមណេរ", englishMeaning: "Novice monk" },
                { thaiChar: "ด", phoneticTranscription: "ដ (ដ៑)", khmerMeaning: "ក្មេង", englishMeaning: "Child" },
                { thaiChar: "ต", phoneticTranscription: "ត (ត៑)", khmerMeaning: "អណ្តើក", englishMeaning: "Turtle" },
                { thaiChar: "ถ", phoneticTranscription: "ថ (ថ៑)", khmerMeaning: "កាបូប", englishMeaning: "Bag" },
                { thaiChar: "ท", phoneticTranscription: "ទ (ទ៑)", khmerMeaning: "ទាហាន", englishMeaning: "Soldier" },
                { thaiChar: "ธ", phoneticTranscription: "ធ (ធ៑)", khmerMeaning: "ទង់ជាតិ", englishMeaning: "Flag" },
                { thaiChar: "น", phoneticTranscription: "ន (ន៑)", khmerMeaning: "កណ្ដុរ", englishMeaning: "Mouse" },
                { thaiChar: "บ", phoneticTranscription: "ប (ប៑)", khmerMeaning: "ស្លឹកឈើ", englishMeaning: "Leaf" },
                { thaiChar: "ป", phoneticTranscription: "ប (ប៑)", khmerMeaning: "ត្រី", englishMeaning: "Fish" },
                { thaiChar: "ผ", phoneticTranscription: "ផ (ផ៑)", khmerMeaning: "ឃ្មុំ", englishMeaning: "Bee" },
                { thaiChar: "ฝ", phoneticTranscription: "ហ្វ (ហ្វ៑)", khmerMeaning: "គម្រប", englishMeaning: "Lid" },
                { thaiChar: "พ", phoneticTranscription: "ភ (ភ៑)", khmerMeaning: "ថាស", englishMeaning: "Tray" },
                { thaiChar: "ฟ", phoneticTranscription: "ហ្វ (ហ្វ៑)", khmerMeaning: "ធ្មេញ", englishMeaning: "Tooth" },
                { thaiChar: "ภ", phoneticTranscription: "ភ (ភ៑)", khmerMeaning: "ទូកសំពៅ", englishMeaning: "Junk (boat)" },
                { thaiChar: "ม", phoneticTranscription: "ម (ម៑)", khmerMeaning: "សេះ", englishMeaning: "Horse" },
                { thaiChar: "ย", phoneticTranscription: "យ (យ៑)", khmerMeaning: "យក្ស", englishMeaning: "Giant" },
                { thaiChar: "ร", phoneticTranscription: "រ (រ៑)", khmerMeaning: "ទូក", englishMeaning: "Boat" },
                { thaiChar: "ล", phoneticTranscription: "ល (ល៑)", khmerMeaning: "ស្វា", englishMeaning: "Monkey" },
                { thaiChar: "ว", phoneticTranscription: "វ (វ៑)", khmerMeaning: "ចិញ្ចៀន", englishMeaning: "Ring" },
                { thaiChar: "ศ", phoneticTranscription: "ស (ស៑)", khmerMeaning: "សាលា", englishMeaning: "Pavilion" },
                { thaiChar: "ษ", phoneticTranscription: "ស (ស៑)", khmerMeaning: "ឥសី", englishMeaning: "Hermit" },
                { thaiChar: "ส", phoneticTranscription: "ស (ស៑)", khmerMeaning: "ខ្លា", englishMeaning: "Tiger" },
                { thaiChar: "ห", phoneticTranscription: "ហ (ហ៑)", khmerMeaning: "ប្រអប់", englishMeaning: "Box" },
                { thaiChar: "ฬ", phoneticTranscription: "ឡ (ឡ៑)", khmerMeaning: "ខ្លែង", englishMeaning: "Kite" },
                { thaiChar: "อ", phoneticTranscription: "អ (អ៑)", khmerMeaning: "អាង", englishMeaning: "Basin" },
                { thaiChar: "ฮ", phoneticTranscription: "ហ (ហ៑)", khmerMeaning: "សត្វទីទុយ", englishMeaning: "Owl" }
            ];

            const alphabetVowelsData = [
                { thaiChar: "อะ", phoneticTranscription: "អៈ", khmerMeaning: "short 'a'", englishMeaning: "short 'a'" },
                { thaiChar: "อา", phoneticTranscription: "អា", khmerMeaning: "long 'aa'", englishMeaning: "long 'aa'" },
                { thaiChar: "อิ", phoneticTranscription: "អិ", khmerMeaning: "short 'i'", englishMeaning: "short 'i'" },
                { thaiChar: "อี", phoneticTranscription: "អី", khmerMeaning: "long 'ee'", englishMeaning: "long 'ee'" },
                { thaiChar: "อึ", phoneticTranscription: "អឹ", khmerMeaning: "short 'ue'", englishMeaning: "short 'ue'" },
                { thaiChar: "อือ", phoneticTranscription: "អឺ", khmerMeaning: "long 'eu'", englishMeaning: "long 'eu'" },
                { thaiChar: "อุ", phoneticTranscription: "អុ", khmerMeaning: "short 'u'", englishMeaning: "short 'u'" },
                { thaiChar: "อู", phoneticTranscription: "អូ", khmerMeaning: "long 'oo'", englishMeaning: "long 'oo'" },
                { thaiChar: "เอะ", phoneticTranscription: "អេៈ", khmerMeaning: "short 'e'", englishMeaning: "short 'e'" },
                { thaiChar: "เอ", phoneticTranscription: "អេ", khmerMeaning: "long 'eh'", englishMeaning: "long 'eh'" },
                { thaiChar: "แอะ", phoneticTranscription: "អែៈ", khmerMeaning: "short 'ae'", englishMeaning: "short 'ae'" },
                { thaiChar: "แอ", phoneticTranscription: "អែ", khmerMeaning: "long 'aae'", englishMeaning: "long 'aae'" },
                { thaiChar: "โอะ", phoneticTranscription: "អូៈ", khmerMeaning: "short 'o'", englishMeaning: "short 'o'" },
                { thaiChar: "โอ", phoneticTranscription: "អូ", khmerMeaning: "long 'oh'", englishMeaning: "long 'oh'" },
                { thaiChar: "เอาะ", phoneticTranscription: "អោះ", khmerMeaning: "short 'aw'", englishMeaning: "short 'aw'" },
                { thaiChar: "ออ", phoneticTranscription: "អរ", khmerMeaning: "long 'aaw'", englishMeaning: "long 'aaw'" },
                { thaiChar: "เออะ", phoneticTranscription: "អើៈ", khmerMeaning: "short 'oe'", englishMeaning: "short 'oe'" },
                { thaiChar: "เออ", phoneticTranscription: "អឺ", khmerMeaning: "long 'eu'", englishMeaning: "long 'eu'" },
                { thaiChar: "เอียะ", phoneticTranscription: "អៀៈ", khmerMeaning: "short 'ia'", englishMeaning: "short 'ia'" },
                { thaiChar: "เอีย", phoneticTranscription: "អៀ", khmerMeaning: "long 'ia'", englishMeaning: "long 'ia'" },
                { thaiChar: "เอือะ", phoneticTranscription: "អឿៈ", khmerMeaning: "short 'uea'", englishMeaning: "short 'uea'" },
                { thaiChar: "เอือ", phoneticTranscription: "អឿ", khmerMeaning: "long 'uea'", englishMeaning: "long 'uea'" },
                { thaiChar: "อัวะ", phoneticTranscription: "អួៈ", khmerMeaning: "short 'ua'", englishMeaning: "short 'ua'" },
                { thaiChar: "อัว", phoneticTranscription: "អួ", khmerMeaning: "long 'ua'", englishMeaning: "long 'ua'" },
                { thaiChar: "อำ", phoneticTranscription: "អាំ", khmerMeaning: "'am'", englishMeaning: "'am'" },
                { thaiChar: "ไอ", phoneticTranscription: "អៃ", khmerMeaning: "'ai'", englishMeaning: "'ai'" },
                { thaiChar: "ใอ", phoneticTranscription: "អៃ", khmerMeaning: "'ai' (another form)", englishMeaning: "'ai' (another form)" },
                { thaiChar: "เอา", phoneticTranscription: "អៅ", khmerMeaning: "'ao'", englishMeaning: "'ao'" }
            ];


            const examQuestionsData = [
                {
                    questionThai: "สวัสดี",
                    questionKhmer: 'តើ "สวัสดี" មានន័យដូចម្តេចជាភាសាខ្មែរ?',
                    questionEnglish: 'What does "สวัสดี" mean in Khmer?',
                    options: [
                        { textThai: "ขอบคุณ", textKhmer: "អរគុណ", textEnglish: "Thank you" },
                        { textThai: "สวัสดี", textKhmer: "ជំរាបសួរ", textEnglish: "Hello" },
                        { textThai: "ลาก่อน", textKhmer: "លាហើយ", textEnglish: "Goodbye" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    questionThai: "น้ำ",
                    questionKhmer: 'តើពាក្យថៃមួយណាមានន័យថា "ទឹក"?',
                    questionEnglish: 'Which Thai word means "water"?',
                    options: [
                        { textThai: "ข้าว", textKhmer: "បាយ", textEnglish: "Rice" },
                        { textThai: "น้ำ", textKhmer: "ទឹក", textEnglish: "Water" },
                        { textThai: "ผลไม้", textKhmer: "ផ្លែឈើ", textEnglish: "Fruit" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    questionThai: "อร่อย",
                    questionKhmer: 'តើពាក្យថៃមួយណាមានន័យថា "ឆ្ងាញ់"?',
                    questionEnglish: 'Which Thai word means "delicious"?',
                    options: [
                        { textThai: "อร่อย", textKhmer: "ឆ្ងាញ់", textEnglish: "Delicious" },
                        { textThai: "แพง", textKhmer: "ថ្លៃ", textEnglish: "Expensive" },
                        { textThai: "ถูก", textKhmer: "ថោក", englishTranslation: "Cheap" }
                    ],
                    correctAnswerIndex: 0
                },
                {
                    questionThai: "เท่าไหร่",
                    questionKhmer: 'តើពាក្យថៃមួយណាមានន័យថា "ប៉ុន្មាន" (តម្លៃ)?',
                    questionEnglish: 'Which Thai word means "how much" (price)?',
                    options: [
                        { textThai: "อะไร", textKhmer: "អ្វី", englishTranslation: "What" },
                        { textThai: "เมื่อไหร่", textKhmer: "ពេលណា", englishTranslation: "When" },
                        { textThai: "เท่าไหร่", textKhmer: "ប៉ុន្មាន", englishTranslation: "How much" }
                    ],
                    correctAnswerIndex: 2
                },
                {
                    questionThai: "ไปไหน",
                    questionKhmer: 'តើ "ไปไหน" មានន័យដូចម្តេចជាភាសាខ្មែរ?',
                    questionEnglish: 'What does "ไปไหน" mean in Khmer?',
                    options: [
                        { textThai: "ไปไหน", textKhmer: "ទៅណា", englishTranslation: "Where are you going?" },
                        { textThai: "มาจากไหน", textKhmer: "មកពីណា", englishTranslation: "Where are you from?" },
                        { textThai: "ทำอะไร", textKhmer: "ធ្វើអ្វី", englishTranslation: "What are you doing?" }
                    ],
                    correctAnswerIndex: 0
                },
                {
                    questionThai: "กินข้าว",
                    questionKhmer: 'តើ "กินข้าว" មានន័យដូចម្តេចជាភាសាខ្មែរ?',
                    questionEnglish: 'What does "กินข้าว" mean in Khmer?',
                    options: [
                        { textThai: "ดื่มน้ำ", textKhmer: "ផឹកទឹក", englishTranslation: "Drink water" },
                        { textThai: "กินข้าว", textKhmer: "ញ៉ាំបាយ", englishTranslation: "Eat rice/meal" },
                        { textThai: "นอนหลับ", textKhmer: "គេង", englishTranslation: "Sleep" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    questionThai: "ขอโทษ",
                    questionKhmer: 'តើពាក្យថៃមួយណាមានន័យថា "សូមទោស"?',
                    questionEnglish: 'Which Thai word means "excuse me/sorry"?',
                    options: [
                        { textThai: "ขอบคุณ", textKhmer: "អរគុណ", englishTranslation: "Thank you" },
                        { textThai: "สวัสดี", textKhmer: "ជំរាបសួរ", englishTranslation: "Hello" },
                        { textThai: "ขอโทษ", textKhmer: "សូមទោស", englishTranslation: "Excuse me/Sorry" }
                    ],
                    correctAnswerIndex: 2
                },
                {
                    questionThai: "แม่",
                    questionKhmer: 'តើពាក្យថៃមួយណាមានន័យថា "ម្ដាយ"?',
                    questionEnglish: 'Which Thai word means "mother"?',
                    options: [
                        { textThai: "พ่อ", textKhmer: "ឪពុក", englishTranslation: "Father" },
                        { textThai: "แม่", textKhmer: "ម្ដាយ", englishTranslation: "Mother" },
                        { textThai: "ลูก", textKhmer: "កូន", englishTranslation: "Child" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    questionThai: "ตื่นเช้า",
                    questionKhmer: 'តើ "ตื่นเช้า" មានន័យដូចម្តេចជាភាសាខ្មែរ?',
                    questionEnglish: 'What does "ตื่นเช้า" mean in Khmer?',
                    options: [
                        { textThai: "เข้านอน", textKhmer: "ចូលគេង", englishTranslation: "Go to bed" },
                        { textThai: "ភ្ញាក់ពីព្រឹក", textKhmer: "ភ្ញាក់ពីព្រឹក", englishTranslation: "Wake up early" },
                        { textThai: "กินข้าว", textKhmer: "ញ៉ាំបាយ", englishTranslation: "Eat rice" }
                    ],
                    correctAnswerIndex: 1
                },
                {
                    questionThai: "ไปตลาด",
                    questionKhmer: 'តើ "ไปตลาด" មានន័យដូចម្តេចជាភាសាខ្មែរ?',
                    questionEnglish: 'What does "ไปตลาด" mean in Khmer?',
                    options: [
                        { textThai: "ไปផ្ទះ", textKhmer: "ទៅផ្ទះ", englishTranslation: "Go home" },
                        { textThai: "ไปสาลารៀน", textKhmer: "ទៅសាលារៀន", englishTranslation: "Go to school" },
                        { textThai: "ไปផ្សារ", textKhmer: "ទៅផ្សារ", englishTranslation: "Go to market" }
                    ],
                    correctAnswerIndex: 2
                }
            ];

            const flashcardsData = [
                ...kindergartenLessonsData, // Include all kindergarten lessons as flashcards
                ...beginnerLessonsData,    // Include all beginner lessons as flashcards
                ...intermediateLessonsData, // Include all intermediate lessons as flashcards
                ...advancedLessonsData,     // Include all advanced lessons as flashcards
                // Add more specific flashcards if needed
                { thaiWord: "อรุณสวัสดิ์", khmerTranslation: "អរុណសួស្តី", englishTranslation: "Good morning", phoneticTranscription: "អៈរុន សៈវ៉ាត់" },
                { thaiWord: "ราตรีสวัสดิ์", khmerTranslation: "រាត្រីសួស្តី", englishTranslation: "Good night", phoneticTranscription: "រ៉ាត្រី សៈវ៉ាត់" },
                { thaiWord: "โรงพยาบาล", khmerTranslation: "មន្ទីរពេទ្យ", englishTranslation: "Hospital", phoneticTranscription: "រ៉ុងផៈយាបាន" },
                { thaiWord: "ตำรวจ", khmerTranslation: "ប៉ូលិស", englishTranslation: "Police", phoneticTranscription: "តាំរួត" },
                { thaiWord: "รถ", khmerTranslation: "ឡាន", englishTranslation: "Car", phoneticTranscription: "រ៉ត់" },
                { thaiWord: "เครื่องบิน", khmerTranslation: "យន្តហោះ", englishTranslation: "Airplane", phoneticTranscription: "ឃ្រឿងប៊ីន" },
                { thaiWord: "เรือ", khmerTranslation: "ទូក", englishTranslation: "Boat", phoneticTranscription: "រឿ" },
                { thaiWord: "สีแดง", khmerTranslation: "ពណ៌ក្រហម", englishTranslation: "Red color", phoneticTranscription: "ស៊ី ដែង" },
                { thaiWord: "สีน้ำเงิน", khmerTranslation: "ពណ៌ខៀវ", englishTranslation: "Blue color", phoneticTranscription: "ស៊ី ណាំងើន" },
                { thaiWord: "สีเขียว", khmerTranslation: "ពណ៌បៃតង", englishTranslation: "Green color", phoneticTranscription: "ស៊ី ខៀវ" },
                { thaiWord: "หนึ่ง", khmerTranslation: "មួយ", englishTranslation: "One", phoneticTranscription: "ណឺង" },
                { thaiWord: "สอง", khmerTranslation: "ពីរ", englishTranslation: "Two", phoneticTranscription: "សង" },
                { thaiWord: "สาม", khmerTranslation: "បី", englishTranslation: "Three", phoneticTranscription: "សាម" }
            ];


            // Initialize on window load
            window.onload = async function() {
                showLoadingSpinner();
                // No Firebase initialization needed anymore
                document.getElementById('current-user-id').textContent = 'Guest'; // Static guest ID
                document.getElementById('user-id-display').classList.remove('opacity-0'); // Show user ID
                hideLoadingSpinner();
                document.querySelector('.nav-button[data-section="home"]').click(); // Activate home section on load

                // Populate sections with data
                populateLessons('kindergarten-lessons-container', kindergartenLessonsData);
                populateLessons('beginner-lessons-container', beginnerLessonsData);
                populateLessons('intermediate-lessons-container', intermediateLessonsData);
                populateLessons('advanced-lessons-container', advancedLessonsData);
                populateAlphabet('consonants-container', alphabetConsonantsData); // Populate consonants
                populateAlphabet('vowels-container', alphabetVowelsData);       // Populate vowels
                populateExamQuestions('exam-questions-container', examQuestionsData);
                populateFlashcards('flashcards-container', flashcardsData);
            };

            // Function to populate lesson containers
            function populateLessons(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear existing content
                data.forEach(lesson => {
                    container.appendChild(createLessonElement(lesson));
                });
            }

            // Function to populate alphabet containers
            function populateAlphabet(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear existing content
                data.forEach(char => {
                    container.appendChild(createAlphabetElement(char));
                });
            }

            // Function to populate exam questions container
            function populateExamQuestions(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear existing content
                data.forEach(question => {
                    container.appendChild(createQuizQuestionElement(question));
                });
            }

            // Function to populate flashcards container
            function populateFlashcards(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear existing content
                data.forEach(flashcard => {
                    container.appendChild(createFlashcardElement(flashcard));
                });
            }


            // UI Logic for section switching
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    // Remove active class from all buttons
                    document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('bg-blue-500', 'text-white'));
                    // Add active class to clicked button
                    event.currentTarget.classList.add('bg-blue-500', 'text-white');

                    // Hide all sections
                    document.querySelectorAll('.app-section').forEach(section => section.classList.add('hidden'));
                    // Show the selected section
                    const targetSectionId = event.currentTarget.dataset.section + '-section';
                    document.getElementById(targetSectionId).classList.remove('hidden');
                });
            });

            // Audio playback logic (now using Web Speech API)
            document.addEventListener('click', (event) => {
                // Handle Thai audio playback
                if (event.target.closest('.play-audio-button')) {
                    const button = event.target.closest('.play-audio-button');
                    const thaiText = button.dataset.thaiText; // Get Thai text from data attribute

                    if ('speechSynthesis' in window) {
                        const utterance = new SpeechSynthesisUtterance(thaiText);
                        // Try to find a Thai voice
                        let thaiVoice = speechSynthesis.getVoices().find(voice => voice.lang === 'th-TH' || voice.lang.startsWith('th-') && voice.name.includes('Thai'));
                        // If a Thai voice is not immediately available, try again after voices are loaded
                        if (!thaiVoice) {
                            speechSynthesis.onvoiceschanged = () => {
                                thaiVoice = speechSynthesis.getVoices().find(voice => voice.lang === 'th-TH' || voice.lang.startsWith('th-') && voice.name.includes('Thai'));
                                if (thaiVoice) utterance.voice = thaiVoice;
                                speechSynthesis.speak(utterance); // Speak once voice is found
                            };
                        } else {
                             utterance.voice = thaiVoice;
                        }

                        // Optional: Add visual feedback for playing audio
                        button.classList.add('animate-pulse');
                        utterance.onend = () => {
                            button.classList.remove('animate-pulse');
                        };
                        utterance.onerror = (e) => {
                            button.classList.remove('animate-pulse');
                            console.error("Speech synthesis error (Thai):", e);
                            alert(translations[currentLang]['tts_error'] || "Error speaking text.");
                        };
                        // Speak immediately if voice is already found, otherwise wait for onvoiceschanged
                        if (thaiVoice) {
                            speechSynthesis.speak(utterance);
                        }
                    } else {
                        alert(translations[currentLang]['tts_not_supported_error'] || "Your browser does not support text-to-speech.");
                        console.error("Web Speech API not supported.");
                    }
                }

                // Handle Khmer phonetic audio playback
                if (event.target.closest('.play-khmer-phonetic-button')) {
                    const button = event.target.closest('.play-khmer-phonetic-button');
                    const khmerPhoneticText = button.dataset.khmerPhoneticText; // Get Khmer phonetic text from data attribute

                    if ('speechSynthesis' in window) {
                        const utterance = new SpeechSynthesisUtterance(khmerPhoneticText);
                        // Explicitly set language to English for phonetic transcriptions
                        utterance.lang = 'en-US'; // Use an English voice for phonetic pronunciation

                        // Optional: Add visual feedback for playing audio
                        button.classList.add('animate-pulse');
                        utterance.onend = () => {
                            button.classList.remove('animate-pulse');
                        };
                        utterance.onerror = (e) => {
                            button.classList.remove('animate-pulse');
                            console.error("Speech synthesis error (Khmer phonetic):", e);
                            alert(translations[currentLang]['tts_error'] || "Error speaking text.");
                        };
                        speechSynthesis.speak(utterance);
                    } else {
                        alert(translations[currentLang]['tts_not_supported_error'] || "Your browser does not support text-to-speech.");
                        console.error("Web Speech API not supported.");
                    }
                }
            });

            // Language selector logic
            document.getElementById('language-selector').addEventListener('change', (event) => {
                currentLang = event.target.value;
                applyTranslations();
            });

            // Initial application of translations
            applyTranslations();

        } // End of if (typeof window.thaiLanguageAppInitialized === 'undefined')
    </script>
</body>
</html>
